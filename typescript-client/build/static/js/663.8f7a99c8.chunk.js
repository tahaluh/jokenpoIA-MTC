/*! For license information please see 663.8f7a99c8.chunk.js.LICENSE.txt */
(self.webpackChunktypescript_client=self.webpackChunktypescript_client||[]).push([[663],{3361:function(t,e,n){"use strict";n.d(e,{Z:function(){return it}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(t){return t.trim()}function u(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function l(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function p(t){return t.length}function d(t){return t.length}function f(t,e){return e.push(t),t}var m=1,g=1,v=0,y=0,x=0,b="";function w(t,e,n,r,i,a,o){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:m,column:g,length:o,return:""}}function k(t,e){return o(w("",null,null,"",null,null,0),t,{length:-t.length},e)}function S(){return x=y>0?l(b,--y):0,g--,10===x&&(g=1,m--),x}function T(){return x=y<v?l(b,y++):0,g++,10===x&&(g=1,m++),x}function A(){return l(b,y)}function E(){return y}function _(t,e){return h(b,t,e)}function L(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(t){return m=g=1,v=p(b=t),y=0,[]}function C(t){return b="",t}function O(t){return s(_(y-1,M(91===t?t+2:40===t?t+1:t)))}function R(t){for(;(x=A())&&x<33;)T();return L(t)>2||L(x)>3?"":" "}function D(t,e){for(;--e&&T()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return _(t,E()+(e<6&&32==A()&&32==T()))}function M(t){for(;T();)switch(x){case t:return y;case 34:case 39:34!==t&&39!==t&&M(x);break;case 40:41===t&&M(t);break;case 92:T()}return y}function F(t,e){for(;T()&&t+x!==57&&(t+x!==84||47!==A()););return"/*"+_(e,y-1)+"*"+a(47===t?t:T())}function z(t){for(;!L(A());)T();return _(t,y)}var P="-ms-",N="-moz-",V="-webkit-",K="comm",Z="rule",j="decl",G="@keyframes";function B(t,e){for(var n="",r=d(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function U(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case j:return t.return=t.return||t.value;case K:return"";case G:return t.return=t.value+"{"+B(t.children,r)+"}";case Z:t.value=t.props.join(",")}return p(n=B(t.children,r))?t.return=t.value+"{"+n+"}":""}function W(t){return C(H("",null,null,null,[""],t=I(t),0,[0],t))}function H(t,e,n,r,i,o,s,h,d){for(var m=0,g=0,v=s,y=0,x=0,b=0,w=1,k=1,_=1,L=0,I="",C=i,M=o,P=r,N=I;k;)switch(b=L,L=T()){case 40:if(108!=b&&58==l(N,v-1)){-1!=c(N+=u(O(L),"&","&\f"),"&\f")&&(_=-1);break}case 34:case 39:case 91:N+=O(L);break;case 9:case 10:case 13:case 32:N+=R(b);break;case 92:N+=D(E()-1,7);continue;case 47:switch(A()){case 42:case 47:f(q(F(T(),E()),e,n),d);break;default:N+="/"}break;case 123*w:h[m++]=p(N)*_;case 125*w:case 59:case 0:switch(L){case 0:case 125:k=0;case 59+g:-1==_&&(N=u(N,/\f/g,"")),x>0&&p(N)-v&&f(x>32?Y(N+";",r,n,v-1):Y(u(N," ","")+";",r,n,v-2),d);break;case 59:N+=";";default:if(f(P=X(N,e,n,m,g,i,h,I,C=[],M=[],v),o),123===L)if(0===g)H(N,e,P,P,C,o,v,h,M);else switch(99===y&&110===l(N,3)?100:y){case 100:case 108:case 109:case 115:H(t,P,P,r&&f(X(t,P,P,0,0,i,h,I,i,C=[],v),M),i,M,v,h,r?C:M);break;default:H(N,P,P,P,[""],M,0,h,M)}}m=g=x=0,w=_=1,I=N="",v=s;break;case 58:v=1+p(N),x=b;default:if(w<1)if(123==L)--w;else if(125==L&&0==w++&&125==S())continue;switch(N+=a(L),L*w){case 38:_=g>0?1:(N+="\f",-1);break;case 44:h[m++]=(p(N)-1)*_,_=1;break;case 64:45===A()&&(N+=O(T())),y=A(),g=v=p(I=N+=z(E())),L++;break;case 45:45===b&&2==p(N)&&(w=0)}}return o}function X(t,e,n,r,a,o,c,l,p,f,m){for(var g=a-1,v=0===a?o:[""],y=d(v),x=0,b=0,k=0;x<r;++x)for(var S=0,T=h(t,g+1,g=i(b=c[x])),A=t;S<y;++S)(A=s(b>0?v[S]+" "+T:u(T,/&\f/g,v[S])))&&(p[k++]=A);return w(t,e,n,0===a?Z:l,p,f,m)}function q(t,e,n){return w(t,e,n,K,a(x),h(t,2,-2),0)}function Y(t,e,n,r){return w(t,e,n,j,h(t,0,r),h(t,r+1,-1),r)}var J=function(t,e,n){for(var r=0,i=0;r=i,i=A(),38===r&&12===i&&(e[n]=1),!L(i);)T();return _(t,y)},$=function(t,e){return C(function(t,e){var n=-1,r=44;do{switch(L(r)){case 0:38===r&&12===A()&&(e[n]=1),t[n]+=J(y-1,e,n);break;case 2:t[n]+=O(r);break;case 4:if(44===r){t[++n]=58===A()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=a(r)}}while(r=T());return t}(I(t),e))},Q=new WeakMap,tt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Q.get(n))&&!r){Q.set(t,!0);for(var i=[],a=$(e,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)t.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},et=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function nt(t,e){switch(function(t,e){return 45^l(t,0)?(((e<<2^l(t,0))<<2^l(t,1))<<2^l(t,2))<<2^l(t,3):0}(t,e)){case 5103:return V+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return V+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return V+t+N+t+P+t+t;case 6828:case 4268:return V+t+P+t+t;case 6165:return V+t+P+"flex-"+t+t;case 5187:return V+t+u(t,/(\w+).+(:[^]+)/,V+"box-$1$2"+P+"flex-$1$2")+t;case 5443:return V+t+P+"flex-item-"+u(t,/flex-|-self/,"")+t;case 4675:return V+t+P+"flex-line-pack"+u(t,/align-content|flex-|-self/,"")+t;case 5548:return V+t+P+u(t,"shrink","negative")+t;case 5292:return V+t+P+u(t,"basis","preferred-size")+t;case 6060:return V+"box-"+u(t,"-grow","")+V+t+P+u(t,"grow","positive")+t;case 4554:return V+u(t,/([^-])(transform)/g,"$1"+V+"$2")+t;case 6187:return u(u(u(t,/(zoom-|grab)/,V+"$1"),/(image-set)/,V+"$1"),t,"")+t;case 5495:case 3959:return u(t,/(image-set\([^]*)/,V+"$1$`$1");case 4968:return u(u(t,/(.+:)(flex-)?(.*)/,V+"box-pack:$3"+P+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+V+t+t;case 4095:case 3583:case 4068:case 2532:return u(t,/(.+)-inline(.+)/,V+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(t)-1-e>6)switch(l(t,e+1)){case 109:if(45!==l(t,e+4))break;case 102:return u(t,/(.+:)(.+)-([^]+)/,"$1"+V+"$2-$3$1"+N+(108==l(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?nt(u(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==l(t,e+1))break;case 6444:switch(l(t,p(t)-3-(~c(t,"!important")&&10))){case 107:return u(t,":",":"+V)+t;case 101:return u(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+V+(45===l(t,14)?"inline-":"")+"box$3$1"+V+"$2$3$1"+P+"$2box$3")+t}break;case 5936:switch(l(t,e+11)){case 114:return V+t+P+u(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return V+t+P+u(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return V+t+P+u(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return V+t+P+t+t}return t}var rt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case j:t.return=nt(t.value,t.length);break;case G:return B([k(t,{value:u(t.value,"@","@"+V)})],r);case Z:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return B([k(t,{props:[u(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return B([k(t,{props:[u(e,/:(plac\w+)/,":"+V+"input-$1")]}),k(t,{props:[u(e,/:(plac\w+)/,":-moz-$1")]}),k(t,{props:[u(e,/:(plac\w+)/,P+"input-$1")]})],r)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||rt;var a,o,s={},u=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;u.push(t)}));var c,l,h=[U,(l=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&l(t)})],p=function(t){var e=d(t);return function(n,r,i,a){for(var o="",s=0;s<e;s++)o+=t[s](n,r,i,a)||"";return o}}([tt,et].concat(i,h));o=function(t,e,n,r){c=n,B(W(t?t+"{"+e.styles+"}":e.styles),p),r&&(f.inserted[e.name]=!0)};var f={key:e,sheet:new r({key:e,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:o};return f.sheet.hydrate(u),f}},9797:function(t,e,n){"use strict";function r(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}n.d(e,{Z:function(){return r}})},2564:function(t,e,n){"use strict";n.d(e,{T:function(){return u},i:function(){return a},w:function(){return s}});var r=n(2791),i=n(3361),a=(n(9140),n(2561),!0),o=r.createContext("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null);o.Provider;var s=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(o);return t(e,i,n)}))};a||(s=function(t){return function(e){var n=(0,r.useContext)(o);return null===n?(n=(0,i.Z)({key:"css"}),r.createElement(o.Provider,{value:n},t(e,n))):t(e,n)}});var u=r.createContext({})},2554:function(t,e,n){"use strict";n.d(e,{F4:function(){return l},xB:function(){return u}});var r=n(2564),i=n(2791),a=n(5438),o=n(2561),s=n(9140),u=(n(3361),n(2110),(0,r.w)((function(t,e){var n=t.styles,u=(0,s.O)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,l=u.name,h=u.styles,p=u.next;void 0!==p;)l+=" "+p.name,h+=p.styles,p=p.next;var d=!0===e.compat,f=e.insert("",{name:l,styles:h},e.sheet,d);return d?null:i.createElement("style",((c={})["data-emotion"]=e.key+"-global "+l,c.dangerouslySetInnerHTML={__html:f},c.nonce=e.sheet.nonce,c))}var m=i.useRef();return(0,o.j)((function(){var t=e.key+"-global",n=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+t+" "+u.name+'"]');return e.sheet.tags.length&&(n.before=e.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",t),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[e]),(0,o.j)((function(){var t=m.current,n=t[0];if(t[1])t[1]=!1;else{if(void 0!==u.next&&(0,a.My)(e,u.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}e.insert("",u,n,!1)}}),[e,u.name]),null})));function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,s.O)(e)}var l=function(){var t=c.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},9140:function(t,e,n){"use strict";n.d(e,{O:function(){return f}});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(9797),a=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s=function(t){return 45===t.charCodeAt(1)},u=function(t){return null!=t&&"boolean"!==typeof t},c=(0,i.Z)((function(t){return s(t)?t:t.replace(a,"-$&").toLowerCase()})),l=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(o,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===r[t]||s(t)||"number"!==typeof e||0===e?e:e+"px"};function h(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(t,e,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=e&&void 0!==e[o]?r+=a+"{"+e[o]+"}":u(o)&&(r+=c(a)+":"+l(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=e&&void 0!==e[o[0]]){var s=h(t,e,o);switch(a){case"animation":case"animationName":r+=c(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var p=0;p<o.length;p++)u(o[p])&&(r+=c(a)+":"+l(a,o[p])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=p,a=n(t);return p=i,h(t,e,a)}}if(null==e)return n;var o=e[n];return void 0!==o?o:n}var p,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";p=void 0;var a=t[0];null==a||void 0===a.raw?(r=!1,i+=h(n,e,a)):i+=a[0];for(var o=1;o<t.length;o++)i+=h(n,e,t[o]),r&&(i+=a[o]);d.lastIndex=0;for(var s,u="";null!==(s=d.exec(i));)u+="-"+s[1];var c=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+u;return{name:c,styles:i,next:p}}},2561:function(t,e,n){"use strict";var r;n.d(e,{L:function(){return o},j:function(){return s}});var i=n(2791),a=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=a||function(t){return t()},s=a||i.useLayoutEffect},5438:function(t,e,n){"use strict";n.d(e,{My:function(){return a},fp:function(){return r},hC:function(){return i}});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},a=function(t,e,n){i(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var a=e;do{t.insert(e===a?"."+r:"",a,t.sheet,!0),a=a.next}while(void 0!==a)}}},4554:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(7462),i=n(3366),a=n(2791),o=n(8182),s=n(2421),u=n(104),c=n(8519),l=n(3459),h=n(184),p=["className","component"];var d=n(5902),f=n(7107),m=n(988),g=(0,f.Z)(),v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.themeId,n=t.defaultTheme,d=t.defaultClassName,f=void 0===d?"MuiBox-root":d,m=t.generateClassName,g=(0,s.ZP)("div",{shouldForwardProp:function(t){return"theme"!==t&&"sx"!==t&&"as"!==t}})(u.Z);return a.forwardRef((function(t,a){var s=(0,l.Z)(n),u=(0,c.Z)(t),d=u.className,v=u.component,y=void 0===v?"div":v,x=(0,i.Z)(u,p);return(0,h.jsx)(g,(0,r.Z)({as:y,ref:a,className:(0,o.Z)(d,m?m(f):f),theme:e&&s[e]||s},x))}))}({themeId:m.Z,defaultTheme:g,defaultClassName:"MuiBox-root",generateClassName:d.Z.generate}),y=v},637:function(t,e,n){"use strict";n.d(e,{Z:function(){return ut}});var r,i=n(9439),a=n(4942),o=n(7462),s=n(3366),u=n(2791),c=n(8182),l=n(4419),h=n(7630),p=n(1046),d=n(2071),f=n(8956).Z,m=!0,g=!1,v={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function y(t){t.metaKey||t.altKey||t.ctrlKey||(m=!0)}function x(){m=!1}function b(){"hidden"===this.visibilityState&&g&&(m=!0)}function w(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return m||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!v[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}var k=function(){var t=u.useCallback((function(t){var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",y,!0),e.addEventListener("mousedown",x,!0),e.addEventListener("pointerdown",x,!0),e.addEventListener("touchstart",x,!0),e.addEventListener("visibilitychange",b,!0))}),[]),e=u.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!w(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(g=!0,window.clearTimeout(r),r=window.setTimeout((function(){g=!1}),100),e.current=!1,!0)},ref:t}},S=n(3433);function T(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var A=n(7326),E=n(4578),_=n(5545);function L(t,e){var n=Object.create(null);return t&&u.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,u.isValidElement)(t)?e(t):t}(t)})),n}function I(t,e,n){return null!=n[e]?n[e]:t.props[e]}function C(t,e,n){var r=L(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),a=[];for(var o in t)o in e?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in e){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(e,r);return Object.keys(i).forEach((function(a){var o=i[a];if((0,u.isValidElement)(o)){var s=a in e,c=a in r,l=e[a],h=(0,u.isValidElement)(l)&&!l.props.in;!c||s&&!h?c||!s||h?c&&s&&(0,u.isValidElement)(l)&&(i[a]=(0,u.cloneElement)(o,{onExited:n.bind(null,o),in:l.props.in,exit:I(o,"exit",t),enter:I(o,"enter",t)})):i[a]=(0,u.cloneElement)(o,{in:!1}):i[a]=(0,u.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:I(o,"exit",t),enter:I(o,"enter",t)})}})),i}var O=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},R=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind((0,A.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,E.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,a=e.handleExited;return{children:e.firstRender?(n=t,r=a,L(n.children,(function(t){return(0,u.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:I(t,"appear",n),enter:I(t,"enter",n),exit:I(t,"exit",n)})}))):C(t,i,a),firstRender:!1}},n.handleExited=function(t,e){var n=L(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,o.Z)({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=(0,s.Z)(t,["component","childFactory"]),i=this.state.contextValue,a=O(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?u.createElement(_.Z.Provider,{value:i},a):u.createElement(_.Z.Provider,{value:i},u.createElement(e,r,a))},e}(u.Component);R.propTypes={},R.defaultProps={component:"div",childFactory:function(t){return t}};var D=R,M=n(2554),F=n(184);var z=function(t){var e=t.className,n=t.classes,r=t.pulsate,a=void 0!==r&&r,o=t.rippleX,s=t.rippleY,l=t.rippleSize,h=t.in,p=t.onExited,d=t.timeout,f=u.useState(!1),m=(0,i.Z)(f,2),g=m[0],v=m[1],y=(0,c.Z)(e,n.ripple,n.rippleVisible,a&&n.ripplePulsate),x={width:l,height:l,top:-l/2+s,left:-l/2+o},b=(0,c.Z)(n.child,g&&n.childLeaving,a&&n.childPulsate);return h||g||v(!0),u.useEffect((function(){if(!h&&null!=p){var t=setTimeout(p,d);return function(){clearTimeout(t)}}}),[p,h,d]),(0,F.jsx)("span",{className:y,style:x,children:(0,F.jsx)("span",{className:b})})},P=n(5878);var N,V,K,Z,j,G,B,U,W=(0,P.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),H=["center","classes","className"],X=(0,M.F4)(j||(j=N||(N=T(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),q=(0,M.F4)(G||(G=V||(V=T(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Y=(0,M.F4)(B||(B=K||(K=T(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),J=(0,h.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),$=(0,h.ZP)(z,{name:"MuiTouchRipple",slot:"Ripple"})(U||(U=Z||(Z=T(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),W.rippleVisible,X,550,(function(t){return t.theme.transitions.easing.easeInOut}),W.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),W.child,W.childLeaving,q,550,(function(t){return t.theme.transitions.easing.easeInOut}),W.childPulsate,Y,(function(t){return t.theme.transitions.easing.easeInOut})),Q=u.forwardRef((function(t,e){var n=(0,p.Z)({props:t,name:"MuiTouchRipple"}),r=n.center,a=void 0!==r&&r,l=n.classes,h=void 0===l?{}:l,d=n.className,f=(0,s.Z)(n,H),m=u.useState([]),g=(0,i.Z)(m,2),v=g[0],y=g[1],x=u.useRef(0),b=u.useRef(null);u.useEffect((function(){b.current&&(b.current(),b.current=null)}),[v]);var w=u.useRef(!1),k=u.useRef(null),T=u.useRef(null),A=u.useRef(null);u.useEffect((function(){return function(){clearTimeout(k.current)}}),[]);var E=u.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,a=t.cb;y((function(t){return[].concat((0,S.Z)(t),[(0,F.jsx)($,{classes:{ripple:(0,c.Z)(h.ripple,W.ripple),rippleVisible:(0,c.Z)(h.rippleVisible,W.rippleVisible),ripplePulsate:(0,c.Z)(h.ripplePulsate,W.ripplePulsate),child:(0,c.Z)(h.child,W.child),childLeaving:(0,c.Z)(h.childLeaving,W.childLeaving),childPulsate:(0,c.Z)(h.childPulsate,W.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},x.current)])})),x.current+=1,b.current=a}),[h]),_=u.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,u=e.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==t?void 0:t.type)&&w.current)w.current=!1;else{"touchstart"===(null==t?void 0:t.type)&&(w.current=!0);var l,h,p,d=c?null:A.current,f=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)l=Math.round(f.width/2),h=Math.round(f.height/2);else{var m=t.touches&&t.touches.length>0?t.touches[0]:t,g=m.clientX,v=m.clientY;l=Math.round(g-f.left),h=Math.round(v-f.top)}if(s)(p=Math.sqrt((2*Math.pow(f.width,2)+Math.pow(f.height,2))/3))%2===0&&(p+=1);else{var y=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,x=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;p=Math.sqrt(Math.pow(y,2)+Math.pow(x,2))}null!=t&&t.touches?null===T.current&&(T.current=function(){E({pulsate:i,rippleX:l,rippleY:h,rippleSize:p,cb:n})},k.current=setTimeout((function(){T.current&&(T.current(),T.current=null)}),80)):E({pulsate:i,rippleX:l,rippleY:h,rippleSize:p,cb:n})}}),[a,E]),L=u.useCallback((function(){_({},{pulsate:!0})}),[_]),I=u.useCallback((function(t,e){if(clearTimeout(k.current),"touchend"===(null==t?void 0:t.type)&&T.current)return T.current(),T.current=null,void(k.current=setTimeout((function(){I(t,e)})));T.current=null,y((function(t){return t.length>0?t.slice(1):t})),b.current=e}),[]);return u.useImperativeHandle(e,(function(){return{pulsate:L,start:_,stop:I}}),[L,_,I]),(0,F.jsx)(J,(0,o.Z)({className:(0,c.Z)(W.root,h.root,d),ref:A},f,{children:(0,F.jsx)(D,{component:null,exit:!0,children:v})}))})),tt=Q,et=n(1217);function nt(t){return(0,et.Z)("MuiButtonBase",t)}var rt,it=(0,P.Z)("MuiButtonBase",["root","disabled","focusVisible"]),at=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],ot=(0,h.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((rt={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,a.Z)(rt,"&.".concat(it.disabled),{pointerEvents:"none",cursor:"default"}),(0,a.Z)(rt,"@media print",{colorAdjust:"exact"}),rt)),st=u.forwardRef((function(t,e){var n=(0,p.Z)({props:t,name:"MuiButtonBase"}),r=n.action,a=n.centerRipple,h=void 0!==a&&a,m=n.children,g=n.className,v=n.component,y=void 0===v?"button":v,x=n.disabled,b=void 0!==x&&x,w=n.disableRipple,S=void 0!==w&&w,T=n.disableTouchRipple,A=void 0!==T&&T,E=n.focusRipple,_=void 0!==E&&E,L=n.LinkComponent,I=void 0===L?"a":L,C=n.onBlur,O=n.onClick,R=n.onContextMenu,D=n.onDragLeave,M=n.onFocus,z=n.onFocusVisible,P=n.onKeyDown,N=n.onKeyUp,V=n.onMouseDown,K=n.onMouseLeave,Z=n.onMouseUp,j=n.onTouchEnd,G=n.onTouchMove,B=n.onTouchStart,U=n.tabIndex,W=void 0===U?0:U,H=n.TouchRippleProps,X=n.touchRippleRef,q=n.type,Y=(0,s.Z)(n,at),J=u.useRef(null),$=u.useRef(null),Q=(0,d.Z)($,X),et=k(),rt=et.isFocusVisibleRef,it=et.onFocus,st=et.onBlur,ut=et.ref,ct=u.useState(!1),lt=(0,i.Z)(ct,2),ht=lt[0],pt=lt[1];b&&ht&&pt(!1),u.useImperativeHandle(r,(function(){return{focusVisible:function(){pt(!0),J.current.focus()}}}),[]);var dt=u.useState(!1),ft=(0,i.Z)(dt,2),mt=ft[0],gt=ft[1];u.useEffect((function(){gt(!0)}),[]);var vt=mt&&!S&&!b;function yt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;return f((function(r){return e&&e(r),!n&&$.current&&$.current[t](r),!0}))}u.useEffect((function(){ht&&_&&!S&&mt&&$.current.pulsate()}),[S,_,ht,mt]);var xt=yt("start",V),bt=yt("stop",R),wt=yt("stop",D),kt=yt("stop",Z),St=yt("stop",(function(t){ht&&t.preventDefault(),K&&K(t)})),Tt=yt("start",B),At=yt("stop",j),Et=yt("stop",G),_t=yt("stop",(function(t){st(t),!1===rt.current&&pt(!1),C&&C(t)}),!1),Lt=f((function(t){J.current||(J.current=t.currentTarget),it(t),!0===rt.current&&(pt(!0),z&&z(t)),M&&M(t)})),It=function(){var t=J.current;return y&&"button"!==y&&!("A"===t.tagName&&t.href)},Ct=u.useRef(!1),Ot=f((function(t){_&&!Ct.current&&ht&&$.current&&" "===t.key&&(Ct.current=!0,$.current.stop(t,(function(){$.current.start(t)}))),t.target===t.currentTarget&&It()&&" "===t.key&&t.preventDefault(),P&&P(t),t.target===t.currentTarget&&It()&&"Enter"===t.key&&!b&&(t.preventDefault(),O&&O(t))})),Rt=f((function(t){_&&" "===t.key&&$.current&&ht&&!t.defaultPrevented&&(Ct.current=!1,$.current.stop(t,(function(){$.current.pulsate(t)}))),N&&N(t),O&&t.target===t.currentTarget&&It()&&" "===t.key&&!t.defaultPrevented&&O(t)})),Dt=y;"button"===Dt&&(Y.href||Y.to)&&(Dt=I);var Mt={};"button"===Dt?(Mt.type=void 0===q?"button":q,Mt.disabled=b):(Y.href||Y.to||(Mt.role="button"),b&&(Mt["aria-disabled"]=b));var Ft=(0,d.Z)(e,ut,J);var zt=(0,o.Z)({},n,{centerRipple:h,component:y,disabled:b,disableRipple:S,disableTouchRipple:A,focusRipple:_,tabIndex:W,focusVisible:ht}),Pt=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=t.classes,a={root:["root",e&&"disabled",n&&"focusVisible"]},o=(0,l.Z)(a,nt,i);return n&&r&&(o.root+=" ".concat(r)),o}(zt);return(0,F.jsxs)(ot,(0,o.Z)({as:Dt,className:(0,c.Z)(Pt.root,g),ownerState:zt,onBlur:_t,onClick:O,onContextMenu:bt,onFocus:Lt,onKeyDown:Ot,onKeyUp:Rt,onMouseDown:xt,onMouseLeave:St,onMouseUp:kt,onDragLeave:wt,onTouchEnd:At,onTouchMove:Et,onTouchStart:Tt,ref:Ft,tabIndex:b?-1:W,type:q},Mt,Y,{children:[m,vt?(0,F.jsx)(tt,(0,o.Z)({ref:Q,center:h},H)):null]}))})),ut=st},6151:function(t,e,n){"use strict";n.d(e,{Z:function(){return E}});var r=n(4942),i=n(3366),a=n(7462),o=n(2791),s=n(8182),u=n(5735),c=n(4419),l=n(2065),h=n(7630),p=n(1046),d=n(637),f=n(4036),m=n(5878),g=n(1217);function v(t){return(0,g.Z)("MuiButton",t)}var y=(0,m.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var x=o.createContext({}),b=n(184),w=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],k=function(t){return(0,a.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},S=(0,h.ZP)(d.Z,{shouldForwardProp:function(t){return(0,h.FO)(t)||"classes"===t},name:"MuiButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,f.Z)(n.color))],e["size".concat((0,f.Z)(n.size))],e["".concat(n.variant,"Size").concat((0,f.Z)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((function(t){var e,n,i,o=t.theme,s=t.ownerState,u="light"===o.palette.mode?o.palette.grey[300]:o.palette.grey[800],c="light"===o.palette.mode?o.palette.grey.A100:o.palette.grey[700];return(0,a.Z)({},o.typography.button,(e={minWidth:64,padding:"6px 16px",borderRadius:(o.vars||o).shape.borderRadius,transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),"&:hover":(0,a.Z)({textDecoration:"none",backgroundColor:o.vars?"rgba(".concat(o.vars.palette.text.primaryChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(o.palette.text.primary,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===s.variant&&"inherit"!==s.color&&{backgroundColor:o.vars?"rgba(".concat(o.vars.palette[s.color].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(o.palette[s.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===s.variant&&"inherit"!==s.color&&{border:"1px solid ".concat((o.vars||o).palette[s.color].main),backgroundColor:o.vars?"rgba(".concat(o.vars.palette[s.color].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(o.palette[s.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===s.variant&&{backgroundColor:o.vars?o.vars.palette.Button.inheritContainedHoverBg:c,boxShadow:(o.vars||o).shadows[4],"@media (hover: none)":{boxShadow:(o.vars||o).shadows[2],backgroundColor:(o.vars||o).palette.grey[300]}},"contained"===s.variant&&"inherit"!==s.color&&{backgroundColor:(o.vars||o).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(o.vars||o).palette[s.color].main}}),"&:active":(0,a.Z)({},"contained"===s.variant&&{boxShadow:(o.vars||o).shadows[8]})},(0,r.Z)(e,"&.".concat(y.focusVisible),(0,a.Z)({},"contained"===s.variant&&{boxShadow:(o.vars||o).shadows[6]})),(0,r.Z)(e,"&.".concat(y.disabled),(0,a.Z)({color:(o.vars||o).palette.action.disabled},"outlined"===s.variant&&{border:"1px solid ".concat((o.vars||o).palette.action.disabledBackground)},"contained"===s.variant&&{color:(o.vars||o).palette.action.disabled,boxShadow:(o.vars||o).shadows[0],backgroundColor:(o.vars||o).palette.action.disabledBackground})),e),"text"===s.variant&&{padding:"6px 8px"},"text"===s.variant&&"inherit"!==s.color&&{color:(o.vars||o).palette[s.color].main},"outlined"===s.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===s.variant&&"inherit"!==s.color&&{color:(o.vars||o).palette[s.color].main,border:o.vars?"1px solid rgba(".concat(o.vars.palette[s.color].mainChannel," / 0.5)"):"1px solid ".concat((0,l.Fq)(o.palette[s.color].main,.5))},"contained"===s.variant&&{color:o.vars?o.vars.palette.text.primary:null==(n=(i=o.palette).getContrastText)?void 0:n.call(i,o.palette.grey[300]),backgroundColor:o.vars?o.vars.palette.Button.inheritContainedBg:u,boxShadow:(o.vars||o).shadows[2]},"contained"===s.variant&&"inherit"!==s.color&&{color:(o.vars||o).palette[s.color].contrastText,backgroundColor:(o.vars||o).palette[s.color].main},"inherit"===s.color&&{color:"inherit",borderColor:"currentColor"},"small"===s.size&&"text"===s.variant&&{padding:"4px 5px",fontSize:o.typography.pxToRem(13)},"large"===s.size&&"text"===s.variant&&{padding:"8px 11px",fontSize:o.typography.pxToRem(15)},"small"===s.size&&"outlined"===s.variant&&{padding:"3px 9px",fontSize:o.typography.pxToRem(13)},"large"===s.size&&"outlined"===s.variant&&{padding:"7px 21px",fontSize:o.typography.pxToRem(15)},"small"===s.size&&"contained"===s.variant&&{padding:"4px 10px",fontSize:o.typography.pxToRem(13)},"large"===s.size&&"contained"===s.variant&&{padding:"8px 22px",fontSize:o.typography.pxToRem(15)},s.fullWidth&&{width:"100%"})}),(function(t){var e;return t.ownerState.disableElevation&&(e={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,r.Z)(e,"&.".concat(y.focusVisible),{boxShadow:"none"}),(0,r.Z)(e,"&:active",{boxShadow:"none"}),(0,r.Z)(e,"&.".concat(y.disabled),{boxShadow:"none"}),e)})),T=(0,h.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.startIcon,e["iconSize".concat((0,f.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,a.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},k(e))})),A=(0,h.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.endIcon,e["iconSize".concat((0,f.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,a.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},k(e))})),E=o.forwardRef((function(t,e){var n=o.useContext(x),r=(0,u.Z)(n,t),l=(0,p.Z)({props:r,name:"MuiButton"}),h=l.children,d=l.color,m=void 0===d?"primary":d,g=l.component,y=void 0===g?"button":g,k=l.className,E=l.disabled,_=void 0!==E&&E,L=l.disableElevation,I=void 0!==L&&L,C=l.disableFocusRipple,O=void 0!==C&&C,R=l.endIcon,D=l.focusVisibleClassName,M=l.fullWidth,F=void 0!==M&&M,z=l.size,P=void 0===z?"medium":z,N=l.startIcon,V=l.type,K=l.variant,Z=void 0===K?"text":K,j=(0,i.Z)(l,w),G=(0,a.Z)({},l,{color:m,component:y,disabled:_,disableElevation:I,disableFocusRipple:O,fullWidth:F,size:P,type:V,variant:Z}),B=function(t){var e=t.color,n=t.disableElevation,r=t.fullWidth,i=t.size,o=t.variant,s=t.classes,u={root:["root",o,"".concat(o).concat((0,f.Z)(e)),"size".concat((0,f.Z)(i)),"".concat(o,"Size").concat((0,f.Z)(i)),"inherit"===e&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,f.Z)(i))],endIcon:["endIcon","iconSize".concat((0,f.Z)(i))]},l=(0,c.Z)(u,v,s);return(0,a.Z)({},s,l)}(G),U=N&&(0,b.jsx)(T,{className:B.startIcon,ownerState:G,children:N}),W=R&&(0,b.jsx)(A,{className:B.endIcon,ownerState:G,children:R});return(0,b.jsxs)(S,(0,a.Z)({ownerState:G,className:(0,s.Z)(n.className,B.root,k),component:y,disabled:_,focusRipple:!O,focusVisibleClassName:(0,s.Z)(B.focusVisible,D),ref:e,type:V},j,{classes:B,children:[U,h,W]}))}))},1889:function(t,e,n){"use strict";n.d(e,{ZP:function(){return L}});var r=n(3433),i=n(4942),a=n(3366),o=n(7462),s=n(2791),u=n(8182),c=n(1184),l=n(8519),h=n(4419),p=n(7630),d=n(1046),f=n(3967);var m=s.createContext(),g=n(5878),v=n(1217);function y(t){return(0,v.Z)("MuiGrid",t)}var x=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],b=(0,g.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,r.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(t){return"spacing-xs-".concat(t)}))),(0,r.Z)(["column-reverse","column","row-reverse","row"].map((function(t){return"direction-xs-".concat(t)}))),(0,r.Z)(["nowrap","wrap-reverse","wrap"].map((function(t){return"wrap-xs-".concat(t)}))),(0,r.Z)(x.map((function(t){return"grid-xs-".concat(t)}))),(0,r.Z)(x.map((function(t){return"grid-sm-".concat(t)}))),(0,r.Z)(x.map((function(t){return"grid-md-".concat(t)}))),(0,r.Z)(x.map((function(t){return"grid-lg-".concat(t)}))),(0,r.Z)(x.map((function(t){return"grid-xl-".concat(t)}))))),w=n(184),k=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function S(t){var e=parseFloat(t);return"".concat(e).concat(String(t).replace(String(e),"")||"px")}function T(t){var e=t.breakpoints,n=t.values,r="";Object.keys(n).forEach((function(t){""===r&&0!==n[t]&&(r=t)}));var i=Object.keys(e).sort((function(t,n){return e[t]-e[n]}));return i.slice(0,i.indexOf(r))}var A=(0,p.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,i=n.container,a=n.direction,o=n.item,s=n.spacing,u=n.wrap,c=n.zeroMinWidth,l=n.breakpoints,h=[];i&&(h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return[n["spacing-xs-".concat(String(t))]];var r=[];return e.forEach((function(e){var i=t[e];Number(i)>0&&r.push(n["spacing-".concat(e,"-").concat(String(i))])})),r}(s,l,e));var p=[];return l.forEach((function(t){var r=n[t];r&&p.push(e["grid-".concat(t,"-").concat(String(r))])})),[e.root,i&&e.container,o&&e.item,c&&e.zeroMinWidth].concat((0,r.Z)(h),["row"!==a&&e["direction-xs-".concat(String(a))],"wrap"!==u&&e["wrap-xs-".concat(String(u))]],p)}})((function(t){var e=t.ownerState;return(0,o.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})}),(function(t){var e=t.theme,n=t.ownerState,r=(0,c.P$)({values:n.direction,breakpoints:e.breakpoints.values});return(0,c.k9)({theme:e},r,(function(t){var e={flexDirection:t};return 0===t.indexOf("column")&&(e["& > .".concat(b.item)]={maxWidth:"none"}),e}))}),(function(t){var e=t.theme,n=t.ownerState,r=n.container,a=n.rowSpacing,o={};if(r&&0!==a){var s,u=(0,c.P$)({values:a,breakpoints:e.breakpoints.values});"object"===typeof u&&(s=T({breakpoints:e.breakpoints.values,values:u})),o=(0,c.k9)({theme:e},u,(function(t,n){var r,a=e.spacing(t);return"0px"!==a?(0,i.Z)({marginTop:"-".concat(S(a))},"& > .".concat(b.item),{paddingTop:S(a)}):null!=(r=s)&&r.includes(n)?{}:(0,i.Z)({marginTop:0},"& > .".concat(b.item),{paddingTop:0})}))}return o}),(function(t){var e=t.theme,n=t.ownerState,r=n.container,a=n.columnSpacing,o={};if(r&&0!==a){var s,u=(0,c.P$)({values:a,breakpoints:e.breakpoints.values});"object"===typeof u&&(s=T({breakpoints:e.breakpoints.values,values:u})),o=(0,c.k9)({theme:e},u,(function(t,n){var r,a=e.spacing(t);return"0px"!==a?(0,i.Z)({width:"calc(100% + ".concat(S(a),")"),marginLeft:"-".concat(S(a))},"& > .".concat(b.item),{paddingLeft:S(a)}):null!=(r=s)&&r.includes(n)?{}:(0,i.Z)({width:"100%",marginLeft:0},"& > .".concat(b.item),{paddingLeft:0})}))}return o}),(function(t){var e,n=t.theme,r=t.ownerState;return n.breakpoints.keys.reduce((function(t,i){var a={};if(r[i]&&(e=r[i]),!e)return t;if(!0===e)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===e)a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var s=(0,c.P$)({values:r.columns,breakpoints:n.breakpoints.values}),u="object"===typeof s?s[i]:s;if(void 0===u||null===u)return t;var l="".concat(Math.round(e/u*1e8)/1e6,"%"),h={};if(r.container&&r.item&&0!==r.columnSpacing){var p=n.spacing(r.columnSpacing);if("0px"!==p){var d="calc(".concat(l," + ").concat(S(p),")");h={flexBasis:d,maxWidth:d}}}a=(0,o.Z)({flexBasis:l,flexGrow:0,maxWidth:l},h)}return 0===n.breakpoints.values[i]?Object.assign(t,a):t[n.breakpoints.up(i)]=a,t}),{})}));var E=function(t){var e=t.classes,n=t.container,i=t.direction,a=t.item,o=t.spacing,s=t.wrap,u=t.zeroMinWidth,c=t.breakpoints,l=[];n&&(l=function(t,e){if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return["spacing-xs-".concat(String(t))];var n=[];return e.forEach((function(e){var r=t[e];if(Number(r)>0){var i="spacing-".concat(e,"-").concat(String(r));n.push(i)}})),n}(o,c));var p=[];c.forEach((function(e){var n=t[e];n&&p.push("grid-".concat(e,"-").concat(String(n)))}));var d={root:["root",n&&"container",a&&"item",u&&"zeroMinWidth"].concat((0,r.Z)(l),["row"!==i&&"direction-xs-".concat(String(i)),"wrap"!==s&&"wrap-xs-".concat(String(s))],p)};return(0,h.Z)(d,y,e)},_=s.forwardRef((function(t,e){var n=(0,d.Z)({props:t,name:"MuiGrid"}),r=(0,f.Z)().breakpoints,i=(0,l.Z)(n),c=i.className,h=i.columns,p=i.columnSpacing,g=i.component,v=void 0===g?"div":g,y=i.container,x=void 0!==y&&y,b=i.direction,S=void 0===b?"row":b,T=i.item,_=void 0!==T&&T,L=i.rowSpacing,I=i.spacing,C=void 0===I?0:I,O=i.wrap,R=void 0===O?"wrap":O,D=i.zeroMinWidth,M=void 0!==D&&D,F=(0,a.Z)(i,k),z=L||C,P=p||C,N=s.useContext(m),V=x?h||12:N,K={},Z=(0,o.Z)({},F);r.keys.forEach((function(t){null!=F[t]&&(K[t]=F[t],delete Z[t])}));var j=(0,o.Z)({},i,{columns:V,container:x,direction:S,item:_,rowSpacing:z,columnSpacing:P,wrap:R,zeroMinWidth:M,spacing:C},K,{breakpoints:r.keys}),G=E(j);return(0,w.jsx)(m.Provider,{value:V,children:(0,w.jsx)(A,(0,o.Z)({ownerState:j,className:(0,u.Z)(G.root,c),as:v,ref:e},Z))})})),L=_},3400:function(t,e,n){"use strict";n.d(e,{Z:function(){return w}});var r=n(4942),i=n(3366),a=n(7462),o=n(2791),s=n(8182),u=n(4419),c=n(2065),l=n(7630),h=n(1046),p=n(637),d=n(4036),f=n(5878),m=n(1217);function g(t){return(0,m.Z)("MuiIconButton",t)}var v=(0,f.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),y=n(184),x=["edge","children","className","color","disabled","disableFocusRipple","size"],b=(0,l.ZP)(p.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"default"!==n.color&&e["color".concat((0,d.Z)(n.color))],n.edge&&e["edge".concat((0,d.Z)(n.edge))],e["size".concat((0,d.Z)(n.size))]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,c.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(t){var e,n=t.theme,i=t.ownerState,o=null==(e=(n.vars||n).palette)?void 0:e[i.color];return(0,a.Z)({},"inherit"===i.color&&{color:"inherit"},"inherit"!==i.color&&"default"!==i.color&&(0,a.Z)({color:null==o?void 0:o.main},!i.disableRipple&&{"&:hover":(0,a.Z)({},o&&{backgroundColor:n.vars?"rgba(".concat(o.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,c.Fq)(o.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===i.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===i.size&&{padding:12,fontSize:n.typography.pxToRem(28)},(0,r.Z)({},"&.".concat(v.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),w=o.forwardRef((function(t,e){var n=(0,h.Z)({props:t,name:"MuiIconButton"}),r=n.edge,o=void 0!==r&&r,c=n.children,l=n.className,p=n.color,f=void 0===p?"default":p,m=n.disabled,v=void 0!==m&&m,w=n.disableFocusRipple,k=void 0!==w&&w,S=n.size,T=void 0===S?"medium":S,A=(0,i.Z)(n,x),E=(0,a.Z)({},n,{edge:o,color:f,disabled:v,disableFocusRipple:k,size:T}),_=function(t){var e=t.classes,n=t.disabled,r=t.color,i=t.edge,a=t.size,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,d.Z)(r)),i&&"edge".concat((0,d.Z)(i)),"size".concat((0,d.Z)(a))]};return(0,u.Z)(o,g,e)}(E);return(0,y.jsx)(b,(0,a.Z)({className:(0,s.Z)(_.root,l),centerRipple:!0,focusRipple:!k,disabled:v,ref:e,ownerState:E},A,{children:c}))}))},7509:function(t,e,n){"use strict";n.d(e,{Z:function(){return _r}});var r=n(7462),i=n(3366),a=n(2791),o=n.t(a,2),s=n(8182),u=n(4419),c=n(9439),l=0;var h=o["useId".toString()];function p(t){if(void 0!==h){var e=h();return null!=t?t:e}return function(t){var e=a.useState(t),n=(0,c.Z)(e,2),r=n[0],i=n[1],o=t||r;return a.useEffect((function(){null==r&&i("mui-".concat(l+=1))}),[r]),o}(t)}var d=n(7630),f=n(1046),m=n(4942),g=n(3433),v=n(2466),y=n(6189),x=n(4164),b=n(7563);function w(t){return t&&t.ownerDocument||document}function k(t){return w(t).defaultView||window}function S(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(e),e=setTimeout((function(){t.apply(r,a)}),n)}return r.clear=function(){clearTimeout(e)},r}var T=n(5721),A=n(184),E=["onChange","maxRows","minRows","style","value"];function _(t){return parseInt(t,10)||0}var L={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function I(t){return void 0===t||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflow}var C=a.forwardRef((function(t,e){var n=t.onChange,o=t.maxRows,s=t.minRows,u=void 0===s?1:s,l=t.style,h=t.value,p=(0,i.Z)(t,E),d=a.useRef(null!=h).current,f=a.useRef(null),m=(0,b.Z)(e,f),g=a.useRef(null),v=a.useRef(0),y=a.useState({outerHeightStyle:0}),w=(0,c.Z)(y,2),C=w[0],O=w[1],R=a.useCallback((function(){var e=f.current,n=k(e).getComputedStyle(e);if("0px"===n.width)return{outerHeightStyle:0};var r=g.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n.boxSizing,a=_(n.paddingBottom)+_(n.paddingTop),s=_(n.borderBottomWidth)+_(n.borderTopWidth),c=r.scrollHeight;r.value="x";var l=r.scrollHeight,h=c;return u&&(h=Math.max(Number(u)*l,h)),o&&(h=Math.min(Number(o)*l,h)),{outerHeightStyle:(h=Math.max(h,l))+("border-box"===i?a+s:0),overflow:Math.abs(h-c)<=1}}),[o,u,t.placeholder]),D=function(t,e){var n=e.outerHeightStyle,r=e.overflow;return v.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==r)?(v.current+=1,{overflow:r,outerHeightStyle:n}):t},M=a.useCallback((function(){var t=R();I(t)||O((function(e){return D(e,t)}))}),[R]);a.useEffect((function(){var t,e=S((function(){v.current=0,f.current&&function(){var t=R();I(t)||x.flushSync((function(){O((function(e){return D(e,t)}))}))}()})),n=f.current,r=k(n);return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e)).observe(n),function(){e.clear(),r.removeEventListener("resize",e),t&&t.disconnect()}})),(0,T.Z)((function(){M()})),a.useEffect((function(){v.current=0}),[h]);return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)("textarea",(0,r.Z)({value:h,onChange:function(t){v.current=0,d||M(),n&&n(t)},ref:m,rows:u,style:(0,r.Z)({height:C.outerHeightStyle,overflow:C.overflow?"hidden":void 0},l)},p)),(0,A.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:g,tabIndex:-1,style:(0,r.Z)({},L,l,{padding:0})})]})}));function O(t){return"string"===typeof t}function R(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t}),{})}var D=a.createContext(void 0);function M(){return a.useContext(D)}var F=n(4036),z=n(2071),P=T.Z,N=n(2554);function V(t){var e=t.styles,n=t.defaultTheme,r=void 0===n?{}:n,i="function"===typeof e?function(t){return e(void 0===(n=t)||null===n||0===Object.keys(n).length?r:t);var n}:e;return(0,A.jsx)(N.xB,{styles:i})}var K=n(3459);var Z=function(t){var e=t.styles,n=t.themeId,r=t.defaultTheme,i=void 0===r?{}:r,a=(0,K.Z)(i),o="function"===typeof e?e(n&&a[n]||a):e;return(0,A.jsx)(V,{styles:o})},j=n(6482),G=n(988);var B=function(t){return(0,A.jsx)(Z,(0,r.Z)({},t,{defaultTheme:j.Z,themeId:G.Z}))};function U(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function W(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(U(t.value)&&""!==t.value||e&&U(t.defaultValue)&&""!==t.defaultValue)}var H=n(5878),X=n(1217);function q(t){return(0,X.Z)("MuiInputBase",t)}var Y=(0,H.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),J=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],$=function(t,e){var n=t.ownerState;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,F.Z)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Q=function(t,e){var n=t.ownerState;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},tt=(0,d.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$})((function(t){var e=t.theme,n=t.ownerState;return(0,r.Z)({},e.typography.body1,(0,m.Z)({color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Y.disabled),{color:(e.vars||e).palette.text.disabled,cursor:"default"}),n.multiline&&(0,r.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),et=(0,d.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Q})((function(t){var e,n=t.theme,i=t.ownerState,a="light"===n.palette.mode,o=(0,r.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},u=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5};return(0,r.Z)((e={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,m.Z)(e,"label[data-shrink=false] + .".concat(Y.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u}),(0,m.Z)(e,"&.".concat(Y.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,m.Z)(e,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),e),"small"===i.size&&{paddingTop:1},i.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===i.type&&{MozAppearance:"textfield"})})),nt=(0,A.jsx)(B,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),rt=a.forwardRef((function(t,e){var n,o=(0,f.Z)({props:t,name:"MuiInputBase"}),l=o["aria-describedby"],h=o.autoComplete,p=o.autoFocus,d=o.className,m=o.components,g=void 0===m?{}:m,v=o.componentsProps,x=void 0===v?{}:v,b=o.defaultValue,w=o.disabled,k=o.disableInjectingGlobalStyles,S=o.endAdornment,T=o.fullWidth,E=void 0!==T&&T,_=o.id,L=o.inputComponent,I=void 0===L?"input":L,N=o.inputProps,V=void 0===N?{}:N,K=o.inputRef,Z=o.maxRows,j=o.minRows,G=o.multiline,B=void 0!==G&&G,U=o.name,H=o.onBlur,X=o.onChange,Y=o.onClick,$=o.onFocus,Q=o.onKeyDown,rt=o.onKeyUp,it=o.placeholder,at=o.readOnly,ot=o.renderSuffix,st=o.rows,ut=o.slotProps,ct=void 0===ut?{}:ut,lt=o.slots,ht=void 0===lt?{}:lt,pt=o.startAdornment,dt=o.type,ft=void 0===dt?"text":dt,mt=o.value,gt=(0,i.Z)(o,J),vt=null!=V.value?V.value:mt,yt=a.useRef(null!=vt).current,xt=a.useRef(),bt=a.useCallback((function(t){0}),[]),wt=(0,z.Z)(xt,K,V.ref,bt),kt=a.useState(!1),St=(0,c.Z)(kt,2),Tt=St[0],At=St[1],Et=M();var _t=R({props:o,muiFormControl:Et,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_t.focused=Et?Et.focused:Tt,a.useEffect((function(){!Et&&w&&Tt&&(At(!1),H&&H())}),[Et,w,Tt,H]);var Lt=Et&&Et.onFilled,It=Et&&Et.onEmpty,Ct=a.useCallback((function(t){W(t)?Lt&&Lt():It&&It()}),[Lt,It]);P((function(){yt&&Ct({value:vt})}),[vt,Ct,yt]);a.useEffect((function(){Ct(xt.current)}),[]);var Ot=I,Rt=V;B&&"input"===Ot&&(Rt=st?(0,r.Z)({type:void 0,minRows:st,maxRows:st},Rt):(0,r.Z)({type:void 0,maxRows:Z,minRows:j},Rt),Ot=C);a.useEffect((function(){Et&&Et.setAdornedStart(Boolean(pt))}),[Et,pt]);var Dt=(0,r.Z)({},o,{color:_t.color||"primary",disabled:_t.disabled,endAdornment:S,error:_t.error,focused:_t.focused,formControl:Et,fullWidth:E,hiddenLabel:_t.hiddenLabel,multiline:B,size:_t.size,startAdornment:pt,type:ft}),Mt=function(t){var e=t.classes,n=t.color,r=t.disabled,i=t.error,a=t.endAdornment,o=t.focused,s=t.formControl,c=t.fullWidth,l=t.hiddenLabel,h=t.multiline,p=t.readOnly,d=t.size,f=t.startAdornment,m=t.type,g={root:["root","color".concat((0,F.Z)(n)),r&&"disabled",i&&"error",c&&"fullWidth",o&&"focused",s&&"formControl","small"===d&&"sizeSmall",h&&"multiline",f&&"adornedStart",a&&"adornedEnd",l&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled","search"===m&&"inputTypeSearch",h&&"inputMultiline","small"===d&&"inputSizeSmall",l&&"inputHiddenLabel",f&&"inputAdornedStart",a&&"inputAdornedEnd",p&&"readOnly"]};return(0,u.Z)(g,q,e)}(Dt),Ft=ht.root||g.Root||tt,zt=ct.root||x.root||{},Pt=ht.input||g.Input||et;return Rt=(0,r.Z)({},Rt,null!=(n=ct.input)?n:x.input),(0,A.jsxs)(a.Fragment,{children:[!k&&nt,(0,A.jsxs)(Ft,(0,r.Z)({},zt,!O(Ft)&&{ownerState:(0,r.Z)({},Dt,zt.ownerState)},{ref:e,onClick:function(t){xt.current&&t.currentTarget===t.target&&xt.current.focus(),Y&&!_t.disabled&&Y(t)}},gt,{className:(0,s.Z)(Mt.root,zt.className,d,at&&"MuiInputBase-readOnly"),children:[pt,(0,A.jsx)(D.Provider,{value:null,children:(0,A.jsx)(Pt,(0,r.Z)({ownerState:Dt,"aria-invalid":_t.error,"aria-describedby":l,autoComplete:h,autoFocus:p,defaultValue:b,disabled:_t.disabled,id:_,onAnimationStart:function(t){Ct("mui-auto-fill-cancel"===t.animationName?xt.current:{value:"x"})},name:U,placeholder:it,readOnly:at,required:_t.required,rows:st,value:vt,onKeyDown:Q,onKeyUp:rt,type:ft},Rt,!O(Pt)&&{as:Ot,ownerState:(0,r.Z)({},Dt,Rt.ownerState)},{ref:wt,className:(0,s.Z)(Mt.input,Rt.className,at&&"MuiInputBase-readOnly"),onBlur:function(t){H&&H(t),V.onBlur&&V.onBlur(t),Et&&Et.onBlur?Et.onBlur(t):At(!1)},onChange:function(t){if(!yt){var e=t.target||xt.current;if(null==e)throw new Error((0,y.Z)(1));Ct({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];V.onChange&&V.onChange.apply(V,[t].concat(r)),X&&X.apply(void 0,[t].concat(r))},onFocus:function(t){_t.disabled?t.stopPropagation():($&&$(t),V.onFocus&&V.onFocus(t),Et&&Et.onFocus?Et.onFocus(t):At(!0))}}))}),S,ot?ot((0,r.Z)({},_t,{startAdornment:pt})):null]}))]})})),it=rt;function at(t){return(0,X.Z)("MuiInput",t)}var ot=(0,r.Z)({},Y,(0,H.Z)("MuiInput",["root","underline","input"])),st=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],ut=(0,d.ZP)(tt,{shouldForwardProp:function(t){return(0,d.FO)(t)||"classes"===t},name:"MuiInput",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[].concat((0,g.Z)($(t,e)),[!n.disableUnderline&&e.underline])}})((function(t){var e,n=t.theme,i=t.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(a="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),(0,r.Z)({position:"relative"},i.formControl&&{"label + &":{marginTop:16}},!i.disableUnderline&&(e={"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[i.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,m.Z)(e,"&.".concat(ot.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,m.Z)(e,"&.".concat(ot.error),{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}}),(0,m.Z)(e,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,m.Z)(e,"&:hover:not(.".concat(ot.disabled,", .").concat(ot.error,"):before"),{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,m.Z)(e,"&.".concat(ot.disabled,":before"),{borderBottomStyle:"dotted"}),e))})),ct=(0,d.ZP)(et,{name:"MuiInput",slot:"Input",overridesResolver:Q})({}),lt=a.forwardRef((function(t,e){var n,a,o,s,c=(0,f.Z)({props:t,name:"MuiInput"}),l=c.disableUnderline,h=c.components,p=void 0===h?{}:h,d=c.componentsProps,m=c.fullWidth,g=void 0!==m&&m,y=c.inputComponent,x=void 0===y?"input":y,b=c.multiline,w=void 0!==b&&b,k=c.slotProps,S=c.slots,T=void 0===S?{}:S,E=c.type,_=void 0===E?"text":E,L=(0,i.Z)(c,st),I=function(t){var e=t.classes,n={root:["root",!t.disableUnderline&&"underline"],input:["input"]},i=(0,u.Z)(n,at,e);return(0,r.Z)({},e,i)}(c),C={root:{ownerState:{disableUnderline:l}}},O=(null!=k?k:d)?(0,v.Z)(null!=k?k:d,C):C,R=null!=(n=null!=(a=T.root)?a:p.Root)?n:ut,D=null!=(o=null!=(s=T.input)?s:p.Input)?o:ct;return(0,A.jsx)(it,(0,r.Z)({slots:{root:R,input:D},slotProps:O,fullWidth:g,inputComponent:x,multiline:w,ref:e,type:_},L,{classes:I}))}));lt.muiName="Input";var ht=lt;function pt(t){return(0,X.Z)("MuiFilledInput",t)}var dt=(0,r.Z)({},Y,(0,H.Z)("MuiFilledInput",["root","underline","input"])),ft=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],mt=(0,d.ZP)(tt,{shouldForwardProp:function(t){return(0,d.FO)(t)||"classes"===t},name:"MuiFilledInput",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[].concat((0,g.Z)($(t,e)),[!n.disableUnderline&&e.underline])}})((function(t){var e,n,i,a=t.theme,o=t.ownerState,s="light"===a.palette.mode,u=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,r.Z)((e={position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c}}},(0,m.Z)(e,"&.".concat(dt.focused),{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:c}),(0,m.Z)(e,"&.".concat(dt.disabled),{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:h}),e),!o.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(null==(i=(a.vars||a).palette[o.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"}},(0,m.Z)(n,"&.".concat(dt.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,m.Z)(n,"&.".concat(dt.error),{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}}),(0,m.Z)(n,"&:before",{borderBottom:"1px solid ".concat(a.vars?"rgba(".concat(a.vars.palette.common.onBackgroundChannel," / ").concat(a.vars.opacity.inputUnderline,")"):u),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"}),(0,m.Z)(n,"&:hover:not(.".concat(dt.disabled,", .").concat(dt.error,"):before"),{borderBottom:"1px solid ".concat((a.vars||a).palette.text.primary)}),(0,m.Z)(n,"&.".concat(dt.disabled,":before"),{borderBottomStyle:"dotted"}),n),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&(0,r.Z)({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),gt=(0,d.ZP)(et,{name:"MuiFilledInput",slot:"Input",overridesResolver:Q})((function(t){var e=t.theme,n=t.ownerState;return(0,r.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&(0,m.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),vt=a.forwardRef((function(t,e){var n,a,o,s,c=(0,f.Z)({props:t,name:"MuiFilledInput"}),l=c.components,h=void 0===l?{}:l,p=c.componentsProps,d=c.fullWidth,m=void 0!==d&&d,g=c.inputComponent,y=void 0===g?"input":g,x=c.multiline,b=void 0!==x&&x,w=c.slotProps,k=c.slots,S=void 0===k?{}:k,T=c.type,E=void 0===T?"text":T,_=(0,i.Z)(c,ft),L=(0,r.Z)({},c,{fullWidth:m,inputComponent:y,multiline:b,type:E}),I=function(t){var e=t.classes,n={root:["root",!t.disableUnderline&&"underline"],input:["input"]},i=(0,u.Z)(n,pt,e);return(0,r.Z)({},e,i)}(c),C={root:{ownerState:L},input:{ownerState:L}},O=(null!=w?w:p)?(0,v.Z)(null!=w?w:p,C):C,R=null!=(n=null!=(a=S.root)?a:h.Root)?n:mt,D=null!=(o=null!=(s=S.input)?s:h.Input)?o:gt;return(0,A.jsx)(it,(0,r.Z)({slots:{root:R,input:D},componentsProps:O,fullWidth:m,inputComponent:y,multiline:b,ref:e,type:E},_,{classes:I}))}));vt.muiName="Input";var yt,xt=vt,bt=["children","classes","className","label","notched"],wt=(0,d.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),kt=(0,d.ZP)("legend")((function(t){var e=t.ownerState,n=t.theme;return(0,r.Z)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,r.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function St(t){return(0,X.Z)("MuiOutlinedInput",t)}var Tt=(0,r.Z)({},Y,(0,H.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),At=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Et=(0,d.ZP)(tt,{shouldForwardProp:function(t){return(0,d.FO)(t)||"classes"===t},name:"MuiOutlinedInput",slot:"Root",overridesResolver:$})((function(t){var e,n=t.theme,i=t.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,r.Z)((e={position:"relative",borderRadius:(n.vars||n).shape.borderRadius},(0,m.Z)(e,"&:hover .".concat(Tt.notchedOutline),{borderColor:(n.vars||n).palette.text.primary}),(0,m.Z)(e,"@media (hover: none)",(0,m.Z)({},"&:hover .".concat(Tt.notchedOutline),{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):a})),(0,m.Z)(e,"&.".concat(Tt.focused," .").concat(Tt.notchedOutline),{borderColor:(n.vars||n).palette[i.color].main,borderWidth:2}),(0,m.Z)(e,"&.".concat(Tt.error," .").concat(Tt.notchedOutline),{borderColor:(n.vars||n).palette.error.main}),(0,m.Z)(e,"&.".concat(Tt.disabled," .").concat(Tt.notchedOutline),{borderColor:(n.vars||n).palette.action.disabled}),e),i.startAdornment&&{paddingLeft:14},i.endAdornment&&{paddingRight:14},i.multiline&&(0,r.Z)({padding:"16.5px 14px"},"small"===i.size&&{padding:"8.5px 14px"}))})),_t=(0,d.ZP)((function(t){var e=t.className,n=t.label,a=t.notched,o=(0,i.Z)(t,bt),s=null!=n&&""!==n,u=(0,r.Z)({},t,{notched:a,withLabel:s});return(0,A.jsx)(wt,(0,r.Z)({"aria-hidden":!0,className:e,ownerState:u},o,{children:(0,A.jsx)(kt,{ownerState:u,children:s?(0,A.jsx)("span",{children:n}):yt||(yt=(0,A.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(t,e){return e.notchedOutline}})((function(t){var e=t.theme,n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Lt=(0,d.ZP)(et,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Q})((function(t){var e=t.theme,n=t.ownerState;return(0,r.Z)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&(0,m.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},e.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),It=a.forwardRef((function(t,e){var n,o,s,c,l,h=(0,f.Z)({props:t,name:"MuiOutlinedInput"}),p=h.components,d=void 0===p?{}:p,m=h.fullWidth,g=void 0!==m&&m,v=h.inputComponent,y=void 0===v?"input":v,x=h.label,b=h.multiline,w=void 0!==b&&b,k=h.notched,S=h.slots,T=void 0===S?{}:S,E=h.type,_=void 0===E?"text":E,L=(0,i.Z)(h,At),I=function(t){var e=t.classes,n=(0,u.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},St,e);return(0,r.Z)({},e,n)}(h),C=M(),O=R({props:h,muiFormControl:C,states:["required"]}),D=(0,r.Z)({},h,{color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:C,fullWidth:g,hiddenLabel:O.hiddenLabel,multiline:w,size:O.size,type:_}),F=null!=(n=null!=(o=T.root)?o:d.Root)?n:Et,z=null!=(s=null!=(c=T.input)?c:d.Input)?s:Lt;return(0,A.jsx)(it,(0,r.Z)({slots:{root:F,input:z},renderSuffix:function(t){return(0,A.jsx)(_t,{ownerState:D,className:I.notchedOutline,label:null!=x&&""!==x&&O.required?l||(l=(0,A.jsxs)(a.Fragment,{children:[x,"\u2009","*"]})):x,notched:"undefined"!==typeof k?k:Boolean(t.startAdornment||t.filled||t.focused)})},fullWidth:g,inputComponent:y,multiline:w,ref:e,type:_},L,{classes:(0,r.Z)({},I,{notchedOutline:null})}))}));It.muiName="Input";var Ct=It;function Ot(t){return(0,X.Z)("MuiFormLabel",t)}var Rt=(0,H.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Dt=["children","className","color","component","disabled","error","filled","focused","required"],Mt=(0,d.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return(0,r.Z)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((function(t){var e,n=t.theme,i=t.ownerState;return(0,r.Z)({color:(n.vars||n).palette.text.secondary},n.typography.body1,(e={lineHeight:"1.4375em",padding:0,position:"relative"},(0,m.Z)(e,"&.".concat(Rt.focused),{color:(n.vars||n).palette[i.color].main}),(0,m.Z)(e,"&.".concat(Rt.disabled),{color:(n.vars||n).palette.text.disabled}),(0,m.Z)(e,"&.".concat(Rt.error),{color:(n.vars||n).palette.error.main}),e))})),Ft=(0,d.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(t,e){return e.asterisk}})((function(t){var e=t.theme;return(0,m.Z)({},"&.".concat(Rt.error),{color:(e.vars||e).palette.error.main})})),zt=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiFormLabel"}),a=n.children,o=n.className,c=n.component,l=void 0===c?"label":c,h=(0,i.Z)(n,Dt),p=R({props:n,muiFormControl:M(),states:["color","required","focused","disabled","error","filled"]}),d=(0,r.Z)({},n,{color:p.color||"primary",component:l,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),m=function(t){var e=t.classes,n=t.color,r=t.focused,i=t.disabled,a=t.error,o=t.filled,s=t.required,c={root:["root","color".concat((0,F.Z)(n)),i&&"disabled",a&&"error",o&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return(0,u.Z)(c,Ot,e)}(d);return(0,A.jsxs)(Mt,(0,r.Z)({as:l,ownerState:d,className:(0,s.Z)(m.root,o),ref:e},h,{children:[a,p.required&&(0,A.jsxs)(Ft,{ownerState:d,"aria-hidden":!0,className:m.asterisk,children:["\u2009","*"]})]}))}));function Pt(t){return(0,X.Z)("MuiInputLabel",t)}(0,H.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var Nt=["disableAnimation","margin","shrink","variant","className"],Vt=(0,d.ZP)(zt,{shouldForwardProp:function(t){return(0,d.FO)(t)||"classes"===t},name:"MuiInputLabel",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,m.Z)({},"& .".concat(Rt.asterisk),e.asterisk),e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,r.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,r.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,r.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,r.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Kt=a.forwardRef((function(t,e){var n=(0,f.Z)({name:"MuiInputLabel",props:t}),a=n.disableAnimation,o=void 0!==a&&a,c=n.shrink,l=n.className,h=(0,i.Z)(n,Nt),p=M(),d=c;"undefined"===typeof d&&p&&(d=p.filled||p.focused||p.adornedStart);var m=R({props:n,muiFormControl:p,states:["size","variant","required"]}),g=(0,r.Z)({},n,{disableAnimation:o,formControl:p,shrink:d,size:m.size,variant:m.variant,required:m.required}),v=function(t){var e=t.classes,n=t.formControl,i=t.size,a=t.shrink,o={root:["root",n&&"formControl",!t.disableAnimation&&"animated",a&&"shrink","small"===i&&"sizeSmall",t.variant],asterisk:[t.required&&"asterisk"]},s=(0,u.Z)(o,Pt,e);return(0,r.Z)({},e,s)}(g);return(0,A.jsx)(Vt,(0,r.Z)({"data-shrink":d,ownerState:g,ref:e,className:(0,s.Z)(v.root,l)},h,{classes:v}))}));var Zt=function(t,e){return a.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)};function jt(t){return(0,X.Z)("MuiFormControl",t)}(0,H.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Gt=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Bt=(0,d.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return(0,r.Z)({},e.root,e["margin".concat((0,F.Z)(n.margin))],n.fullWidth&&e.fullWidth)}})((function(t){var e=t.ownerState;return(0,r.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),Ut=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiFormControl"}),o=n.children,l=n.className,h=n.color,p=void 0===h?"primary":h,d=n.component,m=void 0===d?"div":d,g=n.disabled,v=void 0!==g&&g,y=n.error,x=void 0!==y&&y,b=n.focused,w=n.fullWidth,k=void 0!==w&&w,S=n.hiddenLabel,T=void 0!==S&&S,E=n.margin,_=void 0===E?"none":E,L=n.required,I=void 0!==L&&L,C=n.size,O=void 0===C?"medium":C,R=n.variant,M=void 0===R?"outlined":R,z=(0,i.Z)(n,Gt),P=(0,r.Z)({},n,{color:p,component:m,disabled:v,error:x,fullWidth:k,hiddenLabel:T,margin:_,required:I,size:O,variant:M}),N=function(t){var e=t.classes,n=t.margin,r=t.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,F.Z)(n)),r&&"fullWidth"]};return(0,u.Z)(i,jt,e)}(P),V=a.useState((function(){var t=!1;return o&&a.Children.forEach(o,(function(e){if(Zt(e,["Input","Select"])){var n=Zt(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),K=(0,c.Z)(V,2),Z=K[0],j=K[1],G=a.useState((function(){var t=!1;return o&&a.Children.forEach(o,(function(e){Zt(e,["Input","Select"])&&(W(e.props,!0)||W(e.props.inputProps,!0))&&(t=!0)})),t})),B=(0,c.Z)(G,2),U=B[0],H=B[1],X=a.useState(!1),q=(0,c.Z)(X,2),Y=q[0],J=q[1];v&&Y&&J(!1);var $,Q=void 0===b||v?Y:b,tt=a.useMemo((function(){return{adornedStart:Z,setAdornedStart:j,color:p,disabled:v,error:x,filled:U,focused:Q,fullWidth:k,hiddenLabel:T,size:O,onBlur:function(){J(!1)},onEmpty:function(){H(!1)},onFilled:function(){H(!0)},onFocus:function(){J(!0)},registerEffect:$,required:I,variant:M}}),[Z,p,v,x,U,Q,k,T,$,I,O,M]);return(0,A.jsx)(D.Provider,{value:tt,children:(0,A.jsx)(Bt,(0,r.Z)({as:m,ownerState:P,className:(0,s.Z)(N.root,l),ref:e},z,{children:o}))})}));function Wt(t){return(0,X.Z)("MuiFormHelperText",t)}var Ht,Xt=(0,H.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),qt=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Yt=(0,d.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.size&&e["size".concat((0,F.Z)(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((function(t){var e,n=t.theme,i=t.ownerState;return(0,r.Z)({color:(n.vars||n).palette.text.secondary},n.typography.caption,(e={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,m.Z)(e,"&.".concat(Xt.disabled),{color:(n.vars||n).palette.text.disabled}),(0,m.Z)(e,"&.".concat(Xt.error),{color:(n.vars||n).palette.error.main}),e),"small"===i.size&&{marginTop:4},i.contained&&{marginLeft:14,marginRight:14})})),Jt=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiFormHelperText"}),a=n.children,o=n.className,c=n.component,l=void 0===c?"p":c,h=(0,i.Z)(n,qt),p=R({props:n,muiFormControl:M(),states:["variant","size","disabled","error","filled","focused","required"]}),d=(0,r.Z)({},n,{component:l,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),m=function(t){var e=t.classes,n=t.contained,r=t.size,i=t.disabled,a=t.error,o=t.filled,s=t.focused,c=t.required,l={root:["root",i&&"disabled",a&&"error",r&&"size".concat((0,F.Z)(r)),n&&"contained",s&&"focused",o&&"filled",c&&"required"]};return(0,u.Z)(l,Wt,e)}(d);return(0,A.jsx)(Yt,(0,r.Z)({as:l,ownerState:d,className:(0,s.Z)(m.root,o),ref:e},h,{children:" "===a?Ht||(Ht=(0,A.jsx)("span",{className:"notranslate",children:"\u200b"})):a}))})),$t=(n(7441),w);var Qt=a.createContext({});function te(t){return(0,X.Z)("MuiList",t)}(0,H.Z)("MuiList",["root","padding","dense","subheader"]);var ee=["children","className","component","dense","disablePadding","subheader"],ne=(0,d.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((function(t){var e=t.ownerState;return(0,r.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),re=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiList"}),o=n.children,c=n.className,l=n.component,h=void 0===l?"ul":l,p=n.dense,d=void 0!==p&&p,m=n.disablePadding,g=void 0!==m&&m,v=n.subheader,y=(0,i.Z)(n,ee),x=a.useMemo((function(){return{dense:d}}),[d]),b=(0,r.Z)({},n,{component:h,dense:d,disablePadding:g}),w=function(t){var e=t.classes,n={root:["root",!t.disablePadding&&"padding",t.dense&&"dense",t.subheader&&"subheader"]};return(0,u.Z)(n,te,e)}(b);return(0,A.jsx)(Qt.Provider,{value:x,children:(0,A.jsxs)(ne,(0,r.Z)({as:h,className:(0,s.Z)(w.root,c),ref:e,ownerState:b},y,{children:[v,o]}))})}));function ie(t){var e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}var ae=ie,oe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function se(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function ue(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function ce(t,e){if(void 0===e)return!0;var n=t.innerText;return void 0===n&&(n=t.textContent),0!==(n=n.trim().toLowerCase()).length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function le(t,e,n,r,i,a){for(var o=!1,s=i(t,e,!!e&&n);s;){if(s===t.firstChild){if(o)return!1;o=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&ce(s,a)&&!u)return s.focus(),!0;s=i(t,s,n)}return!1}var he=a.forwardRef((function(t,e){var n=t.actions,o=t.autoFocus,s=void 0!==o&&o,u=t.autoFocusItem,c=void 0!==u&&u,l=t.children,h=t.className,p=t.disabledItemsFocusable,d=void 0!==p&&p,f=t.disableListWrap,m=void 0!==f&&f,g=t.onKeyDown,v=t.variant,y=void 0===v?"selectedMenu":v,x=(0,i.Z)(t,oe),b=a.useRef(null),w=a.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});P((function(){s&&b.current.focus()}),[s]),a.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(t,e){var n=!b.current.style.width;if(t.clientHeight<b.current.clientHeight&&n){var r="".concat(ae($t(t)),"px");b.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=r,b.current.style.width="calc(100% + ".concat(r,")")}return b.current}}}),[]);var k=(0,z.Z)(b,e),S=-1;a.Children.forEach(l,(function(t,e){a.isValidElement(t)&&(t.props.disabled||("selectedMenu"===y&&t.props.selected||-1===S)&&(S=e),S===e&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(S+=1)>=l.length&&(S=-1))}));var T=a.Children.map(l,(function(t,e){if(e===S){var n={};return c&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===y&&(n.tabIndex=0),a.cloneElement(t,n)}return t}));return(0,A.jsx)(re,(0,r.Z)({role:"menu",ref:k,className:h,onKeyDown:function(t){var e=b.current,n=t.key,r=$t(e).activeElement;if("ArrowDown"===n)t.preventDefault(),le(e,r,m,d,se);else if("ArrowUp"===n)t.preventDefault(),le(e,r,m,d,ue);else if("Home"===n)t.preventDefault(),le(e,null,m,d,se);else if("End"===n)t.preventDefault(),le(e,null,m,d,ue);else if(1===n.length){var i=w.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=r&&!i.repeating&&ce(r,i);i.previousKeyMatched&&(s||le(e,r,!1,d,se,i))?t.preventDefault():i.previousKeyMatched=!1}g&&g(t)},tabIndex:s?0:-1},x,{children:T}))})),pe=n(2065),de=function(t){return((t<1?5.11916*Math.pow(t,2):4.5*Math.log(t+1)+2)/100).toFixed(2)};function fe(t){return(0,X.Z)("MuiPaper",t)}(0,H.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var me=["className","component","elevation","square","variant"],ge=(0,d.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((function(t){var e,n=t.theme,i=t.ownerState;return(0,r.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!i.square&&{borderRadius:n.shape.borderRadius},"outlined"===i.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===i.variant&&(0,r.Z)({boxShadow:(n.vars||n).shadows[i.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,pe.Fq)("#fff",de(i.elevation)),", ").concat((0,pe.Fq)("#fff",de(i.elevation)),")")},n.vars&&{backgroundImage:null==(e=n.vars.overlays)?void 0:e[i.elevation]}))})),ve=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiPaper"}),a=n.className,o=n.component,c=void 0===o?"div":o,l=n.elevation,h=void 0===l?1:l,p=n.square,d=void 0!==p&&p,m=n.variant,g=void 0===m?"elevation":m,v=(0,i.Z)(n,me),y=(0,r.Z)({},n,{component:c,elevation:h,square:d,variant:g}),x=function(t){var e=t.square,n=t.elevation,r=t.variant,i=t.classes,a={root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,u.Z)(a,fe,i)}(y);return(0,A.jsx)(ge,(0,r.Z)({as:c,ownerState:y,className:(0,s.Z)(x.root,a),ref:e},v))})),ye=S,xe=k,be=n(4578),we=!1,ke=n(5545),Se="unmounted",Te="exited",Ae="entering",Ee="entered",_e="exiting",Le=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=Te,r.appearStatus=Ae):i=Ee:i=e.unmountOnExit||e.mountOnEnter?Se:Te,r.state={status:i},r.nextCallback=null,r}(0,be.Z)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Se?{status:Te}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Ae&&n!==Ee&&(e=Ae):n!==Ae&&n!==Ee||(e=_e)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Ae){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:x.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Te&&this.setState({status:Se})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[x.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!t&&!n||we?this.safeSetState({status:Ee},(function(){e.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Ae},(function(){e.props.onEntering(a,o),e.onTransitionEnd(u,(function(){e.safeSetState({status:Ee},(function(){e.props.onEntered(a,o)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:x.findDOMNode(this);e&&!we?(this.props.onExit(r),this.safeSetState({status:_e},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Te},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:Te},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:x.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===Se)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,i.Z)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(ke.Z.Provider,{value:null},"function"===typeof n?n(t,r):a.cloneElement(a.Children.only(n),r))},e}(a.Component);function Ie(){}Le.contextType=ke.Z,Le.propTypes={},Le.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ie,onEntering:Ie,onEntered:Ie,onExit:Ie,onExiting:Ie,onExited:Ie},Le.UNMOUNTED=Se,Le.EXITED=Te,Le.ENTERING=Ae,Le.ENTERED=Ee,Le.EXITING=_e;var Ce=Le,Oe=n(3967),Re=function(t){return t.scrollTop};function De(t,e){var n,r,i=t.timeout,a=t.easing,o=t.style,s=void 0===o?{}:o;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof a?a[e.mode]:a,delay:s.transitionDelay}}var Me=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Fe(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var ze={entering:{opacity:1,transform:Fe(1)},entered:{opacity:1,transform:"none"}},Pe="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ne=a.forwardRef((function(t,e){var n=t.addEndListener,o=t.appear,s=void 0===o||o,u=t.children,c=t.easing,l=t.in,h=t.onEnter,p=t.onEntered,d=t.onEntering,f=t.onExit,m=t.onExited,g=t.onExiting,v=t.style,y=t.timeout,x=void 0===y?"auto":y,b=t.TransitionComponent,w=void 0===b?Ce:b,k=(0,i.Z)(t,Me),S=a.useRef(),T=a.useRef(),E=(0,Oe.Z)(),_=a.useRef(null),L=(0,z.Z)(_,u.ref,e),I=function(t){return function(e){if(t){var n=_.current;void 0===e?t(n):t(n,e)}}},C=I(d),O=I((function(t,e){Re(t);var n,r=De({style:v,timeout:x,easing:c},{mode:"enter"}),i=r.duration,a=r.delay,o=r.easing;"auto"===x?(n=E.transitions.getAutoHeightDuration(t.clientHeight),T.current=n):n=i,t.style.transition=[E.transitions.create("opacity",{duration:n,delay:a}),E.transitions.create("transform",{duration:Pe?n:.666*n,delay:a,easing:o})].join(","),h&&h(t,e)})),R=I(p),D=I(g),M=I((function(t){var e,n=De({style:v,timeout:x,easing:c},{mode:"exit"}),r=n.duration,i=n.delay,a=n.easing;"auto"===x?(e=E.transitions.getAutoHeightDuration(t.clientHeight),T.current=e):e=r,t.style.transition=[E.transitions.create("opacity",{duration:e,delay:i}),E.transitions.create("transform",{duration:Pe?e:.666*e,delay:Pe?i:i||.333*e,easing:a})].join(","),t.style.opacity=0,t.style.transform=Fe(.75),f&&f(t)})),F=I(m);return a.useEffect((function(){return function(){clearTimeout(S.current)}}),[]),(0,A.jsx)(w,(0,r.Z)({appear:s,in:l,nodeRef:_,onEnter:O,onEntered:R,onEntering:C,onExit:M,onExited:F,onExiting:D,addEndListener:function(t){"auto"===x&&(S.current=setTimeout(t,T.current||0)),n&&n(_.current,t)},timeout:"auto"===x?null:x},k,{children:function(t,e){return a.cloneElement(u,(0,r.Z)({style:(0,r.Z)({opacity:0,transform:Fe(.75),visibility:"exited"!==t||l?void 0:"hidden"},ze[t],v,u.props.style),ref:L},e))}}))}));Ne.muiSupportAuto=!0;var Ve=Ne,Ke=n(8956);function Ze(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}var je=n(2971);var Ge=a.forwardRef((function(t,e){var n=t.children,r=t.container,i=t.disablePortal,o=void 0!==i&&i,s=a.useState(null),u=(0,c.Z)(s,2),l=u[0],h=u[1],p=(0,b.Z)(a.isValidElement(n)?n.ref:null,e);if((0,T.Z)((function(){o||h(function(t){return"function"===typeof t?t():t}(r)||document.body)}),[r,o]),(0,T.Z)((function(){if(l&&!o)return(0,je.Z)(e,l),function(){(0,je.Z)(e,null)}}),[e,l,o]),o){if(a.isValidElement(n)){var d={ref:p};return a.cloneElement(n,d)}return(0,A.jsx)(a.Fragment,{children:n})}return(0,A.jsx)(a.Fragment,{children:l?x.createPortal(n,l):l})})),Be=n(5671),Ue=n(3144);function We(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function He(t){return parseInt(k(t).getComputedStyle(t).paddingRight,10)||0}function Xe(t,e,n,r,i){var a=[e,n].concat((0,g.Z)(r));[].forEach.call(t.children,(function(t){var e=-1===a.indexOf(t),n=!function(t){var e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&We(t,i)}))}function qe(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}function Ye(t,e){var n=[],r=t.container;if(!e.disableScrollLock){if(function(t){var e=w(t);return e.body===t?k(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){var i=ie(w(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(He(r)+i,"px");var a=w(r).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(t){n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(He(t)+i,"px")}))}var o;if(r.parentNode instanceof DocumentFragment)o=w(r).body;else{var s=r.parentElement,u=k(r);o="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===u.getComputedStyle(s).overflowY?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return function(){n.forEach((function(t){var e=t.value,n=t.el,r=t.property;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}var Je=function(){function t(){(0,Be.Z)(this,t),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,Ue.Z)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&We(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);Xe(e,t.mount,t.modalRef,r,!0);var i=qe(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(t,e){var n=qe(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=Ye(r,e))}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(t);if(-1===n)return n;var r=qe(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),t.modalRef&&We(t.modalRef,e),Xe(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var a=i.modals[i.modals.length-1];a.modalRef&&We(a.modalRef,!1)}return n}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}(),$e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Qe(t){var e=[],n=[];return Array.from(t.querySelectorAll($e)).forEach((function(t,r){var i=function(t){var e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;var e=function(e){return t.ownerDocument.querySelector('input[type="radio"]'.concat(e))},n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort((function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex})).map((function(t){return t.node})).concat(e)}function tn(){return!0}var en=function(t){var e=t.children,n=t.disableAutoFocus,r=void 0!==n&&n,i=t.disableEnforceFocus,o=void 0!==i&&i,s=t.disableRestoreFocus,u=void 0!==s&&s,c=t.getTabbable,l=void 0===c?Qe:c,h=t.isEnabled,p=void 0===h?tn:h,d=t.open,f=a.useRef(!1),m=a.useRef(null),g=a.useRef(null),v=a.useRef(null),y=a.useRef(null),x=a.useRef(!1),k=a.useRef(null),S=(0,b.Z)(e.ref,k),T=a.useRef(null);a.useEffect((function(){d&&k.current&&(x.current=!r)}),[r,d]),a.useEffect((function(){if(d&&k.current){var t=w(k.current);return k.current.contains(t.activeElement)||(k.current.hasAttribute("tabIndex")||k.current.setAttribute("tabIndex","-1"),x.current&&k.current.focus()),function(){u||(v.current&&v.current.focus&&(f.current=!0,v.current.focus()),v.current=null)}}}),[d]),a.useEffect((function(){if(d&&k.current){var t=w(k.current),e=function(e){var n=k.current;if(null!==n)if(t.hasFocus()&&!o&&p()&&!f.current){if(!n.contains(t.activeElement)){if(e&&y.current!==e.target||t.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!x.current)return;var r=[];if(t.activeElement!==m.current&&t.activeElement!==g.current||(r=l(k.current)),r.length>0){var i,a,s=Boolean((null==(i=T.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=T.current)?void 0:a.key)),u=r[0],c=r[r.length-1];"string"!==typeof u&&"string"!==typeof c&&(s?c.focus():u.focus())}else n.focus()}}else f.current=!1},n=function(e){T.current=e,!o&&p()&&"Tab"===e.key&&t.activeElement===k.current&&e.shiftKey&&(f.current=!0,g.current&&g.current.focus())};t.addEventListener("focusin",e),t.addEventListener("keydown",n,!0);var r=setInterval((function(){t.activeElement&&"BODY"===t.activeElement.tagName&&e(null)}),50);return function(){clearInterval(r),t.removeEventListener("focusin",e),t.removeEventListener("keydown",n,!0)}}}),[r,o,u,p,d,l]);var E=function(t){null===v.current&&(v.current=t.relatedTarget),x.current=!0};return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)("div",{tabIndex:d?0:-1,onFocus:E,ref:m,"data-testid":"sentinelStart"}),a.cloneElement(e,{ref:S,onFocus:function(t){null===v.current&&(v.current=t.relatedTarget),x.current=!0,y.current=t.target;var n=e.props.onFocus;n&&n(t)}}),(0,A.jsx)("div",{tabIndex:d?0:-1,onFocus:E,ref:g,"data-testid":"sentinelEnd"})]})};function nn(t){return(0,X.Z)("MuiModal",t)}(0,H.Z)("MuiModal",["root","hidden","backdrop"]);function rn(t){if(void 0===t)return{};var e={};return Object.keys(t).filter((function(e){return!(e.match(/^on[A-Z]/)&&"function"===typeof t[e])})).forEach((function(n){e[n]=t[n]})),e}function an(t){var e=t.getSlotProps,n=t.additionalProps,i=t.externalSlotProps,a=t.externalForwardedProps,o=t.className;if(!e){var u=(0,s.Z)(null==a?void 0:a.className,null==i?void 0:i.className,o,null==n?void 0:n.className),c=(0,r.Z)({},null==n?void 0:n.style,null==a?void 0:a.style,null==i?void 0:i.style),l=(0,r.Z)({},n,a,i);return u.length>0&&(l.className=u),Object.keys(c).length>0&&(l.style=c),{props:l,internalRef:void 0}}var h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};var n={};return Object.keys(t).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n)})).forEach((function(e){n[e]=t[e]})),n}((0,r.Z)({},a,i)),p=rn(i),d=rn(a),f=e(h),m=(0,s.Z)(null==f?void 0:f.className,null==n?void 0:n.className,o,null==a?void 0:a.className,null==i?void 0:i.className),g=(0,r.Z)({},null==f?void 0:f.style,null==n?void 0:n.style,null==a?void 0:a.style,null==i?void 0:i.style),v=(0,r.Z)({},f,n,d,p);return m.length>0&&(v.className=m),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:f.ref}}function on(t,e){return"function"===typeof t?t(e):t}var sn=["elementType","externalSlotProps","ownerState"];function un(t){var e,n=t.elementType,a=t.externalSlotProps,o=t.ownerState,s=(0,i.Z)(t,sn),u=on(a,o),c=an((0,r.Z)({},s,{externalSlotProps:u})),l=c.props,h=c.internalRef,p=(0,b.Z)(h,null==u?void 0:u.ref,null==(e=t.additionalProps)?void 0:e.ref),d=function(t,e,n){return void 0===t||O(t)?e:(0,r.Z)({},e,{ownerState:(0,r.Z)({},e.ownerState,n)})}(n,(0,r.Z)({},l,{ref:p}),o);return d}var cn={disableDefaultClasses:!1},ln=a.createContext(cn);var hn=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],pn=function(t){var e=t.open,n=t.exited,r={root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]};return(0,u.Z)(r,function(t){var e=a.useContext(ln).disableDefaultClasses;return function(n){return e?"":t(n)}}(nn))};var dn=new Je,fn=a.forwardRef((function(t,e){var n,o,s=t.children,u=t.closeAfterTransition,l=void 0!==u&&u,h=t.container,p=t.disableAutoFocus,d=void 0!==p&&p,f=t.disableEnforceFocus,m=void 0!==f&&f,g=t.disableEscapeKeyDown,v=void 0!==g&&g,y=t.disablePortal,x=void 0!==y&&y,k=t.disableRestoreFocus,S=void 0!==k&&k,T=t.disableScrollLock,E=void 0!==T&&T,_=t.hideBackdrop,L=void 0!==_&&_,I=t.keepMounted,C=void 0!==I&&I,O=t.manager,R=void 0===O?dn:O,D=t.onBackdropClick,M=t.onClose,F=t.onKeyDown,z=t.open,P=t.onTransitionEnter,N=t.onTransitionExited,V=t.slotProps,K=void 0===V?{}:V,Z=t.slots,j=void 0===Z?{}:Z,G=(0,i.Z)(t,hn),B=R,U=a.useState(!z),W=(0,c.Z)(U,2),H=W[0],X=W[1],q=a.useRef({}),Y=a.useRef(null),J=a.useRef(null),$=(0,b.Z)(J,e),Q=function(t){return!!t&&t.props.hasOwnProperty("in")}(s),tt=null==(n=t["aria-hidden"])||n,et=function(){return q.current.modalRef=J.current,q.current.mountNode=Y.current,q.current},nt=function(){B.mount(et(),{disableScrollLock:E}),J.current&&(J.current.scrollTop=0)},rt=(0,Ke.Z)((function(){var t=function(t){return"function"===typeof t?t():t}(h)||w(Y.current).body;B.add(et(),t),J.current&&nt()})),it=a.useCallback((function(){return B.isTopModal(et())}),[B]),at=(0,Ke.Z)((function(t){Y.current=t,t&&J.current&&(z&&it()?nt():We(J.current,tt))})),ot=a.useCallback((function(){B.remove(et(),tt)}),[B,tt]);a.useEffect((function(){return function(){ot()}}),[ot]),a.useEffect((function(){z?rt():Q&&l||ot()}),[z,ot,Q,l,rt]);var st=(0,r.Z)({},t,{closeAfterTransition:l,disableAutoFocus:d,disableEnforceFocus:m,disableEscapeKeyDown:v,disablePortal:x,disableRestoreFocus:S,disableScrollLock:E,exited:H,hideBackdrop:L,keepMounted:C}),ut=pn(st),ct={};void 0===s.props.tabIndex&&(ct.tabIndex="-1"),Q&&(ct.onEnter=Ze((function(){X(!1),P&&P()}),s.props.onEnter),ct.onExited=Ze((function(){X(!0),N&&N(),l&&ot()}),s.props.onExited));var lt=null!=(o=j.root)?o:"div",ht=un({elementType:lt,externalSlotProps:K.root,externalForwardedProps:G,additionalProps:{ref:$,role:"presentation",onKeyDown:function(t){F&&F(t),"Escape"===t.key&&it()&&(v||(t.stopPropagation(),M&&M(t,"escapeKeyDown")))}},className:ut.root,ownerState:st}),pt=j.backdrop,dt=un({elementType:pt,externalSlotProps:K.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(t){t.target===t.currentTarget&&(D&&D(t),M&&M(t,"backdropClick"))},open:z},className:ut.backdrop,ownerState:st});return C||z||Q&&!H?(0,A.jsx)(Ge,{ref:at,container:h,disablePortal:x,children:(0,A.jsxs)(lt,(0,r.Z)({},ht,{children:[!L&&pt?(0,A.jsx)(pt,(0,r.Z)({},dt)):null,(0,A.jsx)(en,{disableEnforceFocus:m,disableAutoFocus:d,disableRestoreFocus:S,isEnabled:it,open:z,children:a.cloneElement(s,ct)})]}))}):null})),mn=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],gn={entering:{opacity:1},entered:{opacity:1}},vn=a.forwardRef((function(t,e){var n=(0,Oe.Z)(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},s=t.addEndListener,u=t.appear,c=void 0===u||u,l=t.children,h=t.easing,p=t.in,d=t.onEnter,f=t.onEntered,m=t.onEntering,g=t.onExit,v=t.onExited,y=t.onExiting,x=t.style,b=t.timeout,w=void 0===b?o:b,k=t.TransitionComponent,S=void 0===k?Ce:k,T=(0,i.Z)(t,mn),E=a.useRef(null),_=(0,z.Z)(E,l.ref,e),L=function(t){return function(e){if(t){var n=E.current;void 0===e?t(n):t(n,e)}}},I=L(m),C=L((function(t,e){Re(t);var r=De({style:x,timeout:w,easing:h},{mode:"enter"});t.style.webkitTransition=n.transitions.create("opacity",r),t.style.transition=n.transitions.create("opacity",r),d&&d(t,e)})),O=L(f),R=L(y),D=L((function(t){var e=De({style:x,timeout:w,easing:h},{mode:"exit"});t.style.webkitTransition=n.transitions.create("opacity",e),t.style.transition=n.transitions.create("opacity",e),g&&g(t)})),M=L(v);return(0,A.jsx)(S,(0,r.Z)({appear:c,in:p,nodeRef:E,onEnter:C,onEntered:O,onEntering:I,onExit:D,onExited:M,onExiting:R,addEndListener:function(t){s&&s(E.current,t)},timeout:w},T,{children:function(t,e){return a.cloneElement(l,(0,r.Z)({style:(0,r.Z)({opacity:0,visibility:"exited"!==t||p?void 0:"hidden"},gn[t],x,l.props.style),ref:_},e))}}))}));function yn(t){return(0,X.Z)("MuiBackdrop",t)}(0,H.Z)("MuiBackdrop",["root","invisible"]);var xn=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],bn=(0,d.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.invisible&&e.invisible]}})((function(t){var e=t.ownerState;return(0,r.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),wn=a.forwardRef((function(t,e){var n,a,o,c=(0,f.Z)({props:t,name:"MuiBackdrop"}),l=c.children,h=c.className,p=c.component,d=void 0===p?"div":p,m=c.components,g=void 0===m?{}:m,v=c.componentsProps,y=void 0===v?{}:v,x=c.invisible,b=void 0!==x&&x,w=c.open,k=c.slotProps,S=void 0===k?{}:k,T=c.slots,E=void 0===T?{}:T,_=c.TransitionComponent,L=void 0===_?vn:_,I=c.transitionDuration,C=(0,i.Z)(c,xn),O=(0,r.Z)({},c,{component:d,invisible:b}),R=function(t){var e=t.classes,n={root:["root",t.invisible&&"invisible"]};return(0,u.Z)(n,yn,e)}(O),D=null!=(n=S.root)?n:y.root;return(0,A.jsx)(L,(0,r.Z)({in:w,timeout:I},C,{children:(0,A.jsx)(bn,(0,r.Z)({"aria-hidden":!0},D,{as:null!=(a=null!=(o=E.root)?o:g.Root)?a:d,className:(0,s.Z)(R.root,h,null==D?void 0:D.className),ownerState:(0,r.Z)({},O,null==D?void 0:D.ownerState),classes:R,ref:e,children:l}))}))})),kn=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],Sn=(0,d.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.open&&n.exited&&e.hidden]}})((function(t){var e=t.theme,n=t.ownerState;return(0,r.Z)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Tn=(0,d.ZP)(wn,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(t,e){return e.backdrop}})({zIndex:-1}),An=a.forwardRef((function(t,e){var n,o,u,l,h,p,d=(0,f.Z)({name:"MuiModal",props:t}),m=d.BackdropComponent,g=void 0===m?Tn:m,v=d.BackdropProps,y=d.classes,x=d.className,b=d.closeAfterTransition,w=void 0!==b&&b,k=d.children,S=d.container,T=d.component,E=d.components,_=void 0===E?{}:E,L=d.componentsProps,I=void 0===L?{}:L,C=d.disableAutoFocus,R=void 0!==C&&C,D=d.disableEnforceFocus,M=void 0!==D&&D,F=d.disableEscapeKeyDown,z=void 0!==F&&F,P=d.disablePortal,N=void 0!==P&&P,V=d.disableRestoreFocus,K=void 0!==V&&V,Z=d.disableScrollLock,j=void 0!==Z&&Z,G=d.hideBackdrop,B=void 0!==G&&G,U=d.keepMounted,W=void 0!==U&&U,H=d.onBackdropClick,X=d.onClose,q=d.open,Y=d.slotProps,J=d.slots,$=d.theme,Q=(0,i.Z)(d,kn),tt=a.useState(!0),et=(0,c.Z)(tt,2),nt=et[0],rt=et[1],it={container:S,closeAfterTransition:w,disableAutoFocus:R,disableEnforceFocus:M,disableEscapeKeyDown:z,disablePortal:N,disableRestoreFocus:K,disableScrollLock:j,hideBackdrop:B,keepMounted:W,onBackdropClick:H,onClose:X,open:q},at=(0,r.Z)({},d,it,{exited:nt}),ot=null!=(n=null!=(o=null==J?void 0:J.root)?o:_.Root)?n:Sn,st=null!=(u=null!=(l=null==J?void 0:J.backdrop)?l:_.Backdrop)?u:g,ut=null!=(h=null==Y?void 0:Y.root)?h:I.root,ct=null!=(p=null==Y?void 0:Y.backdrop)?p:I.backdrop;return(0,A.jsx)(fn,(0,r.Z)({slots:{root:ot,backdrop:st},slotProps:{root:function(){return(0,r.Z)({},on(ut,at),!O(ot)&&{as:T,theme:$},{className:(0,s.Z)(x,null==ut?void 0:ut.className,null==y?void 0:y.root,!at.open&&at.exited&&(null==y?void 0:y.hidden))})},backdrop:function(){return(0,r.Z)({},v,on(ct,at),{className:(0,s.Z)(null==ct?void 0:ct.className,null==v?void 0:v.className,null==y?void 0:y.backdrop)})}},onTransitionEnter:function(){return rt(!1)},onTransitionExited:function(){return rt(!0)},ref:e},Q,it,{children:k}))}));function En(t){return(0,X.Z)("MuiPopover",t)}(0,H.Z)("MuiPopover",["root","paper"]);var _n=["onEntering"],Ln=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function In(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function Cn(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function On(t){return[t.horizontal,t.vertical].map((function(t){return"number"===typeof t?"".concat(t,"px"):t})).join(" ")}function Rn(t){return"function"===typeof t?t():t}var Dn=(0,d.ZP)(An,{name:"MuiPopover",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),Mn=(0,d.ZP)(ve,{name:"MuiPopover",slot:"Paper",overridesResolver:function(t,e){return e.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Fn=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiPopover"}),o=n.action,l=n.anchorEl,h=n.anchorOrigin,p=void 0===h?{vertical:"top",horizontal:"left"}:h,d=n.anchorPosition,m=n.anchorReference,g=void 0===m?"anchorEl":m,v=n.children,y=n.className,x=n.container,b=n.elevation,w=void 0===b?8:b,k=n.marginThreshold,S=void 0===k?16:k,T=n.open,E=n.PaperProps,_=void 0===E?{}:E,L=n.transformOrigin,I=void 0===L?{vertical:"top",horizontal:"left"}:L,C=n.TransitionComponent,O=void 0===C?Ve:C,R=n.transitionDuration,D=void 0===R?"auto":R,M=n.TransitionProps,F=(void 0===M?{}:M).onEntering,P=(0,i.Z)(n.TransitionProps,_n),N=(0,i.Z)(n,Ln),V=a.useRef(),K=(0,z.Z)(V,_.ref),Z=(0,r.Z)({},n,{anchorOrigin:p,anchorReference:g,elevation:w,marginThreshold:S,PaperProps:_,transformOrigin:I,TransitionComponent:O,transitionDuration:D,TransitionProps:P}),j=function(t){var e=t.classes;return(0,u.Z)({root:["root"],paper:["paper"]},En,e)}(Z),G=a.useCallback((function(){if("anchorPosition"===g)return d;var t=Rn(l),e=(t&&1===t.nodeType?t:$t(V.current).body).getBoundingClientRect();return{top:e.top+In(e,p.vertical),left:e.left+Cn(e,p.horizontal)}}),[l,p.horizontal,p.vertical,d,g]),B=a.useCallback((function(t){return{vertical:In(t,I.vertical),horizontal:Cn(t,I.horizontal)}}),[I.horizontal,I.vertical]),U=a.useCallback((function(t){var e={width:t.offsetWidth,height:t.offsetHeight},n=B(e);if("none"===g)return{top:null,left:null,transformOrigin:On(n)};var r=G(),i=r.top-n.vertical,a=r.left-n.horizontal,o=i+e.height,s=a+e.width,u=xe(Rn(l)),c=u.innerHeight-S,h=u.innerWidth-S;if(i<S){var p=i-S;i-=p,n.vertical+=p}else if(o>c){var d=o-c;i-=d,n.vertical+=d}if(a<S){var f=a-S;a-=f,n.horizontal+=f}else if(s>h){var m=s-h;a-=m,n.horizontal+=m}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:On(n)}}),[l,g,G,B,S]),W=a.useState(T),H=(0,c.Z)(W,2),X=H[0],q=H[1],Y=a.useCallback((function(){var t=V.current;if(t){var e=U(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,q(!0)}}),[U]);a.useEffect((function(){T&&Y()})),a.useImperativeHandle(o,(function(){return T?{updatePosition:function(){Y()}}:null}),[T,Y]),a.useEffect((function(){if(T){var t=ye((function(){Y()})),e=xe(l);return e.addEventListener("resize",t),function(){t.clear(),e.removeEventListener("resize",t)}}}),[l,T,Y]);var J=D;"auto"!==D||O.muiSupportAuto||(J=void 0);var $=x||(l?$t(Rn(l)).body:void 0);return(0,A.jsx)(Dn,(0,r.Z)({BackdropProps:{invisible:!0},className:(0,s.Z)(j.root,y),container:$,open:T,ref:e,ownerState:Z},N,{children:(0,A.jsx)(O,(0,r.Z)({appear:!0,in:T,onEntering:function(t,e){F&&F(t,e),Y()},onExited:function(){q(!1)},timeout:J},P,{children:(0,A.jsx)(Mn,(0,r.Z)({elevation:w},_,{ref:K,className:(0,s.Z)(j.paper,_.className)},X?void 0:{style:(0,r.Z)({},_.style,{opacity:0})},{ownerState:Z,children:v}))}))}))}));function zn(t){return(0,X.Z)("MuiMenu",t)}(0,H.Z)("MuiMenu",["root","paper","list"]);var Pn=["onEntering"],Nn=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Vn={vertical:"top",horizontal:"right"},Kn={vertical:"top",horizontal:"left"},Zn=(0,d.ZP)(Fn,{shouldForwardProp:function(t){return(0,d.FO)(t)||"classes"===t},name:"MuiMenu",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),jn=(0,d.ZP)(ve,{name:"MuiMenu",slot:"Paper",overridesResolver:function(t,e){return e.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Gn=(0,d.ZP)(he,{name:"MuiMenu",slot:"List",overridesResolver:function(t,e){return e.list}})({outline:0}),Bn=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiMenu"}),o=n.autoFocus,c=void 0===o||o,l=n.children,h=n.disableAutoFocusItem,p=void 0!==h&&h,d=n.MenuListProps,m=void 0===d?{}:d,g=n.onClose,v=n.open,y=n.PaperProps,x=void 0===y?{}:y,b=n.PopoverClasses,w=n.transitionDuration,k=void 0===w?"auto":w,S=n.TransitionProps,T=(void 0===S?{}:S).onEntering,E=n.variant,_=void 0===E?"selectedMenu":E,L=(0,i.Z)(n.TransitionProps,Pn),I=(0,i.Z)(n,Nn),C=(0,Oe.Z)(),O="rtl"===C.direction,R=(0,r.Z)({},n,{autoFocus:c,disableAutoFocusItem:p,MenuListProps:m,onEntering:T,PaperProps:x,transitionDuration:k,TransitionProps:L,variant:_}),D=function(t){var e=t.classes;return(0,u.Z)({root:["root"],paper:["paper"],list:["list"]},zn,e)}(R),M=c&&!p&&v,F=a.useRef(null),z=-1;return a.Children.map(l,(function(t,e){a.isValidElement(t)&&(t.props.disabled||("selectedMenu"===_&&t.props.selected||-1===z)&&(z=e))})),(0,A.jsx)(Zn,(0,r.Z)({onClose:g,anchorOrigin:{vertical:"bottom",horizontal:O?"right":"left"},transformOrigin:O?Vn:Kn,PaperProps:(0,r.Z)({as:jn},x,{classes:(0,r.Z)({},x.classes,{root:D.paper})}),className:D.root,open:v,ref:e,transitionDuration:k,TransitionProps:(0,r.Z)({onEntering:function(t,e){F.current&&F.current.adjustStyleForScrollbar(t,C),T&&T(t,e)}},L),ownerState:R},I,{classes:b,children:(0,A.jsx)(Gn,(0,r.Z)({onKeyDown:function(t){"Tab"===t.key&&(t.preventDefault(),g&&g(t,"tabKeyDown"))},actions:F,autoFocus:c&&(-1===z||p),autoFocusItem:M,variant:_},m,{className:(0,s.Z)(D.list,m.className),children:l}))}))}));function Un(t){return(0,X.Z)("MuiNativeSelect",t)}var Wn=(0,H.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Hn=["className","disabled","error","IconComponent","inputRef","variant"],Xn=function(t){var e,n=t.ownerState,i=t.theme;return(0,r.Z)((e={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,r.Z)({},i.vars?{backgroundColor:"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===i.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,m.Z)(e,"&.".concat(Wn.disabled),{cursor:"default"}),(0,m.Z)(e,"&[multiple]",{height:"auto"}),(0,m.Z)(e,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(i.vars||i).palette.background.paper}),(0,m.Z)(e,"&&&",{paddingRight:24,minWidth:16}),e),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:(i.vars||i).shape.borderRadius,"&:focus":{borderRadius:(i.vars||i).shape.borderRadius},"&&&":{paddingRight:32}})},qn=(0,d.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:d.FO,overridesResolver:function(t,e){var n=t.ownerState;return[e.select,e[n.variant],n.error&&e.error,(0,m.Z)({},"&.".concat(Wn.multiple),e.multiple)]}})(Xn),Yn=function(t){var e=t.ownerState,n=t.theme;return(0,r.Z)((0,m.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active},"&.".concat(Wn.disabled),{color:(n.vars||n).palette.action.disabled}),e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},Jn=(0,d.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(t,e){var n=t.ownerState;return[e.icon,n.variant&&e["icon".concat((0,F.Z)(n.variant))],n.open&&e.iconOpen]}})(Yn),$n=a.forwardRef((function(t,e){var n=t.className,o=t.disabled,c=t.error,l=t.IconComponent,h=t.inputRef,p=t.variant,d=void 0===p?"standard":p,f=(0,i.Z)(t,Hn),m=(0,r.Z)({},t,{disabled:o,variant:d,error:c}),g=function(t){var e=t.classes,n=t.variant,r=t.disabled,i=t.multiple,a=t.open,o={select:["select",n,r&&"disabled",i&&"multiple",t.error&&"error"],icon:["icon","icon".concat((0,F.Z)(n)),a&&"iconOpen",r&&"disabled"]};return(0,u.Z)(o,Un,e)}(m);return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)(qn,(0,r.Z)({ownerState:m,className:(0,s.Z)(g.select,n),disabled:o,ref:h||e},f)),t.multiple?null:(0,A.jsx)(Jn,{as:l,ownerState:m,className:g.icon})]})}));var Qn=function(t){var e=t.controlled,n=t.default,r=(t.name,t.state,a.useRef(void 0!==e).current),i=a.useState(n),o=(0,c.Z)(i,2),s=o[0],u=o[1];return[r?e:s,a.useCallback((function(t){r||u(t)}),[])]};function tr(t){return(0,X.Z)("MuiSelect",t)}var er,nr=(0,H.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),rr=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],ir=(0,d.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(t,e){var n=t.ownerState;return[(0,m.Z)({},"&.".concat(nr.select),e.select),(0,m.Z)({},"&.".concat(nr.select),e[n.variant]),(0,m.Z)({},"&.".concat(nr.error),e.error),(0,m.Z)({},"&.".concat(nr.multiple),e.multiple)]}})(Xn,(0,m.Z)({},"&.".concat(nr.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),ar=(0,d.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(t,e){var n=t.ownerState;return[e.icon,n.variant&&e["icon".concat((0,F.Z)(n.variant))],n.open&&e.iconOpen]}})(Yn),or=(0,d.ZP)("input",{shouldForwardProp:function(t){return(0,d.Dz)(t)&&"classes"!==t},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(t,e){return e.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function sr(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function ur(t){return null==t||"string"===typeof t&&!t.trim()}var cr=a.forwardRef((function(t,e){var n=t["aria-describedby"],o=t["aria-label"],l=t.autoFocus,h=t.autoWidth,p=t.children,d=t.className,f=t.defaultOpen,m=t.defaultValue,g=t.disabled,v=t.displayEmpty,x=t.error,b=void 0!==x&&x,w=t.IconComponent,k=t.inputRef,S=t.labelId,T=t.MenuProps,E=void 0===T?{}:T,_=t.multiple,L=t.name,I=t.onBlur,C=t.onChange,O=t.onClose,R=t.onFocus,D=t.onOpen,M=t.open,P=t.readOnly,N=t.renderValue,V=t.SelectDisplayProps,K=void 0===V?{}:V,Z=t.tabIndex,j=t.value,G=t.variant,B=void 0===G?"standard":G,U=(0,i.Z)(t,rr),H=Qn({controlled:j,default:m,name:"Select"}),X=(0,c.Z)(H,2),q=X[0],Y=X[1],J=Qn({controlled:M,default:f,name:"Select"}),$=(0,c.Z)(J,2),Q=$[0],tt=$[1],et=a.useRef(null),nt=a.useRef(null),rt=a.useState(null),it=(0,c.Z)(rt,2),at=it[0],ot=it[1],st=a.useRef(null!=M).current,ut=a.useState(),ct=(0,c.Z)(ut,2),lt=ct[0],ht=ct[1],pt=(0,z.Z)(e,k),dt=a.useCallback((function(t){nt.current=t,t&&ot(t)}),[]),ft=null==at?void 0:at.parentNode;a.useImperativeHandle(pt,(function(){return{focus:function(){nt.current.focus()},node:et.current,value:q}}),[q]),a.useEffect((function(){f&&Q&&at&&!st&&(ht(h?null:ft.clientWidth),nt.current.focus())}),[at,h]),a.useEffect((function(){l&&nt.current.focus()}),[l]),a.useEffect((function(){if(S){var t=$t(nt.current).getElementById(S);if(t){var e=function(){getSelection().isCollapsed&&nt.current.focus()};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}}),[S]);var mt,gt,vt=function(t,e){t?D&&D(e):O&&O(e),st||(ht(h?null:ft.clientWidth),tt(t))},yt=a.Children.toArray(p),xt=function(t){return function(e){var n;if(e.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(q)?q.slice():[];var r=q.indexOf(t.props.value);-1===r?n.push(t.props.value):n.splice(r,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),q!==n&&(Y(n),C)){var i=e.nativeEvent||e,a=new i.constructor(i.type,i);Object.defineProperty(a,"target",{writable:!0,value:{value:n,name:L}}),C(a,t)}_||vt(!1,e)}}},bt=null!==at&&Q;delete U["aria-invalid"];var wt=[],kt=!1;(W({value:q})||v)&&(N?mt=N(q):kt=!0);var St=yt.map((function(t){if(!a.isValidElement(t))return null;var e;if(_){if(!Array.isArray(q))throw new Error((0,y.Z)(2));(e=q.some((function(e){return sr(e,t.props.value)})))&&kt&&wt.push(t.props.children)}else(e=sr(q,t.props.value))&&kt&&(gt=t.props.children);return e&&!0,a.cloneElement(t,{"aria-selected":e?"true":"false",onClick:xt(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:e,value:void 0,"data-value":t.props.value})}));kt&&(mt=_?0===wt.length?null:wt.reduce((function(t,e,n){return t.push(e),n<wt.length-1&&t.push(", "),t}),[]):gt);var Tt,At=lt;!h&&st&&at&&(At=ft.clientWidth),Tt="undefined"!==typeof Z?Z:g?null:0;var Et=K.id||(L?"mui-component-select-".concat(L):void 0),_t=(0,r.Z)({},t,{variant:B,value:q,open:bt,error:b}),Lt=function(t){var e=t.classes,n=t.variant,r=t.disabled,i=t.multiple,a=t.open,o={select:["select",n,r&&"disabled",i&&"multiple",t.error&&"error"],icon:["icon","icon".concat((0,F.Z)(n)),a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,u.Z)(o,tr,e)}(_t);return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)(ir,(0,r.Z)({ref:dt,tabIndex:Tt,role:"button","aria-disabled":g?"true":void 0,"aria-expanded":bt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[S,Et].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(t){if(!P){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),vt(!0,t))}},onMouseDown:g||P?null:function(t){0===t.button&&(t.preventDefault(),nt.current.focus(),vt(!0,t))},onBlur:function(t){!bt&&I&&(Object.defineProperty(t,"target",{writable:!0,value:{value:q,name:L}}),I(t))},onFocus:R},K,{ownerState:_t,className:(0,s.Z)(K.className,Lt.select,d),id:Et,children:ur(mt)?er||(er=(0,A.jsx)("span",{className:"notranslate",children:"\u200b"})):mt})),(0,A.jsx)(or,(0,r.Z)({"aria-invalid":b,value:Array.isArray(q)?q.join(","):q,name:L,ref:et,"aria-hidden":!0,onChange:function(t){var e=yt.find((function(e){return e.props.value===t.target.value}));void 0!==e&&(Y(e.props.value),C&&C(t,e))},tabIndex:-1,disabled:g,className:Lt.nativeInput,autoFocus:l,ownerState:_t},U)),(0,A.jsx)(ar,{as:w,className:Lt.icon,ownerState:_t}),(0,A.jsx)(Bn,(0,r.Z)({id:"menu-".concat(L||""),anchorEl:ft,open:bt,onClose:function(t){vt(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},E,{MenuListProps:(0,r.Z)({"aria-labelledby":S,role:"listbox",disableListWrap:!0},E.MenuListProps),PaperProps:(0,r.Z)({},E.PaperProps,{style:(0,r.Z)({minWidth:At},null!=E.PaperProps?E.PaperProps.style:null)}),children:St}))]})}));function lr(t){return(0,X.Z)("MuiSvgIcon",t)}(0,H.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var hr=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],pr=(0,d.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"inherit"!==n.color&&e["color".concat((0,F.Z)(n.color))],e["fontSize".concat((0,F.Z)(n.fontSize))]]}})((function(t){var e,n,r,i,a,o,s,u,c,l,h,p,d,f,m,g,v,y=t.theme,x=t.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(e=y.transitions)||null==(n=e.create)?void 0:n.call(e,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875rem"}[x.fontSize],color:null!=(h=null==(p=(y.vars||y).palette)||null==(d=p[x.color])?void 0:d.main)?h:{action:null==(f=(y.vars||y).palette)||null==(m=f.action)?void 0:m.active,disabled:null==(g=(y.vars||y).palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[x.color]}})),dr=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiSvgIcon"}),a=n.children,o=n.className,c=n.color,l=void 0===c?"inherit":c,h=n.component,p=void 0===h?"svg":h,d=n.fontSize,m=void 0===d?"medium":d,g=n.htmlColor,v=n.inheritViewBox,y=void 0!==v&&v,x=n.titleAccess,b=n.viewBox,w=void 0===b?"0 0 24 24":b,k=(0,i.Z)(n,hr),S=(0,r.Z)({},n,{color:l,component:p,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:y,viewBox:w}),T={};y||(T.viewBox=w);var E=function(t){var e=t.color,n=t.fontSize,r=t.classes,i={root:["root","inherit"!==e&&"color".concat((0,F.Z)(e)),"fontSize".concat((0,F.Z)(n))]};return(0,u.Z)(i,lr,r)}(S);return(0,A.jsxs)(pr,(0,r.Z)({as:p,className:(0,s.Z)(E.root,o),focusable:"false",color:g,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:e},T,k,{ownerState:S,children:[a,x?(0,A.jsx)("title",{children:x}):null]}))}));dr.muiName="SvgIcon";var fr=dr;var mr=function(t,e){function n(n,i){return(0,A.jsx)(fr,(0,r.Z)({"data-testid":"".concat(e,"Icon"),ref:i},n,{children:t}))}return n.muiName=fr.muiName,a.memo(a.forwardRef(n))}((0,A.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),gr=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],vr={name:"MuiSelect",overridesResolver:function(t,e){return e.root},shouldForwardProp:function(t){return(0,d.FO)(t)&&"variant"!==t},slot:"Root"},yr=(0,d.ZP)(ht,vr)(""),xr=(0,d.ZP)(Ct,vr)(""),br=(0,d.ZP)(xt,vr)(""),wr=a.forwardRef((function(t,e){var n=(0,f.Z)({name:"MuiSelect",props:t}),o=n.autoWidth,u=void 0!==o&&o,c=n.children,l=n.classes,h=void 0===l?{}:l,p=n.className,d=n.defaultOpen,m=void 0!==d&&d,g=n.displayEmpty,y=void 0!==g&&g,x=n.IconComponent,b=void 0===x?mr:x,w=n.id,k=n.input,S=n.inputProps,T=n.label,E=n.labelId,_=n.MenuProps,L=n.multiple,I=void 0!==L&&L,C=n.native,O=void 0!==C&&C,D=n.onClose,F=n.onOpen,P=n.open,N=n.renderValue,V=n.SelectDisplayProps,K=n.variant,Z=void 0===K?"outlined":K,j=(0,i.Z)(n,gr),G=O?$n:cr,B=R({props:n,muiFormControl:M(),states:["variant","error"]}),U=B.variant||Z,W=(0,r.Z)({},n,{variant:U,classes:h}),H=function(t){return t.classes}(W),X=k||{standard:(0,A.jsx)(yr,{ownerState:W}),outlined:(0,A.jsx)(xr,{label:T,ownerState:W}),filled:(0,A.jsx)(br,{ownerState:W})}[U],q=(0,z.Z)(e,X.ref);return(0,A.jsx)(a.Fragment,{children:a.cloneElement(X,(0,r.Z)({inputComponent:G,inputProps:(0,r.Z)({children:c,error:B.error,IconComponent:b,variant:U,type:void 0,multiple:I},O?{id:w}:{autoWidth:u,defaultOpen:m,displayEmpty:y,labelId:E,MenuProps:_,onClose:D,onOpen:F,open:P,renderValue:N,SelectDisplayProps:(0,r.Z)({id:w},V)},S,{classes:S?(0,v.Z)(H,S.classes):H},k?k.props.inputProps:{})},I&&O&&"outlined"===U?{notched:!0}:{},{ref:q,className:(0,s.Z)(X.props.className,p)},!k&&{variant:U},j))})}));wr.muiName="Select";var kr=wr;function Sr(t){return(0,X.Z)("MuiTextField",t)}(0,H.Z)("MuiTextField",["root"]);var Tr=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Ar={standard:ht,filled:xt,outlined:Ct},Er=(0,d.ZP)(Ut,{name:"MuiTextField",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),_r=a.forwardRef((function(t,e){var n=(0,f.Z)({props:t,name:"MuiTextField"}),a=n.autoComplete,o=n.autoFocus,c=void 0!==o&&o,l=n.children,h=n.className,d=n.color,m=void 0===d?"primary":d,g=n.defaultValue,v=n.disabled,y=void 0!==v&&v,x=n.error,b=void 0!==x&&x,w=n.FormHelperTextProps,k=n.fullWidth,S=void 0!==k&&k,T=n.helperText,E=n.id,_=n.InputLabelProps,L=n.inputProps,I=n.InputProps,C=n.inputRef,O=n.label,R=n.maxRows,D=n.minRows,M=n.multiline,F=void 0!==M&&M,z=n.name,P=n.onBlur,N=n.onChange,V=n.onClick,K=n.onFocus,Z=n.placeholder,j=n.required,G=void 0!==j&&j,B=n.rows,U=n.select,W=void 0!==U&&U,H=n.SelectProps,X=n.type,q=n.value,Y=n.variant,J=void 0===Y?"outlined":Y,$=(0,i.Z)(n,Tr),Q=(0,r.Z)({},n,{autoFocus:c,color:m,disabled:y,error:b,fullWidth:S,multiline:F,required:G,select:W,variant:J}),tt=function(t){var e=t.classes;return(0,u.Z)({root:["root"]},Sr,e)}(Q);var et={};"outlined"===J&&(_&&"undefined"!==typeof _.shrink&&(et.notched=_.shrink),et.label=O),W&&(H&&H.native||(et.id=void 0),et["aria-describedby"]=void 0);var nt=p(E),rt=T&&nt?"".concat(nt,"-helper-text"):void 0,it=O&&nt?"".concat(nt,"-label"):void 0,at=Ar[J],ot=(0,A.jsx)(at,(0,r.Z)({"aria-describedby":rt,autoComplete:a,autoFocus:c,defaultValue:g,fullWidth:S,multiline:F,name:z,rows:B,maxRows:R,minRows:D,type:X,value:q,id:nt,inputRef:C,onBlur:P,onChange:N,onFocus:K,onClick:V,placeholder:Z,inputProps:L},et,I));return(0,A.jsxs)(Er,(0,r.Z)({className:(0,s.Z)(tt.root,h),disabled:y,error:b,fullWidth:S,ref:e,required:G,color:m,variant:J,ownerState:Q},$,{children:[null!=O&&""!==O&&(0,A.jsx)(Kt,(0,r.Z)({htmlFor:nt,id:it},_,{children:O})),W?(0,A.jsx)(kr,(0,r.Z)({"aria-describedby":rt,id:nt,labelId:it,value:q,input:ot},H,{children:l})):ot,T&&(0,A.jsx)(Jt,(0,r.Z)({id:rt},w,{children:T}))]}))}))},890:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var r=n(3366),i=n(7462),a=n(2791),o=n(8182),s=n(8519),u=n(4419),c=n(7630),l=n(1046),h=n(4036),p=n(5878),d=n(1217);function f(t){return(0,d.Z)("MuiTypography",t)}(0,p.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=n(184),g=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],v=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,h.Z)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((function(t){var e=t.theme,n=t.ownerState;return(0,i.Z)({margin:0},n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b=a.forwardRef((function(t,e){var n=(0,l.Z)({props:t,name:"MuiTypography"}),a=function(t){return x[t]||t}(n.color),c=(0,s.Z)((0,i.Z)({},n,{color:a})),p=c.align,d=void 0===p?"inherit":p,b=c.className,w=c.component,k=c.gutterBottom,S=void 0!==k&&k,T=c.noWrap,A=void 0!==T&&T,E=c.paragraph,_=void 0!==E&&E,L=c.variant,I=void 0===L?"body1":L,C=c.variantMapping,O=void 0===C?y:C,R=(0,r.Z)(c,g),D=(0,i.Z)({},c,{align:d,color:a,className:b,component:w,gutterBottom:S,noWrap:A,paragraph:_,variant:I,variantMapping:O}),M=w||(_?"p":O[I]||y[I])||"span",F=function(t){var e=t.align,n=t.gutterBottom,r=t.noWrap,i=t.paragraph,a=t.variant,o=t.classes,s={root:["root",a,"inherit"!==t.align&&"align".concat((0,h.Z)(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,u.Z)(s,f,o)}(D);return(0,m.jsx)(v,(0,i.Z)({as:M,ref:e,ownerState:D,className:(0,o.Z)(F.root,b)},R))}))},7107:function(t,e,n){"use strict";n.d(e,{Z:function(){return j}});var r=n(7462),i=n(3366),a=n(6189),o=n(2466),s=n(5080),u=n(7416),c=n(104),l=n(4942);function h(t,e){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,t.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,t.up("sm"),{minHeight:64}),n)},e)}var p=n(2065),d={black:"#000",white:"#fff"},f={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},m={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},y={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},x={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},w=["mode","contrastThreshold","tonalOffset"],k={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},S={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function T(t,e,n,r){var i=r.light||r,a=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,p.$n)(t.main,i):"dark"===e&&(t.dark=(0,p._j)(t.main,a)))}function A(t){var e=t.mode,n=void 0===e?"light":e,s=t.contrastThreshold,u=void 0===s?3:s,c=t.tonalOffset,l=void 0===c?.2:c,h=(0,i.Z)(t,w),A=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[200],light:y[50],dark:y[400]}:{main:y[700],light:y[400],dark:y[800]}}(n),E=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[500],light:m[300],dark:m[700]}}(n),_=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[500],light:g[300],dark:g[700]}:{main:g[700],light:g[400],dark:g[800]}}(n),L=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:x[400],light:x[300],dark:x[700]}:{main:x[700],light:x[500],dark:x[900]}}(n),I=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[800],light:b[500],dark:b[900]}}(n),C=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function O(t){return(0,p.mi)(t,S.text.primary)>=u?S.text.primary:k.text.primary}var R=function(t){var e=t.color,n=t.name,i=t.mainShade,o=void 0===i?500:i,s=t.lightShade,u=void 0===s?300:s,c=t.darkShade,h=void 0===c?700:c;if(!(e=(0,r.Z)({},e)).main&&e[o]&&(e.main=e[o]),!e.hasOwnProperty("main"))throw new Error((0,a.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof e.main)throw new Error((0,a.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return T(e,"light",u,l),T(e,"dark",h,l),e.contrastText||(e.contrastText=O(e.main)),e},D={dark:S,light:k};return(0,o.Z)((0,r.Z)({common:(0,r.Z)({},d),mode:n,primary:R({color:A,name:"primary"}),secondary:R({color:E,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:_,name:"error"}),warning:R({color:C,name:"warning"}),info:R({color:L,name:"info"}),success:R({color:I,name:"success"}),grey:f,contrastThreshold:u,getContrastText:O,augmentColor:R,tonalOffset:l},D[n]),h)}var E=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function _(t){return Math.round(1e5*t)/1e5}var L={textTransform:"uppercase"},I='"Roboto", "Helvetica", "Arial", sans-serif';function C(t,e){var n="function"===typeof e?e(t):e,a=n.fontFamily,s=void 0===a?I:a,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,h=void 0===l?300:l,p=n.fontWeightRegular,d=void 0===p?400:p,f=n.fontWeightMedium,m=void 0===f?500:f,g=n.fontWeightBold,v=void 0===g?700:g,y=n.htmlFontSize,x=void 0===y?16:y,b=n.allVariants,w=n.pxToRem,k=(0,i.Z)(n,E);var S=c/14,T=w||function(t){return"".concat(t/x*S,"rem")},A=function(t,e,n,i,a){return(0,r.Z)({fontFamily:s,fontWeight:t,fontSize:T(e),lineHeight:n},s===I?{letterSpacing:"".concat(_(i/e),"em")}:{},a,b)},C={h1:A(h,96,1.167,-1.5),h2:A(h,60,1.2,-.5),h3:A(d,48,1.167,0),h4:A(d,34,1.235,.25),h5:A(d,24,1.334,0),h6:A(m,20,1.6,.15),subtitle1:A(d,16,1.75,.15),subtitle2:A(m,14,1.57,.1),body1:A(d,16,1.5,.15),body2:A(d,14,1.43,.15),button:A(m,14,1.75,.4,L),caption:A(d,12,1.66,.4),overline:A(d,12,2.66,1,L),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.Z)((0,r.Z)({htmlFontSize:x,pxToRem:T,fontFamily:s,fontSize:c,fontWeightLight:h,fontWeightRegular:d,fontWeightMedium:m,fontWeightBold:v},C),k,{clone:!1})}function O(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var R=["none",O(0,2,1,-1,0,1,1,0,0,1,3,0),O(0,3,1,-2,0,2,2,0,0,1,5,0),O(0,3,3,-2,0,3,4,0,0,1,8,0),O(0,2,4,-1,0,4,5,0,0,1,10,0),O(0,3,5,-1,0,5,8,0,0,1,14,0),O(0,3,5,-1,0,6,10,0,0,1,18,0),O(0,4,5,-2,0,7,10,1,0,2,16,1),O(0,5,5,-3,0,8,10,1,0,3,14,2),O(0,5,6,-3,0,9,12,1,0,3,16,2),O(0,6,6,-3,0,10,14,1,0,4,18,3),O(0,6,7,-4,0,11,15,1,0,4,20,3),O(0,7,8,-4,0,12,17,2,0,5,22,4),O(0,7,8,-4,0,13,19,2,0,5,24,4),O(0,7,9,-4,0,14,21,2,0,5,26,4),O(0,8,9,-5,0,15,22,2,0,6,28,5),O(0,8,10,-5,0,16,24,2,0,6,30,5),O(0,8,11,-5,0,17,26,2,0,6,32,5),O(0,9,11,-5,0,18,28,2,0,7,34,6),O(0,9,12,-6,0,19,29,2,0,7,36,6),O(0,10,13,-6,0,20,31,3,0,8,38,7),O(0,10,13,-6,0,21,33,3,0,8,40,7),O(0,10,14,-6,0,22,35,3,0,8,42,7),O(0,11,14,-7,0,23,36,3,0,9,44,8),O(0,11,15,-7,0,24,38,3,0,9,46,8)],D=["duration","easing","delay"],M={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},F={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function z(t){return"".concat(Math.round(t),"ms")}function P(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function N(t){var e=(0,r.Z)({},M,t.easing),n=(0,r.Z)({},F,t.duration);return(0,r.Z)({getAutoHeightDuration:P,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,o=void 0===a?n.standard:a,s=r.easing,u=void 0===s?e.easeInOut:s,c=r.delay,l=void 0===c?0:c;(0,i.Z)(r,D);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof o?o:z(o)," ").concat(u," ").concat("string"===typeof l?l:z(l))})).join(",")}},t,{easing:e,duration:n})}var V={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},K=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,l=t.palette,p=void 0===l?{}:l,d=t.transitions,f=void 0===d?{}:d,m=t.typography,g=void 0===m?{}:m,v=(0,i.Z)(t,K);if(t.vars)throw new Error((0,a.Z)(18));var y=A(p),x=(0,s.Z)(t),b=(0,o.Z)(x,{mixins:h(x.breakpoints,n),palette:y,shadows:R.slice(),typography:C(y,g),transitions:N(f),zIndex:(0,r.Z)({},V)});b=(0,o.Z)(b,v);for(var w=arguments.length,k=new Array(w>1?w-1:0),S=1;S<w;S++)k[S-1]=arguments[S];return(b=k.reduce((function(t,e){return(0,o.Z)(t,e)}),b)).unstable_sxConfig=(0,r.Z)({},u.Z,null==v?void 0:v.unstable_sxConfig),b.unstable_sx=function(t){return(0,c.Z)({sx:t,theme:this})},b}var j=Z},6482:function(t,e,n){"use strict";var r=(0,n(7107).Z)();e.Z=r},988:function(t,e){"use strict";e.Z="$$material"},7630:function(t,e,n){"use strict";n.d(e,{ZP:function(){return S},FO:function(){return b},Dz:function(){return w}});var r=n(3433),i=n(9439),a=n(3366),o=n(7462),s=n(2421),u=n(5080),c=n(7312),l=["variant"];function h(t){return 0===t.length}function p(t){var e=t.variant,n=(0,a.Z)(t,l),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?h(r)?t[e]:(0,c.Z)(t[e]):"".concat(h(r)?e:(0,c.Z)(e)).concat((0,c.Z)(t[e].toString()))})),r}var d=n(104),f=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function m(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var g=(0,u.Z)();function v(t){var e,n=t.defaultTheme,r=t.theme,i=t.themeId;return e=r,0===Object.keys(e).length?n:r[i]||r}var y=n(6482),x=n(988),b=function(t){return m(t)&&"classes"!==t},w=m,k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.themeId,n=t.defaultTheme,u=void 0===n?g:n,c=t.rootShouldForwardProp,l=void 0===c?m:c,h=t.slotShouldForwardProp,y=void 0===h?m:h,x=function(t){return(0,d.Z)((0,o.Z)({},t,{theme:v((0,o.Z)({},t,{defaultTheme:u,themeId:e}))}))};return x.__mui_systemSx=!0,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(t,(function(t){return t.filter((function(t){return!(null!=t&&t.__mui_systemSx)}))}));var c=n.name,h=n.slot,d=n.skipVariantsResolver,g=n.skipSx,b=n.overridesResolver,w=(0,a.Z)(n,f),k=void 0!==d?d:h&&"Root"!==h||!1,S=g||!1;var T=m;"Root"===h?T=l:h?T=y:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(T=void 0);var A=(0,s.ZP)(t,(0,o.Z)({shouldForwardProp:T,label:undefined},w)),E=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];var h=s?s.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(n){return t((0,o.Z)({},n,{theme:v((0,o.Z)({},n,{defaultTheme:u,themeId:e}))}))}:t})):[],d=n;c&&b&&h.push((function(t){var n=v((0,o.Z)({},t,{defaultTheme:u,themeId:e})),r=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null}(c,n);if(r){var a={};return Object.entries(r).forEach((function(e){var r=(0,i.Z)(e,2),s=r[0],u=r[1];a[s]="function"===typeof u?u((0,o.Z)({},t,{theme:n})):u})),b(t,a)}return null})),c&&!k&&h.push((function(t){var n=v((0,o.Z)({},t,{defaultTheme:u,themeId:e}));return function(t,e,n,r){var i,a,o=t.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&u.push(e[p(n.props)])})),u}(t,function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=p(t.props);r[e]=t.style})),r}(c,n),n,c)})),S||h.push(x);var f=h.length-s.length;if(Array.isArray(n)&&f>0){var m=new Array(f).fill("");(d=[].concat((0,r.Z)(n),(0,r.Z)(m))).raw=[].concat((0,r.Z)(n.raw),(0,r.Z)(m))}else"function"===typeof n&&n.__emotion_real!==n&&(d=function(t){return n((0,o.Z)({},t,{theme:v((0,o.Z)({},t,{defaultTheme:u,themeId:e}))}))});var g=A.apply(void 0,[d].concat((0,r.Z)(h)));return t.muiName&&(g.muiName=t.muiName),g};return A.withConfig&&(E.withConfig=A.withConfig),E}}({themeId:x.Z,defaultTheme:y.Z,rootShouldForwardProp:b}),S=k},3967:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});n(2791);var r=n(3459),i=n(6482),a=n(988);function o(){var t=(0,r.Z)(i.Z);return t[a.Z]||t}},1046:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(5735);var i=n(3459);function a(t){var e=t.props,n=t.name,a=t.defaultTheme,o=t.themeId,s=(0,i.Z)(a);o&&(s=s[o]||s);var u=function(t){var e=t.theme,n=t.name,i=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,r.Z)(e.components[n].defaultProps,i):i}({theme:s,name:n,props:e});return u}var o=n(6482),s=n(988);function u(t){return a({props:t.props,name:t.name,defaultTheme:o.Z,themeId:s.Z})}},4036:function(t,e,n){"use strict";var r=n(7312);e.Z=r.Z},2071:function(t,e,n){"use strict";var r=n(7563);e.Z=r.Z},2421:function(t,e,n){"use strict";n.d(e,{ZP:function(){return y},Co:function(){return x}});var r=n(7462),i=n(2791),a=n(9797),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,a.Z)((function(t){return o.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),u=n(2564),c=n(5438),l=n(9140),h=n(2561),p=s,d=function(t){return"theme"!==t},f=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?p:d},m=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},g=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return(0,c.hC)(e,n,r),(0,h.L)((function(){return(0,c.My)(e,n,r)})),null},v=function t(e,n){var a,o,s=e.__emotion_real===e,h=s&&e.__emotion_base||e;void 0!==n&&(a=n.label,o=n.target);var p=m(e,n,s),d=p||f(h),v=!d("as");return function(){var y=arguments,x=s&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==a&&x.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)x.push.apply(x,y);else{0,x.push(y[0][0]);for(var b=y.length,w=1;w<b;w++)x.push(y[w],y[0][w])}var k=(0,u.w)((function(t,e,n){var r=v&&t.as||h,a="",s=[],m=t;if(null==t.theme){for(var y in m={},t)m[y]=t[y];m.theme=i.useContext(u.T)}"string"===typeof t.className?a=(0,c.fp)(e.registered,s,t.className):null!=t.className&&(a=t.className+" ");var b=(0,l.O)(x.concat(s),e.registered,m);a+=e.key+"-"+b.name,void 0!==o&&(a+=" "+o);var w=v&&void 0===p?f(r):d,k={};for(var S in t)v&&"as"===S||w(S)&&(k[S]=t[S]);return k.className=a,k.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:e,serialized:b,isStringTag:"string"===typeof r}),i.createElement(r,k))}));return k.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",k.defaultProps=e.defaultProps,k.__emotion_real=k,k.__emotion_base=h,k.__emotion_styles=x,k.__emotion_forwardProp=p,Object.defineProperty(k,"toString",{value:function(){return"."+o}}),k.withComponent=function(e,i){return t(e,(0,r.Z)({},n,i,{shouldForwardProp:m(k,i,!0)})).apply(void 0,x)},k}}.bind();function y(t,e){return v(t,e)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){v[t]=v(t)}));var x=function(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},1184:function(t,e,n){"use strict";n.d(e,{L7:function(){return s},P$:function(){return u},VO:function(){return r},W8:function(){return o},k9:function(){return a}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(r[t],"px)")}};function a(t,e,n){var a=t.theme||{};if(Array.isArray(e)){var o=a.breakpoints||i;return e.reduce((function(t,r,i){return t[o.up(o.keys[i])]=n(e[i]),t}),{})}if("object"===typeof e){var s=a.breakpoints||i;return Object.keys(e).reduce((function(t,i){if(-1!==Object.keys(s.values||r).indexOf(i)){t[s.up(i)]=n(e[i],i)}else{var a=i;t[a]=e[a]}return t}),{})}return n(e)}function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{}))||{}}function s(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function u(t){var e,n=t.values,r=t.breakpoints,i=t.base||function(t,e){if("object"!==typeof t)return{};var n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((function(e,r){r<t.length&&(n[e]=!0)})):r.forEach((function(e){null!=t[e]&&(n[e]=!0)})),n}(n,r),a=Object.keys(i);return 0===a.length?n:a.reduce((function(t,r,i){return Array.isArray(n)?(t[r]=null!=n[i]?n[i]:n[e],e=i):"object"===typeof n?(t[r]=null!=n[r]?n[r]:n[e],e=r):t[r]=n,t}),{})}},2065:function(t,e,n){"use strict";n.d(e,{$n:function(){return h},Fq:function(){return c},_j:function(){return l},mi:function(){return u}});var r=n(6189);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function a(t){if(t.type)return t;if("#"===t.charAt(0))return a(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,t));var i,o=t.substring(e+1,t.length-1);if("color"===n){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return{type:n,values:o=o.map((function(t){return parseFloat(t)})),colorSpace:i}}function o(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function s(t){var e="hsl"===(t=a(t)).type||"hsla"===t.type?a(function(t){var e=(t=a(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-s*Math.max(Math.min(e-3,9-e,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===t.type&&(c+="a",l.push(e[3])),o({type:c,values:l})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function u(t,e){var n=s(t),r=s(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(t,e){return t=a(t),e=i(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,o(t)}function l(t,e){if(t=a(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return o(t)}function h(t,e){if(t=a(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return o(t)}},5080:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(7462),i=n(3366),a=n(2466),o=n(4942),s=["values","unit","step"],u=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return(0,r.Z)({},t,(0,o.Z)({},e.key,e.val))}),{})};var c={borderRadius:4},l=n(5682);var h=n(104),p=n(7416),d=["breakpoints","palette","spacing","shape"];var f=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,o=t.palette,f=void 0===o?{}:o,m=t.spacing,g=t.shape,v=void 0===g?{}:g,y=(0,i.Z)(t,d),x=function(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,a=t.unit,o=void 0===a?"px":a,c=t.step,l=void 0===c?5:c,h=(0,i.Z)(t,s),p=u(n),d=Object.keys(p);function f(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(o,")")}function m(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-l/100).concat(o,")")}function g(t,e){var r=d.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(o,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[d[r]]?n[d[r]]:e)-l/100).concat(o,")")}return(0,r.Z)({keys:d,values:p,up:f,down:m,between:g,only:function(t){return d.indexOf(t)+1<d.length?g(t,d[d.indexOf(t)+1]):f(t)},not:function(t){var e=d.indexOf(t);return 0===e?f(d[1]):e===d.length-1?m(d[e]):g(t,d[d.indexOf(t)+1]).replace("@media","@media not all and")},unit:o},h)}(n),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=(0,l.hB)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(m),w=(0,a.Z)({breakpoints:x,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},f),spacing:b,shape:(0,r.Z)({},c,v)},y),k=arguments.length,S=new Array(k>1?k-1:0),T=1;T<k;T++)S[T-1]=arguments[T];return(w=S.reduce((function(t,e){return(0,a.Z)(t,e)}),w)).unstable_sxConfig=(0,r.Z)({},p.Z,null==y?void 0:y.unstable_sxConfig),w.unstable_sx=function(t){return(0,h.Z)({sx:t,theme:this})},w}},8247:function(t,e,n){"use strict";var r=n(2466);e.Z=function(t,e){return e?(0,r.Z)(t,e,{clone:!1}):t}},5682:function(t,e,n){"use strict";n.d(e,{hB:function(){return m},eI:function(){return f},NA:function(){return g},e6:function(){return x},o3:function(){return b}});var r=n(9439),i=n(1184),a=n(8529),o=n(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!c[t])return[t];t=c[t]}var e=t.split(""),n=(0,r.Z)(e,2),i=n[0],a=n[1],o=s[i],l=u[a]||"";return Array.isArray(l)?l.map((function(t){return o+t})):[o+l]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(h,p);function f(t,e,n,r){var i,o=null!=(i=(0,a.DW)(t,e,!1))?i:n;return"number"===typeof o?function(t){return"string"===typeof t?t:o*t}:Array.isArray(o)?function(t){return"string"===typeof t?t:o[t]}:"function"===typeof o?o:function(){}}function m(t){return f(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function v(t,e,n,r){if(-1===e.indexOf(n))return null;var a=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=g(e,n),t}),{})}}(l(n),r),o=t[n];return(0,i.k9)(t,o,a)}function y(t,e){var n=m(t.theme);return Object.keys(t).map((function(r){return v(t,e,r,n)})).reduce(o.Z,{})}function x(t){return y(t,h)}function b(t){return y(t,p)}function w(t){return y(t,d)}x.propTypes={},x.filterProps=h,b.propTypes={},b.filterProps=p,w.propTypes={},w.filterProps=d},8529:function(t,e,n){"use strict";n.d(e,{DW:function(){return o},Jq:function(){return s}});var r=n(4942),i=n(7312),a=n(1184);function o(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){var r="vars.".concat(e).split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t);if(null!=r)return r}return e.split(".").reduce((function(t,e){return t&&null!=t[e]?t[e]:null}),t)}function s(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:o(t,n)||i,e&&(r=e(r,i,t)),r}e.ZP=function(t){var e=t.prop,n=t.cssProperty,u=void 0===n?t.prop:n,c=t.themeKey,l=t.transform,h=function(t){if(null==t[e])return null;var n=t[e],h=o(t.theme,c)||{};return(0,a.k9)(t,n,(function(t){var n=s(h,l,t);return t===n&&"string"===typeof t&&(n=s(h,l,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===u?n:(0,r.Z)({},u,n)}))};return h.propTypes={},h.filterProps=[e],h}},7416:function(t,e,n){"use strict";n.d(e,{Z:function(){return O}});var r=n(5682),i=n(8529),a=n(8247);var o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),i=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?(0,a.Z)(e,r[n](t)):e}),{})};return i.propTypes={},i.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),i},s=n(1184);function u(t){return"number"!==typeof t?t:"".concat(t,"px solid")}var c=(0,i.ZP)({prop:"border",themeKey:"borders",transform:u}),l=(0,i.ZP)({prop:"borderTop",themeKey:"borders",transform:u}),h=(0,i.ZP)({prop:"borderRight",themeKey:"borders",transform:u}),p=(0,i.ZP)({prop:"borderBottom",themeKey:"borders",transform:u}),d=(0,i.ZP)({prop:"borderLeft",themeKey:"borders",transform:u}),f=(0,i.ZP)({prop:"borderColor",themeKey:"palette"}),m=(0,i.ZP)({prop:"borderTopColor",themeKey:"palette"}),g=(0,i.ZP)({prop:"borderRightColor",themeKey:"palette"}),v=(0,i.ZP)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,i.ZP)({prop:"borderLeftColor",themeKey:"palette"}),x=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=(0,r.eI)(t.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(t,t.borderRadius,(function(t){return{borderRadius:(0,r.NA)(e,t)}}))}return null};x.propTypes={},x.filterProps=["borderRadius"];o(c,l,h,p,d,f,m,g,v,y,x);var b=function(t){if(void 0!==t.gap&&null!==t.gap){var e=(0,r.eI)(t.theme,"spacing",8,"gap");return(0,s.k9)(t,t.gap,(function(t){return{gap:(0,r.NA)(e,t)}}))}return null};b.propTypes={},b.filterProps=["gap"];var w=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=(0,r.eI)(t.theme,"spacing",8,"columnGap");return(0,s.k9)(t,t.columnGap,(function(t){return{columnGap:(0,r.NA)(e,t)}}))}return null};w.propTypes={},w.filterProps=["columnGap"];var k=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=(0,r.eI)(t.theme,"spacing",8,"rowGap");return(0,s.k9)(t,t.rowGap,(function(t){return{rowGap:(0,r.NA)(e,t)}}))}return null};k.propTypes={},k.filterProps=["rowGap"];o(b,w,k,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function S(t,e){return"grey"===e?e:t}o((0,i.ZP)({prop:"color",themeKey:"palette",transform:S}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:S}));function T(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var A=(0,i.ZP)({prop:"width",transform:T}),E=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return(0,s.k9)(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||s.VO[e]||T(e)}}))}return null};E.filterProps=["maxWidth"];var _=(0,i.ZP)({prop:"minWidth",transform:T}),L=(0,i.ZP)({prop:"height",transform:T}),I=(0,i.ZP)({prop:"maxHeight",transform:T}),C=(0,i.ZP)({prop:"minHeight",transform:T}),O=((0,i.ZP)({prop:"size",cssProperty:"width",transform:T}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:T}),o(A,E,_,L,I,C,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:u},borderTop:{themeKey:"borders",transform:u},borderRight:{themeKey:"borders",transform:u},borderBottom:{themeKey:"borders",transform:u},borderLeft:{themeKey:"borders",transform:u},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:b},rowGap:{style:k},columnGap:{style:w},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:T},maxWidth:{style:E},minWidth:{transform:T},height:{transform:T},maxHeight:{transform:T},minHeight:{transform:T},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8519:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(3433),i=n(7462),a=n(3366),o=n(2466),s=n(7416),u=["sx"],c=function(t){var e,n,r={systemProps:{},otherProps:{}},i=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:s.Z;return Object.keys(t).forEach((function(e){i[e]?r.systemProps[e]=t[e]:r.otherProps[e]=t[e]})),r};function l(t){var e,n=t.sx,s=(0,a.Z)(t,u),l=c(s),h=l.systemProps,p=l.otherProps;return e=Array.isArray(n)?[h].concat((0,r.Z)(n)):"function"===typeof n?function(){var t=n.apply(void 0,arguments);return(0,o.P)(t)?(0,i.Z)({},h,t):h}:(0,i.Z)({},h,n),(0,i.Z)({},p,{sx:e})}},104:function(t,e,n){"use strict";var r=n(4942),i=n(7312),a=n(8247),o=n(8529),s=n(1184),u=n(7416);var c=function(){function t(t,e,n,a){var u,c=(u={},(0,r.Z)(u,t,e),(0,r.Z)(u,"theme",n),u),l=a[t];if(!l)return(0,r.Z)({},t,e);var h=l.cssProperty,p=void 0===h?t:h,d=l.themeKey,f=l.transform,m=l.style;if(null==e)return null;if("typography"===d&&"inherit"===e)return(0,r.Z)({},t,e);var g=(0,o.DW)(n,d)||{};if(m)return m(c);return(0,s.k9)(c,e,(function(e){var n=(0,o.Jq)(g,f,e);return e===n&&"string"===typeof e&&(n=(0,o.Jq)(g,f,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===p?n:(0,r.Z)({},p,n)}))}return function e(n){var i,o=n||{},c=o.sx,l=o.theme,h=void 0===l?{}:l;if(!c)return null;var p=null!=(i=h.unstable_sxConfig)?i:u.Z;function d(n){var i=n;if("function"===typeof n)i=n(h);else if("object"!==typeof n)return n;if(!i)return null;var o=(0,s.W8)(h.breakpoints),u=Object.keys(o),c=o;return Object.keys(i).forEach((function(n){var o,u,l=(o=i[n],u=h,"function"===typeof o?o(u):o);if(null!==l&&void 0!==l)if("object"===typeof l)if(p[n])c=(0,a.Z)(c,t(n,l,h,p));else{var d=(0,s.k9)({theme:h},l,(function(t){return(0,r.Z)({},n,t)}));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}(d,l)?c=(0,a.Z)(c,d):c[n]=e({sx:l,theme:h})}else c=(0,a.Z)(c,t(n,l,h,p))})),(0,s.L7)(u,c)}return Array.isArray(c)?c.map(d):d(c)}}();c.filterProps=["sx"],e.Z=c},3459:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(5080),i=n(2791),a=n(2564);var o=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=i.useContext(a.T);return n&&(t=n,0!==Object.keys(t).length)?n:e},s=(0,r.Z)();var u=function(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s)}},5902:function(t,e){"use strict";var n=function(t){return t},r=function(){var t=n;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=n}}}();e.Z=r},7312:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6189);function i(t){if("string"!==typeof t)throw new Error((0,r.Z)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},4419:function(t,e,n){"use strict";function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){if(r){var i=e(r);""!==i&&t.push(i),n&&n[r]&&t.push(n[r])}return t}),[]).join(" ")})),r}n.d(e,{Z:function(){return r}})},2466:function(t,e,n){"use strict";n.d(e,{P:function(){return i},Z:function(){return o}});var r=n(1413);function i(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function a(t){if(!i(t))return t;var e={};return Object.keys(t).forEach((function(n){e[n]=a(t[n])})),e}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?s[r]=o(t[r],e[r],n):n.clone?s[r]=i(e[r])?a(e[r]):e[r]:s[r]=e[r])})),s}},6189:function(t,e,n){"use strict";function r(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{Z:function(){return r}})},1217:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[e];return a?"".concat(n,"-").concat(a):"".concat(r.Z.generate(t),"-").concat(e)}},5878:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1217);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return e.forEach((function(e){i[e]=(0,r.Z)(t,e,n)})),i}},5735:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1413);function i(t,e){var n=(0,r.Z)({},e);return Object.keys(t).forEach((function(a){if(a.toString().match(/^(components|slots)$/))n[a]=(0,r.Z)((0,r.Z)({},t[a]),n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){var o=t[a]||{},s=e[a];n[a]={},s&&Object.keys(s)?o&&Object.keys(o)?(n[a]=(0,r.Z)({},s),Object.keys(o).forEach((function(t){n[a][t]=i(o[t],s[t])}))):n[a]=s:n[a]=o}else void 0===n[a]&&(n[a]=t[a])})),n}},2971:function(t,e,n){"use strict";function r(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{Z:function(){return r}})},5721:function(t,e,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;e.Z=i},8956:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2791),i=n(5721);function a(t){var e=r.useRef(t);return(0,i.Z)((function(){e.current=t})),r.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}},7563:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2791),i=n(2971);function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.useMemo((function(){return e.every((function(t){return null==t}))?null:function(t){e.forEach((function(e){(0,i.Z)(e,t)}))}}),e)}},1851:function(t,e,n){var r=n(7061).default,i=n(7156).default,a=n(861).default,o=n(6115).default,s=n(8416).default,u=n(1588).default,c=n(3808).default,l=n(1655).default,h=n(6389).default,p=n(7424).default,d=n(2122).default,f=n(6690).default,m=n(9728).default;!function(t){"use strict";function e(t){return Math.max(0,t)}function g(t,e){return t<=0?0:e}var v=Object.freeze({__proto__:null,activate:e,measure:g});function y(t){return 1/(1+Math.exp(-t))}function x(t,e){return t*(1-t)*e}var b=Object.freeze({__proto__:null,activate:y,measure:x});function w(t){return Math.tanh(t)}function k(t,e){return(1-t*t)*e}var S=Object.freeze({__proto__:null,activate:w,measure:k});function T(t){return t>0?t:.01*t}function A(t,e){return t>0?e:.01*e}var E=Object.freeze({__proto__:null,activate:T,measure:A}),_=Object.freeze({__proto__:null,relu:v,sigmoid:b,tanh:S,leakyRelu:E}),L=function(){function t(e){f(this,t),this.json={avgs:{error:0,iterations:0,testTime:0,trainTime:0},stats:{total:0,testSize:0,trainSize:0},sets:[]},this.initClassifier=e}return m(t,[{key:"testPartition",value:function(t,e,n){var r=this.initClassifier(),i=Date.now(),a=r.train(e,t),o=Date.now(),s=r.test(n),u=Date.now();return d(d({},s),{},{trainTime:o-i,testTime:u-o,iterations:a.iterations,error:a.error,total:s.total,network:r.toJSON()})}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}},{key:"train",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(e.length<r)throw new Error("Training set size is too small for ".concat(e.length," k folds of ").concat(r));this.shuffleArray(e);for(var i=e.length/r,a={trainTime:0,testTime:0,iterations:0,error:0},o={total:0,testSize:0,trainSize:0},s={total:0,testSize:0,trainSize:0,truePos:0,trueNeg:0,falsePos:0,falseNeg:0,precision:0,recall:0,accuracy:0},u=[],c=null,l=0;l<r;l++){var h=e.slice(0),p=h.splice(l*i,i),d=h,f=this.testPartition(n,d,p);null===c&&(c=f.hasOwnProperty("falseNeg")&&f.hasOwnProperty("falsePos")&&f.hasOwnProperty("trueNeg")&&f.hasOwnProperty("truePos"))&&Object.assign(o,s),a.iterations+=f.iterations,a.testTime+=f.testTime,a.trainTime+=f.trainTime,a.error+=f.error,o.total+=f.total,t.isBinaryStats(o)&&t.isBinaryPartitionResults(f)&&(o.accuracy+=f.accuracy,o.falseNeg+=f.falseNeg,o.falsePos+=f.falsePos,o.precision+=f.precision,o.recall+=f.recall,o.trueNeg+=f.trueNeg,o.truePos+=f.truePos),u.push(f)}return a.error/=r,a.iterations/=r,a.testTime/=r,a.trainTime/=r,t.isBinaryStats(o)&&(o.precision=o.truePos/(o.truePos+o.falsePos),o.recall=o.truePos/(o.truePos+o.falseNeg),o.accuracy=(o.trueNeg+o.truePos)/o.total),o.testSize=i,o.trainSize=e.length-i,this.json={avgs:a,stats:o,sets:u},this.json}},{key:"toNeuralNetwork",value:function(){return this.fromJSON(this.json)}},{key:"toJSON",value:function(){return this.json}},{key:"fromJSON",value:function(t){var e=t.sets.reduce((function(t,e){return t.error<e.error?t:e}));return this.initClassifier().fromJSON(e.network)}}]),t}();L.isBinaryStats=function(t){return void 0!==t.accuracy},L.isBinaryResults=function(t){return void 0!==t.stats.accuracy},L.isBinaryPartitionResults=function(t){return void 0!==t.accuracy};var I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function C(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return O(t,void 0===e||null===e?n.path:e)}},n.exports),n.exports}function O(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var R=C((function(t,e){var n;n=function(){return function(){function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof O&&O;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,(function(t){return i(e[o][1][t]||t)}),l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof O&&O,o=0;o<r.length;o++)i(r[o]);return i}return t}()({1:[function(t,e,n){!function(t,r){r("object"===typeof n&&"undefined"!==typeof e?n:(t=t||self).acorn={})}(this,(function(t){var e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,a="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",o="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",s=new RegExp("["+a+"]"),u=new RegExp("["+a+o+"]");a=o=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],l=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&s.test(String.fromCharCode(t)):!1!==e&&h(t,c)))}function d(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(h(t,c)||h(t,l)))))}var f=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function m(t,e){return new f(t,{beforeExpr:!0,binop:e})}var g={beforeExpr:!0},v={startsExpr:!0},y={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,y[t]=new f(t,e)}var b={num:new f("num",v),regexp:new f("regexp",v),string:new f("string",v),name:new f("name",v),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",g),semi:new f(";",g),colon:new f(":",g),dot:new f("."),question:new f("?",g),arrow:new f("=>",g),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",g),backQuote:new f("`",v),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new f("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",g),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",g),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",g),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",v),_if:x("if"),_return:x("return",g),_switch:x("switch"),_throw:x("throw",g),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",v),_super:x("super",v),_class:x("class",v),_extends:x("extends",g),_export:x("export"),_import:x("import",v),_null:x("null",v),_true:x("true",v),_false:x("false",v),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,k=new RegExp(w.source,"g");function S(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,_=E.hasOwnProperty,L=E.toString;function I(t,e){return _.call(t,e)}var C=Array.isArray||function(t){return"[object Array]"===L.call(t)};function O(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var D=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function M(t,e){for(var n=1,r=0;;){k.lastIndex=r;var i=k.exec(t);if(!(i&&i.index<e))return new R(n,e-r);++n,r=i.index+i[0].length}}var F={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function z(t){var e={};for(var n in F)e[n]=t&&I(t,n)?t[n]:F[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),C(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return C(e.onComment)&&(e.onComment=P(e,e.onComment)),e}function P(t,e){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(u.loc=new D(this,o,s)),t.ranges&&(u.range=[i,a]),e.push(u)}}var N=1,V=2,K=N|V,Z=4,j=8,G=16,B=32,U=64,W=128;function H(t,e){return V|(t?Z:0)|(e?j:0)}var X=0,q=1,Y=2,J=3,$=4,Q=5,tt=function(t,n,i){this.options=t=z(t),this.sourceFile=t.sourceFile,this.keywords=O(r[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var a="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(a=e[o]);o--);"module"===t.sourceType&&(a+=" await")}this.reservedWords=O(a);var s=(a?a+" ":"")+e.strict;this.reservedWordsStrict=O(s),this.reservedWordsStrictBind=O(s+" "+e.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(N),this.regexpState=null},et={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};tt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},et.inFunction.get=function(){return(this.currentVarScope().flags&V)>0},et.inGenerator.get=function(){return(this.currentVarScope().flags&j)>0},et.inAsync.get=function(){return(this.currentVarScope().flags&Z)>0},et.allowSuper.get=function(){return(this.currentThisScope().flags&U)>0},et.allowDirectSuper.get=function(){return(this.currentThisScope().flags&W)>0},et.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},tt.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&V)>0},tt.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},tt.parse=function(t,e){return new this(e,t).parse()},tt.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},tt.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(tt.prototype,et);var nt=tt.prototype,rt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function it(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}nt.strictDirective=function(t){for(;;){A.lastIndex=t,t+=A.exec(this.input)[0].length;var e=rt.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,A.lastIndex=t,t+=A.exec(this.input)[0].length,";"===this.input[t]&&t++}},nt.eat=function(t){return this.type===t&&(this.next(),!0)},nt.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},nt.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},nt.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},nt.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},nt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},nt.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},nt.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},nt.expect=function(t){this.eat(t)||this.unexpected()},nt.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},nt.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},nt.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},nt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},nt.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var at=tt.prototype;at.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var ot={kind:"loop"},st={kind:"switch"};at.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(p(r,!0)){for(var a=n+1;d(this.input.charCodeAt(a),!0);)++a;var o=this.input.slice(n,a);if(!i.test(o))return!0}return!1},at.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length;return!w.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!d(this.input.charAt(e+8)))},at.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(a,i.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){A.lastIndex=this.pos;var o=A.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var u=this.value,c=this.parseExpression();return i===b.name&&"Identifier"===c.type&&this.eat(b.colon)?this.parseLabeledStatement(a,u,c,t):this.parseExpressionStatement(a,c)}},at.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},at.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},at.parseDoStatement=function(t){return this.next(),this.labels.push(ot),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},at.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ot),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new it,o=this.parseExpression(!0,a);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},at.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,ct|(n?0:lt),!1,e)},at.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},at.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},at.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(st),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},at.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ut=[];at.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();if(this.next(),this.eat(b.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?B:0),this.checkLVal(e.param,n?$:Y),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},at.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},at.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ot),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},at.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},at.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},at.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===b._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},at.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},at.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(b.braceL),t&&this.enterScope(0);!this.eat(b.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},at.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},at.parseForIn=function(t,e){var n=this.type===b._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},at.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return t},at.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?q:Y,!1)};var ct=1,lt=2,ht=4;at.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&e&lt&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&ct&&(t.id=e&ht&&this.type!==b.name?null:this.parseIdent(),!t.id||e&lt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?q:Y:J));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(t.async,t.generator)),e&ct||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&ct?"FunctionDeclaration":"FunctionExpression")},at.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},at.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},at.parseClassElement=function(t){var e=this;if(this.eat(b.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===b.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(b.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,i,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},at.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},at.parseClassId=function(t,e){this.type===b.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,Y,!1)):(!0===e&&this.unexpected(),t.id=null)},at.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},at.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.expectContextual("from"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,ct|ht,!1,n)}else if(this.type===b._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},at.checkExport=function(t,e,n){t&&(I(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},at.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},at.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},at.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},at.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},at.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=ut,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},at.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,Y),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,Y),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,Y),t.push(this.finishNode(i,"ImportSpecifier"))}return t},at.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},at.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var pt=tt.prototype;pt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},pt.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},pt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},pt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},pt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},pt.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(b.comma),e&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},pt.parseBindingListItem=function(t){return t},pt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},pt.checkLVal=function(t,e,n){switch(void 0===e&&(e=X),t.type){case"Identifier":e===Y&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(I(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==X&&e!==Q&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var dt=tt.prototype;dt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[r="$"+r];o?("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=e[r]={init:!1,get:!1,set:!1},o[a]=!0}}},dt.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===b.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},dt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new it,r=!0);var o=this.start,s=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var c=this.startNodeAt(o,s);return c.operator=this.value,c.left=this.type===b.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),u},dt.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(b.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},dt.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},dt.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==b._in)&&a>r){var o=this.type===b.logicalOR||this.type===b.logicalAND,s=this.value;this.next();var u=this.start,c=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,a,i),h=this.buildBinary(e,n,t,l,s,o);return this.parseExprOp(h,e,n,r,i)}return t},dt.buildBinary=function(t,e,n,r,i,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},dt.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===b.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},dt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},dt.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},dt.parseSubscript=function(t,e,n,r,i){var a=this.eat(b.bracketL);if(a||this.eat(b.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(b.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var s=new it,u=this.yieldPos,c=this.awaitPos,l=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=c,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=l||this.awaitIdentPos;var p=this.startNodeAt(e,n);p.callee=t,p.arguments=h,t=this.finishNode(p,"CallExpression")}else if(this.type===b.backQuote){var d=this.startNodeAt(e,n);d.tag=t,d.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(d,"TaggedTemplateExpression")}return t},dt.parseExprAtom=function(t){this.type===b.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(e,"Super");case b._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case b.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===b.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case b.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(e=this.startNode()).value=this.type===b._null?null:this.type===b._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case b.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),c;case b.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case b.braceL:return this.parseObj(!1,t);case b._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},dt.parseExprImport=function(){var t=this.startNode();if(this.next(),this.type===b.parenL)return this.parseDynamicImport(t);this.unexpected()},dt.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var e=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},dt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},dt.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},dt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],c=!0,l=!1,h=new it,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){l=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,u);u.length&&!l||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,u.length>1?((e=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(e,"SequenceExpression",f,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},dt.parseParenItem=function(t){return t},dt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var ft=[];dt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=ft,this.finishNode(t,"NewExpression")},dt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},dt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},dt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},dt.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},dt.parseProperty=function(t,e){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===b.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===b.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(b.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(o,e)):r=!1,this.parsePropertyValue(o,t,n,r,i,a,e,s),this.finishNode(o,"Property")},dt.parsePropertyValue=function(t,e,n,r,i,a,o,s){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===b.comma||this.type===b.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===b.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var c=t.value.start;"get"===t.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},dt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},dt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},dt.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(e,r.generator)|U|(n?W:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},dt.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(H(n,!1)|G),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},dt.parseFunctionBody=function(t,e,n){var r=e&&this.type!==b.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,Q),this.strict=i},dt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},dt.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,q,e?null:n)}},dt.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===b.comma?o=null:this.type===b.ellipsis?(o=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},dt.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},dt.parseIdent=function(t,e){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},dt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(b.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},dt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var mt=tt.prototype;mt.raise=function(t,e){var n=M(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},mt.raiseRecoverable=mt.raise,mt.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var gt=tt.prototype,vt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};gt.enterScope=function(t){this.scopeStack.push(new vt(t))},gt.exitScope=function(){this.scopeStack.pop()},gt.treatFunctionsAsVarInScope=function(t){return t.flags&V||!this.inModule&&t.flags&N},gt.declareName=function(t,e,n){var r=!1;if(e===Y){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&i.flags&N&&delete this.undefinedExports[t]}else if(e===$)this.currentScope().lexical.push(t);else if(e===J){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(s.flags&B&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){r=!0;break}if(s.var.push(t),this.inModule&&s.flags&N&&delete this.undefinedExports[t],s.flags&K)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},gt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},gt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},gt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&K)return e}},gt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&K&&!(e.flags&G))return e}};var yt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new D(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},xt=tt.prototype;function bt(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}xt.startNode=function(){return new yt(this,this.start,this.startLoc)},xt.startNodeAt=function(t,e){return new yt(this,t,e)},xt.finishNode=function(t,e){return bt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},xt.finishNodeAt=function(t,e,n,r){return bt.call(this,t,e,n,r)};var wt=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},kt={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},St=tt.prototype;St.initialContext=function(){return[kt.b_stat]},St.braceIsBlock=function(t){var e=this.curContext();return e===kt.f_expr||e===kt.f_stat||(t!==b.colon||e!==kt.b_stat&&e!==kt.b_expr?t===b._return||t===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?e===kt.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!e.isExpr)},St.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},St.updateContext=function(t){var e,n=this.type;n.keyword&&t===b.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===kt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?kt.b_stat:kt.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(kt.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?kt.p_stat:kt.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b.semi||t===b._else||t===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===kt.b_stat?this.context.push(kt.f_stat):this.context.push(kt.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===kt.q_tmpl?this.context.pop():this.context.push(kt.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var e=this.context.length-1;this.context[e]===kt.f_expr?this.context[e]=kt.f_expr_gen:this.context[e]=kt.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",At=Tt+" Extended_Pictographic",Et={9:Tt,10:At,11:At},_t="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Lt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",It=Lt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ct={9:Lt,10:It,11:It+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},Ot={};function Rt(t){var e=Ot[t]={binary:O(Et[t]+" "+_t),nonBinary:{General_Category:O(_t),Script:O(Ct[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Rt(9),Rt(10),Rt(11);var Dt=tt.prototype,Mt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Ot[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Ft(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function zt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Pt(t){return p(t,!0)||36===t||95===t}function Nt(t){return d(t,!0)||36===t||95===t||8204===t||8205===t}function Vt(t){return t>=65&&t<=90||t>=97&&t<=122}function Kt(t){return t>=0&&t<=1114111}function Zt(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function jt(t){return Vt(t)||95===t}function Gt(t){return jt(t)||Bt(t)}function Bt(t){return t>=48&&t<=57}function Ut(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Wt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ht(t){return t>=48&&t<=55}Mt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Mt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Mt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);if(!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var i=e.charCodeAt(t+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},Mt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r,i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n||(r=e.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Mt.prototype.current=function(){return this.at(this.pos)},Mt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Mt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Mt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Dt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Dt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Dt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},Dt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Dt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Dt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Dt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Dt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Dt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Dt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Dt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Dt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Dt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Dt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Dt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Dt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Dt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!zt(e)&&(t.lastIntValue=e,t.advance(),!0)},Dt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!zt(n);)t.advance();return t.pos!==e},Dt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Dt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Dt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Dt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ft(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ft(t.lastIntValue);return!0}return!1},Dt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),Pt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),Nt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Dt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Dt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Dt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Dt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Dt.regexp_eatZero=function(t){return 48===t.current()&&!Bt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Dt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Dt.regexp_eatControlLetter=function(t){var e=t.current();return!!Vt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Dt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(i>=56320&&i<=57343)return t.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}t.pos=r,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Kt(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Dt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Dt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Dt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Zt(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Dt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},Dt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){I(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Dt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Dt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";jt(e=t.current());)t.lastStringValue+=Ft(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Gt(e=t.current());)t.lastStringValue+=Ft(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Dt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Dt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Dt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Ht(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Dt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Dt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Bt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Dt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Dt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Bt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Dt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Ut(n=t.current());)t.lastIntValue=16*t.lastIntValue+Wt(n),t.advance();return t.pos!==e},Dt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Dt.regexp_eatOctalDigit=function(t){var e=t.current();return Ht(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Dt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Ut(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Wt(i),t.advance()}return!0};var Xt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new D(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qt=tt.prototype;function Yt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}qt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},qt.getToken=function(){return this.next(),new Xt(this)},"undefined"!==typeof Symbol&&(qt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),qt.curContext=function(){return this.context[this.context.length-1]},qt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},qt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},qt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},qt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(k.lastIndex=n;(t=k.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},qt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},qt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},qt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},qt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},qt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},qt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,n+1):this.finishOp(r,n)},qt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},qt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},qt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},qt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},qt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},qt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+Yt(t)+"'")},qt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},qt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new Mt(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(c){}return this.finishToken(b.regexp,{pattern:i,flags:o,value:u})},qt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},qt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},qt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(e,this.pos),a="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,a)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(b.num,s)},qt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},qt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(S(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(b.string,e)};var Jt={};qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Jt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},qt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Jt;this.raise(t,e)},qt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(S(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},qt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return S(e)?"":String.fromCharCode(e)}},qt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},qt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(d(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?p:d)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Yt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},qt.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(e=y[t]),this.finishToken(e,t)};var $t="7.1.0";function Qt(t,e){return tt.parse(t,e)}function te(t,e,n){return tt.parseExpressionAt(t,e,n)}function ee(t,e){return tt.tokenizer(t,e)}tt.acorn={Parser:tt,version:$t,defaultOptions:F,Position:R,SourceLocation:D,getLineInfo:M,Node:yt,TokenType:f,tokTypes:b,keywordTypes:y,TokContext:wt,tokContexts:kt,isIdentifierChar:d,isIdentifierStart:p,Token:Xt,isNewLine:S,lineBreak:w,lineBreakG:k,nonASCIIwhitespace:T},t.Node=yt,t.Parser=tt,t.Position=R,t.SourceLocation=D,t.TokContext=wt,t.Token=Xt,t.TokenType=f,t.defaultOptions=F,t.getLineInfo=M,t.isIdentifierChar=d,t.isIdentifierStart=p,t.isNewLine=S,t.keywordTypes=y,t.lineBreak=w,t.lineBreakG=k,t.nonASCIIwhitespace=T,t.parse=Qt,t.parseExpressionAt=te,t.tokContexts=kt,t.tokTypes=b,t.tokenizer=ee,t.version=$t,Object.defineProperty(t,"__esModule",{value:!0})}))},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.contextName,o=void 0===r?"gl":r,u=n.throwGetError,c=n.useTrackablePrimitives,l=n.readPixelsFile,h=n.recording,p=void 0===h?[]:h,d=n.variables,f=void 0===d?{}:d,m=n.onReadPixels,g=n.onUnrecognizedArgumentLookup,v=new Proxy(t,{get:k}),y=[],x={},b=0,w="";return v;function k(n,r){switch(r){case"addComment":return C;case"checkThrowError":return O;case"getReadPixelsVariableName":return e;case"insertVariable":return A;case"reset":return T;case"setIndent":return _;case"toString":return S;case"getContextVariableName":return M}return"function"===typeof t[r]?function(){switch(r){case"getError":return u?p.push("".concat(w,"if (").concat(o,".getError() !== ").concat(o,".NONE) throw new Error('error');")):p.push("".concat(w).concat(o,".getError();")),t.getError();case"getExtension":var n="".concat(o,"Variables").concat(y.length);p.push("".concat(w,"const ").concat(n," = ").concat(o,".getExtension('").concat(arguments[0],"');"));var h=t.getExtension(arguments[0]);if(h&&"object"===typeof h){var d=i(h,{getEntity:E,useTrackablePrimitives:c,recording:p,contextName:n,contextVariables:y,variables:f,indent:w,onUnrecognizedArgumentLookup:g});return y.push(d),d}return y.push(null),h;case"readPixels":var v,x=y.indexOf(arguments[6]);if(-1===x){var b=D(arguments[6]);b?(v=b,p.push("".concat(w).concat(b))):(v="".concat(o,"Variable").concat(y.length),y.push(arguments[6]),p.push("".concat(w,"const ").concat(v," = new ").concat(arguments[6].constructor.name,"(").concat(arguments[6].length,");")))}else v="".concat(o,"Variable").concat(x);e=v;var k=[arguments[0],arguments[1],arguments[2],arguments[3],E(arguments[4]),E(arguments[5]),v];return p.push("".concat(w).concat(o,".readPixels(").concat(k.join(", "),");")),l&&I(arguments[2],arguments[3]),m&&m(v,k),t.readPixels.apply(t,arguments);case"drawBuffers":return p.push("".concat(w).concat(o,".drawBuffers([").concat(a(arguments[0],{contextName:o,contextVariables:y,getEntity:E,addVariable:L,variables:f,onUnrecognizedArgumentLookup:g}),"]);")),t.drawBuffers(arguments[0])}var S=t[r].apply(t,arguments);switch(typeof S){case"undefined":return void p.push("".concat(w).concat(R(r,arguments),";"));case"number":case"boolean":if(c&&-1===y.indexOf(s(S))){p.push("".concat(w,"const ").concat(o,"Variable").concat(y.length," = ").concat(R(r,arguments),";")),y.push(S=s(S));break}default:null===S?p.push("".concat(R(r,arguments),";")):p.push("".concat(w,"const ").concat(o,"Variable").concat(y.length," = ").concat(R(r,arguments),";")),y.push(S)}return S}:(x[t[r]]=r,t[r])}function S(){return p.join("\n")}function T(){for(;p.length>0;)p.pop()}function A(t,e){f[t]=e}function E(t){var e=x[t];return e?o+"."+e:t}function _(t){w=" ".repeat(t)}function L(t,e){var n="".concat(o,"Variable").concat(y.length);return p.push("".concat(w,"const ").concat(n," = ").concat(e,";")),y.push(t),n}function I(t,e){var n="".concat(o,"Variable").concat(y.length),r="imageDatum".concat(b);p.push("".concat(w,"let ").concat(r,' = ["P3\\n# ').concat(l,'.ppm\\n", ').concat(t,", ' ', ").concat(e,', "\\n255\\n"].join("");')),p.push("".concat(w,"for (let i = 0; i < ").concat(r,".length; i += 4) {")),p.push("".concat(w,"  ").concat(r," += ").concat(n,"[i] + ' ' + ").concat(n,"[i + 1] + ' ' + ").concat(n,"[i + 2] + ' ';")),p.push("".concat(w,"}")),p.push("".concat(w,'if (typeof require !== "undefined") {')),p.push("".concat(w,"  require('fs').writeFileSync('./").concat(l,".ppm', ").concat(r,");")),p.push("".concat(w,"}")),b++}function C(t){p.push("".concat(w,"// ").concat(t))}function O(){p.push("".concat(w,"(() => {\n").concat(w,"const error = ").concat(o,".getError();\n").concat(w,"if (error !== ").concat(o,".NONE) {\n").concat(w,"  const names = Object.getOwnPropertyNames(gl);\n").concat(w,"  for (let i = 0; i < names.length; i++) {\n").concat(w,"    const name = names[i];\n").concat(w,"    if (").concat(o,"[name] === error) {\n").concat(w,"      throw new Error('").concat(o," threw ' + name);\n").concat(w,"    }\n").concat(w,"  }\n").concat(w,"}\n").concat(w,"})();"))}function R(t,e){return"".concat(o,".").concat(t,"(").concat(a(e,{contextName:o,contextVariables:y,getEntity:E,addVariable:L,variables:f,onUnrecognizedArgumentLookup:g}),")")}function D(t){if(f)for(var e in f)if(f[e]===t)return e;return null}function M(t){var e=y.indexOf(t);return-1!==e?"".concat(o,"Variable").concat(e):null}}function i(t,e){var n=new Proxy(t,{get:f}),r={},i=e.contextName,o=e.contextVariables,u=e.getEntity,c=e.useTrackablePrimitives,l=e.recording,h=e.variables,p=e.indent,d=e.onUnrecognizedArgumentLookup;return n;function f(e,n){return"function"===typeof e[n]?function(){if("drawBuffersWEBGL"===n)return l.push("".concat(p).concat(i,".drawBuffersWEBGL([").concat(a(arguments[0],{contextName:i,contextVariables:o,getEntity:m,addVariable:v,variables:h,onUnrecognizedArgumentLookup:d}),"]);")),t.drawBuffersWEBGL(arguments[0]);var e=t[n].apply(t,arguments);switch(typeof e){case"undefined":return void l.push("".concat(p).concat(g(n,arguments),";"));case"number":case"boolean":c&&-1===o.indexOf(s(e))?(l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(g(n,arguments),";")),o.push(e=s(e))):(l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(g(n,arguments),";")),o.push(e));break;default:null===e?l.push("".concat(g(n,arguments),";")):l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(g(n,arguments),";")),o.push(e)}return e}:(r[t[n]]=n,t[n])}function m(t){return r.hasOwnProperty(t)?"".concat(i,".").concat(r[t]):u(t)}function g(t,e){return"".concat(i,".").concat(t,"(").concat(a(e,{contextName:i,contextVariables:o,getEntity:m,addVariable:v,variables:h,onUnrecognizedArgumentLookup:d}),")")}function v(t,e){var n="".concat(i,"Variable").concat(o.length);return o.push(t),l.push("".concat(p,"const ").concat(n," = ").concat(e,";")),n}}function a(t,e){var n=e.variables,r=e.onUnrecognizedArgumentLookup;return Array.from(t).map((function(t){var n=i(t);return n||o(t,e)})).join(", ");function i(t){if(n)for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t)return e;return r?r(t):null}}function o(t,e){var n=e.contextName,r=e.contextVariables,i=e.getEntity,a=e.addVariable,o=e.onUnrecognizedArgumentLookup;if("undefined"===typeof t)return"undefined";if(null===t)return"null";var s=r.indexOf(t);if(s>-1)return"".concat(n,"Variable").concat(s);switch(t.constructor.name){case"String":var u=/\n/.test(t),c=/'/.test(t),l=/"/.test(t);return u?"`"+t+"`":c&&!l?'"'+t+'"':"'"+t+"'";case"Number":case"Boolean":return i(t);case"Array":return a(t,"new ".concat(t.constructor.name,"([").concat(Array.from(t).join(","),"])"));case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return a(t,"new ".concat(t.constructor.name,"(").concat(JSON.stringify(Array.from(t)),")"));default:if(o){var h=o(t);if(h)return h}throw new Error("unrecognized argument type ".concat(t.constructor.name))}}function s(t){return new t.constructor(t)}"undefined"!==typeof e&&(e.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(t,e,n){function r(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var r=t[n];r.toArray?e[n]=r.toArray():e[n]=r}return e}function i(){for(var t=r(arguments),e=new Float32Array(this.output.x),n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,e[n]=this._fn.apply(this,t);return e}function a(){for(var t=r(arguments),e=new Array(this.output.y),n=0;n<this.output.y;n++){for(var i=new Float32Array(this.output.x),a=0;a<this.output.x;a++)this.thread.x=a,this.thread.y=n,this.thread.z=0,i[a]=this._fn.apply(this,t);e[n]=i}return e}function o(){for(var t=r(arguments),e=0;e<this.output.y;e++)for(var n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=e,this.thread.z=0,this._fn.apply(this,t)}function s(){for(var t=r(arguments),e=new Array(this.output.z),n=0;n<this.output.z;n++){for(var i=new Array(this.output.y),a=0;a<this.output.y;a++){for(var o=new Float32Array(this.output.x),s=0;s<this.output.x;s++)this.thread.x=s,this.thread.y=a,this.thread.z=n,o[s]=this._fn.apply(this,t);i[a]=o}e[n]=i}return e}function u(t){t.setOutput=function(e){t.output=l(e),t.graphical&&c(t)},t.toJSON=function(){throw new Error("Not usable with gpuMock")},t.setConstants=function(e){return t.constants=e,t},t.setGraphical=function(e){return t.graphical=e,t},t.setCanvas=function(e){return t.canvas=e,t},t.setContext=function(e){return t.context=e,t},t.destroy=function(){},t.validateSettings=function(){},t.graphical&&t.output&&c(t),t.exec=function(){var e=arguments;return new Promise((function(n,r){try{n(t.apply(t,e))}catch(i){r(i)}}))},t.getPixels=function(e){var n=t.output,r=n.x,i=n.y;return e?d(t._imageData.data,r,i):t._imageData.data.slice(0)},t.color=function(e,n,r,i){"undefined"===typeof i&&(i=1),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);var a=t.output.x,o=t.output.y,s=t.thread.x+(o-t.thread.y-1)*a;t._colorData[4*s+0]=e,t._colorData[4*s+1]=n,t._colorData[4*s+2]=r,t._colorData[4*s+3]=i};for(var e=function(){return t},n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"],r=0;r<n.length;r++)t[n[r]]=e;return t}function c(t){var e=t.output,n=e.x,r=e.y;if(t.context&&t.context.createImageData){var i=new Uint8ClampedArray(n*r*4);t._imageData=t.context.createImageData(n,r),t._colorData=i}else{var a=new Uint8ClampedArray(n*r*4);t._imageData={data:a},t._colorData=a}}function l(t){var e=null;if(t.length)if(3===t.length){var n=p(t,3);e={x:n[0],y:n[1],z:n[2]}}else if(2===t.length){var r=p(t,2);e={x:r[0],y:r[1]}}else e={x:p(t,1)[0]};else e=t;return e}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.output?l(e.output):null;function r(){return r.output.z?s.apply(r,arguments):r.output.y?r.graphical?o.apply(r,arguments):a.apply(r,arguments):i.apply(r,arguments)}return r._fn=t,r.constants=e.constants||null,r.context=e.context||null,r.canvas=e.canvas||null,r.graphical=e.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},u(r)}function d(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,c=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,c,c+i),o.set(a,c)}return o}e.exports={gpuMock:h}},{}],5:[function(t,e,n){var r=t("./utils").utils;function i(t,e){var n=e.toString();return new Function("return function ".concat(t," (").concat(r.getArgumentNamesFromString(n).join(", "),") {\n  ").concat(r.getFunctionBodyFromString(n),"\n}"))()}e.exports={alias:i}},{"./utils":114}],6:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"astFunction",value:function(t,e){if(!this.isRootKernel){e.push("function"),e.push(" "),e.push(this.name),e.push("(");for(var n=0;n<this.argumentNames.length;++n){var r=this.argumentNames[n];n>0&&e.push(", "),e.push("user_"),e.push(r)}e.push(") {\n")}for(var i=0;i<t.body.body.length;++i)this.astGeneric(t.body.body[i],e),e.push("\n");return this.isRootKernel||e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){var n=this.returnType||this.getType(t.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(e.push(this.leadingReturnStatement),this.astGeneric(t.argument,e),e.push(";\n"),e.push(this.followingReturnStatement),e.push("continue;\n")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ")),this.astGeneric(t.argument,e),e.push(";"),e.push("return subKernelResult_".concat(this.name,";"))):(e.push("return "),this.astGeneric(t.argument,e),e.push(";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);return e.push(t.value),e}},{key:"astBinaryExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);return"Infinity"===t.name?e.push("Infinity"):this.constants&&this.constants.hasOwnProperty(t.name)?e.push("constants_"+t.name):e.push("user_"+t.name),e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){this.pushState("in-for-loop-init"),this.astGeneric(t.init,n);for(var s=0;s<n.length;s++)n[s].includes&&n[s].includes(",")&&(o=!1);this.popState("in-for-loop-init")}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o)e.push("for (".concat(n.join(""),";").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n");else{var u=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),";\n"),e.push("for (let ".concat(u,"=0;").concat(u,"<LOOP_MAX;").concat(u,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),e.push("if ("),this.astGeneric(t.test,e),e.push(") {\n"),this.astGeneric(t.body,e),e.push("} else {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){var n=this.getDeclaration(t.left);if(n&&!n.assignable)throw this.astErrorOutput("Variable ".concat(t.left.name," is not assignable here"),t);return this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){e.push("".concat(t.kind," "));for(var n=t.declarations,r=0;r<n.length;r++){r>0&&e.push(",");var i=n[r],a=this.getDeclaration(i.id);a.valueType||(a.valueType=this.getType(i.init)),this.astGeneric(i,e)}return this.isState("in-for-loop-init")||e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){var n=t.discriminant,r=t.cases;e.push("switch ("),this.astGeneric(n,e),e.push(") {\n");for(var i=0;i<r.length;i++)null!==r[i].test?(e.push("case "),this.astGeneric(r[i].test,e),e.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,e),e.push("break;\n"))):(e.push("default:\n"),this.astGeneric(r[i].consequent,e),r[i].consequent&&r[i].consequent.length>0&&e.push("break;\n"));e.push("\n}")}},{key:"astThisExpression",value:function(t,e){return e.push("_this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),r=n.signature,i=n.type,a=n.property,o=n.xProperty,s=n.yProperty,u=n.zProperty,c=n.name,l=n.origin;switch(r){case"this.thread.value":return e.push("_this.thread.".concat(c)),e;case"this.output.value":switch(c){case"x":e.push("outputX");break;case"y":e.push("outputY");break;case"z":e.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":default:throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===l)return e.push(Math[c]),e;switch(a){case"r":return e.push("user_".concat(c,"[0]")),e;case"g":return e.push("user_".concat(c,"[1]")),e;case"b":return e.push("user_".concat(c,"[2]")),e;case"a":return e.push("user_".concat(c,"[3]")),e}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(t.object,e),e.push("["),this.astGeneric(t.property,e),e.push("]"),e;case"fn()[][]":return this.astGeneric(t.object.object,e),e.push("["),this.astGeneric(t.object.property,e),e.push("]"),e.push("["),this.astGeneric(t.property,e),e.push("]"),e}if(!t.computed)switch(i){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(l,"_").concat(c)),e}var h,p,d="".concat(l,"_").concat(c);if("constants"===l){var f=this.constants[c];h=(p="Input"===this.constantTypes[c])?f.size:null}else h=(p=this.isInput(c))?this.argumentSizes[this.argumentNames.indexOf(c)]:null;return e.push("".concat(d)),u&&s?p?(e.push("[("),this.astGeneric(u,e),e.push("*".concat(this.dynamicArguments?"(outputY * outputX)":h[1]*h[0],")+(")),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":h[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(u,e),e.push("]"),e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):s?p?(e.push("[("),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":h[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):"undefined"!==typeof o&&(e.push("["),this.astGeneric(o,e),e.push("]")),e}},{key:"astCallExpression",value:function(t,e){if("CallExpression"!==t.type)throw this.astErrorOutput("Unknown CallExpression",t);var n=this.astMemberExpressionUnroll(t.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(t),this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("(");for(var r=this.lookupFunctionArgumentTypes(n)||[],i=0;i<t.arguments.length;++i){var a=t.arguments[i],o=this.getType(a);r[i]||this.triggerImplyArgumentType(n,i,o,this),i>0&&e.push(", "),this.astGeneric(a,e)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){for(var n=this.getType(t),r=t.elements.length,i=[],a=0;a<r;++a){var o=[];this.astGeneric(t.elements[a],o),i.push(o.join(""))}switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("[".concat(i.join(", "),"]"));break;default:e.push("new Float32Array([".concat(i.join(", "),"])"))}return e}},{key:"astDebuggerStatement",value:function(t,e){return e.push("debugger;"),e}}]),n}(t("../function-node").FunctionNode);e.exports={CPUFunctionNode:r}},{"../function-node":10}],7:[function(t,e,n){var r=t("../../utils").utils;function i(t,e){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=t[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push("".concat(r,":").concat(a));break;case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":n.push("".concat(r,":new ").concat(a.constructor.name,"(").concat(JSON.stringify(Array.from(a)),")"))}}return"{ ".concat(n.join()," }")}function a(t,e){var n=[],a=[],o=[],s=!/^function/.test(t.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;","  const output = new Int32Array(".concat(JSON.stringify(Array.from(t.output)),");"),"  const _constantTypes = ".concat(JSON.stringify(t.constantTypes),";"),"  const _constants = ".concat(i(t.constants,t.constantTypes),";")),a.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),t.graphical){n.push("  const _imageData = context.createImageData(".concat(t.output[0],", ").concat(t.output[1],");")),n.push("  const _colorData = new Uint8ClampedArray(".concat(t.output[0]," * ").concat(t.output[1]," * 4);"));var u=r.flattenFunctionToString((s?"function ":"")+t.color.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(t,e){return null}}),c=r.flattenFunctionToString((s?"function ":"")+t.getPixels.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(){return null}});a.push("    _imageData,","    _colorData,","    color: ".concat(u,",")),o.push("  kernel.getPixels = ".concat(c,";"))}for(var l=[],h=Object.keys(t.constantTypes),p=0;p<h.length;p++)l.push(t.constantTypes[h]);if(-1!==t.argumentTypes.indexOf("HTMLImageArray")||-1!==l.indexOf("HTMLImageArray")){var d=r.flattenFunctionToString((s?"function ":"")+t._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:function(e,n){return"this"===e?(s?"function ":"")+t[n].toString():null},thisLookup:function(t){switch(t){case"canvas":return;case"context":return"context"}}});o.push(d),a.push("    _mediaTo2DArray,"),a.push("    _imageTo3DArray,")}else if(-1!==t.argumentTypes.indexOf("HTMLImage")||-1!==l.indexOf("HTMLImage")){var f=r.flattenFunctionToString((s?"function ":"")+t._mediaTo2DArray.toString(),{findDependency:function(t,e){return null},thisLookup:function(t){switch(t){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});o.push(f),a.push("    _mediaTo2DArray,")}return"function(settings) {\n".concat(n.join("\n"),"\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n").concat(t._kernelString,"\n  })\n    .apply({ ").concat(a.join("\n")," });\n  ").concat(o.join("\n"),"\n  return kernel;\n}")}e.exports={cpuKernelString:a}},{"../../utils":114}],8:[function(t,e,n){var r=t("../kernel").Kernel,i=t("../function-builder").FunctionBuilder,a=t("./function-node").CPUFunctionNode,o=t("../../utils").utils,s=t("./kernel-string").cpuKernelString,d=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).mergeSettings(t.settings||r),i._imageData=null,i._colorData=null,i._kernelString=null,i._prependedString=[],i.thread={x:0,y:0,z:0},i.translatedSources=null,i}return m(n,[{key:"initCanvas",value:function(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}},{key:"initContext",value:function(){return this.canvas?this.canvas.getContext("2d"):null}},{key:"initPlugins",value:function(t){return[]}},{key:"validateSettings",value:function(t){if(!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var e=o.getVariableType(t[0],this.strictIntegers);if("Array"===e)this.output=o.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw new Error("Auto output not supported for input type: "+e);this.output=t[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}},{key:"translateSource",value:function(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){for(var t=[],e=0;e<this.subKernels.length;e++){var n=this.subKernels[e].name;t.push(this.output.length>1?"resultX_".concat(n,"[x] = subKernelResult_").concat(n,";\n"):"result_".concat(n,"[x] = subKernelResult_").concat(n,";\n"))}this.followingReturnStatement=t.join("")}var r=i.fromKernel(this,a);this.translatedSources=r.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=r.getKernelResultType())}},{key:"build",value:function(){if(!this.built){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){var t=this.canvas,e=this.output;if(!t)throw new Error("no canvas available for using graphical output");var n=e[0],r=e[1]||1;t.width=n,t.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}var i=this.getKernelString();this.kernelString=i,this.debug&&(console.log("Function output:"),console.log(i));try{this.run=new Function([],i).bind(this)()}catch(a){console.error("An error occurred compiling the javascript: ",a)}this.buildSignature(arguments),this.built=!0}}},{key:"color",value:function(t,e,n,r){"undefined"===typeof r&&(r=1),t=Math.floor(255*t),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r);var i=this.output[0],a=this.output[1],o=this.thread.x+(a-this.thread.y-1)*i;this._colorData[4*o+0]=t,this._colorData[4*o+1]=e,this._colorData[4*o+2]=n,this._colorData[4*o+3]=r}},{key:"getKernelString",value:function(){if(null!==this._kernelString)return this._kernelString;var t=null,e=this.translatedSources;return e.length>1?e=e.filter((function(e){return/^function/.test(e)?e:(t=e,!1)})):t=e.shift(),this._kernelString="  const LOOP_MAX = ".concat(this._getLoopMaxString(),";\n  ").concat(this.injectedNative||"","\n  const _this = this;\n  ").concat(this._resultKernelHeader(),"\n  ").concat(this._processConstants(),"\n  return (").concat(this.argumentNames.map((function(t){return"user_"+t})).join(", "),") => {\n    ").concat(this._prependedString.join(""),"\n    ").concat(this._earlyThrows(),"\n    ").concat(this._processArguments(),"\n    ").concat(this.graphical?this._graphicalKernelBody(t):this._resultKernelBody(t),"\n    ").concat(e.length>0?e.join("\n"):"","\n  };")}},{key:"toString",value:function(){return s(this)}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";"):" 1000;"}},{key:"_processConstants",value:function(){if(!this.constants)return"";var t=[];for(var e in this.constants)switch(this.constantTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push("    const constants_".concat(e," = this._mediaTo2DArray(this.constants.").concat(e,");\n"));break;case"HTMLImageArray":t.push("    const constants_".concat(e," = this._imageTo3DArray(this.constants.").concat(e,");\n"));break;case"Input":t.push("    const constants_".concat(e," = this.constants.").concat(e,".value;\n"));break;default:t.push("    const constants_".concat(e," = this.constants.").concat(e,";\n"))}return t.join("")}},{key:"_earlyThrows",value:function(){var t=this;if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";for(var e=[],n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&e.push(this.argumentNames[n]);if(0===e.length)return"";for(var r=[],i=function(){var n=e[a],i=t._mapSubKernels((function(t){return"user_".concat(n," === result_").concat(t.name)})).join(" || ");r.push("user_".concat(n," === result").concat(i?" || ".concat(i):""))},a=0;a<e.length;a++)i();return"if (".concat(r.join(" || "),") throw new Error('Source and destination arrays are the same.  Use immutable = true');")}},{key:"_processArguments",value:function(){for(var t=[],e=0;e<this.argumentTypes.length;e++){var n="user_".concat(this.argumentNames[e]);switch(this.argumentTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push("    ".concat(n," = this._mediaTo2DArray(").concat(n,");\n"));break;case"HTMLImageArray":t.push("    ".concat(n," = this._imageTo3DArray(").concat(n,");\n"));break;case"Input":t.push("    ".concat(n," = ").concat(n,".value;\n"));break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":t.push("\n    if (".concat(n,".toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(").concat(n,");\n      if (textureIndex !== -1) {\n        ").concat(n," = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(").concat(n,");\n        ").concat(n," = ").concat(n,".toArray();\n        _this.arrayCache.push(").concat(n,");\n      }\n    }"))}}return t.join("")}},{key:"_mediaTo2DArray",value:function(t){var e=this.canvas,n=t.width>0?t.width:t.videoWidth,r=t.height>0?t.height:t.videoHeight;e.width<n&&(e.width=n),e.height<r&&(e.height=r);var i,a=this.context;t.constructor===ImageData?i=t.data:(a.drawImage(t,0,0,n,r),i=a.getImageData(0,0,n,r).data);for(var o=new Array(r),s=0,u=r-1;u>=0;u--)for(var c=o[u]=new Array(n),l=0;l<n;l++){var h=new Float32Array(4);h[0]=i[s++]/255,h[1]=i[s++]/255,h[2]=i[s++]/255,h[3]=i[s++]/255,c[l]=h}return o}},{key:"getPixels",value:function(t){var e=p(this.output,2),n=e[0],r=e[1];return t?o.flipPixels(this._imageData.data,n,r):this._imageData.data.slice(0)}},{key:"_imageTo3DArray",value:function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=this._mediaTo2DArray(t[n]);return e}},{key:"_resultKernelHeader",value:function(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}},{key:"_resultKernelBody",value:function(t){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(t):this._resultImmutableKernel1DLoop(t))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(t):this._resultImmutableKernel2DLoop(t))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(t):this._resultImmutableKernel3DLoop(t))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalKernelBody",value:function(t){if(2===this.output.length)return this._graphicalKernel2DLoop(t)+this._graphicalOutput();throw new Error("unsupported size kernel")}},{key:"_graphicalOutput",value:function(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}},{key:"_getKernelResultTypeConstructorString",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error("unhandled returnType ".concat(this.returnType))}}},{key:"_resultImmutableKernel1DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(e,"(outputX);\n    ").concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new ").concat(e,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ").concat(t,"\n    }")}},{key:"_mutableKernel1DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(t,"(outputX);\n    ").concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new ").concat(t,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "))}},{key:"_resultMutableKernel1DLoop",value:function(t){return"  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ".concat(t,"\n    }")}},{key:"_resultImmutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ").concat(e,"(outputX);\n      ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_mutableKernel2DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ").concat(t,"(outputX);\n      ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = result_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join(""),"\n    }")}},{key:"_resultMutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ".concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_graphicalKernel2DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ".concat(t,"\n      }\n    }")}},{key:"_resultImmutableKernel3DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ").concat(e,"(outputX);\n        ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = resultY_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join("        "),"\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ").concat(t,"\n        }\n      }\n    }")}},{key:"_mutableKernel3DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ").concat(t,"(outputX);\n        ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = resultY_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join("        "),"\n      }\n    }")}},{key:"_resultMutableKernel3DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ".concat(t,"\n        }\n      }\n    }")}},{key:"_kernelOutput",value:function(){return this.subKernels?"\n    return {\n      result: result,\n      ".concat(this.subKernels.map((function(t){return"".concat(t.property,": result_").concat(t.name)})).join(",\n      "),"\n    };"):"\n    return result;"}},{key:"_mapSubKernels",value:function(t){return null===this.subKernels?[""]:this.subKernels.map(t)}},{key:"destroy",value:function(t){t&&delete this.canvas}},{key:"toJSON",value:function(){var t=u(c(n.prototype),"toJSON",this).call(this);return t.functionNodes=i.fromKernel(this,a).toJSON(),t}},{key:"setOutput",value:function(t){u(c(n.prototype),"setOutput",this).call(this,t);var e=p(this.output,2),r=e[0],i=e[1];this.graphical&&(this._imageData=this.context.createImageData(r,i),this._colorData=new Uint8ClampedArray(r*i*4))}},{key:"prependString",value:function(t){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(t)}},{key:"hasPrependString",value:function(t){return this._prependedString.indexOf(t)>-1}}],[{key:"getFeatures",value:function(){return this.features}},{key:"features",get:function(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}},{key:"isSupported",get:function(){return!0}},{key:"isContextMatch",value:function(t){return!1}},{key:"mode",get:function(){return"cpu"}},{key:"nativeFunctionArguments",value:function(){return null}},{key:"nativeFunctionReturnType",value:function(){throw new Error("Looking up native function return type not supported on ".concat(this.name))}},{key:"combineKernels",value:function(t){return t}},{key:"getSignature",value:function(t,e){return"cpu"+(e.length>0?":"+e.join(","):"")}},{key:"destroyContext",value:function(t){}}]),n}(r);e.exports={CPUKernel:d}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(t,e,n){var r=function(){function t(e){if(f(this,t),e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(var n=0;n<this.functionNodes.length;n++)this.functionMap[this.functionNodes[n].name]=this.functionNodes[n];if(this.subKernelNodes)for(var r=0;r<this.subKernelNodes.length;r++)this.functionMap[this.subKernelNodes[r].name]=this.subKernelNodes[r];if(this.nativeFunctions)for(var i=0;i<this.nativeFunctions.length;i++){var a=this.nativeFunctions[i];this.nativeFunctionNames.push(a.name)}}return m(t,[{key:"addFunctionNode",value:function(t){if(!t.name)throw new Error("functionNode.name needs set");this.functionMap[t.name]=t,t.isRootKernel&&(this.rootNode=t)}},{key:"traceFunctionCalls",value:function(t,e){if(t=t||"kernel",e=e||[],this.nativeFunctionNames.indexOf(t)>-1){var n=e.indexOf(t);if(-1===n)e.push(t);else{var r=e.splice(n,1)[0];e.push(r)}return e}var i=this.functionMap[t];if(i){var a=e.indexOf(t);if(-1===a){e.push(t),i.toString();for(var o=0;o<i.calledFunctions.length;++o)this.traceFunctionCalls(i.calledFunctions[o],e)}else{var s=e.splice(a,1)[0];e.push(s)}}return e}},{key:"getPrototypeString",value:function(t){return this.getPrototypes(t).join("\n")}},{key:"getPrototypes",value:function(t){return this.rootNode&&this.rootNode.toString(),t?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(t,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}},{key:"getStringFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n)this.functionMap[t[n]]&&e.push(this.functionMap[t[n]].toString());return e.join("\n")}},{key:"getPrototypesFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1)e.push(this.nativeFunctions[i].source);else{var a=this.functionMap[r];a&&e.push(a.toString())}}return e}},{key:"toJSON",value:function(){var t=this;return this.traceFunctionCalls(this.rootNode.name).reverse().map((function(e){var n=t.nativeFunctions.indexOf(e);if(n>-1)return{name:e,source:t.nativeFunctions[n].source};if(t.functionMap[e])return t.functionMap[e].toJSON();throw new Error("function ".concat(e," not found"))}))}},{key:"fromJSON",value:function(t,e){this.functionMap={};for(var n=0;n<t.length;n++){var r=t[n];this.functionMap[r.settings.name]=new e(r.ast,r.settings)}return this}},{key:"getString",value:function(t){return t?this.getStringFromFunctionNames(this.traceFunctionCalls(t).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}},{key:"lookupReturnType",value:function(t,e,n){if("CallExpression"!==e.type)throw new Error('expected ast type of "CallExpression", but is '.concat(e.type));if(this._isNativeFunction(t))return this._lookupNativeFunctionReturnType(t);if(this._isFunction(t)){var r=this._getFunction(t);if(r.returnType)return r.returnType;for(var i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===e){if(0===r.argumentTypes.length&&e.arguments.length>0){for(var a=e.arguments,o=0;o<a.length;o++)this.lookupChain.push({name:n.name,ast:a[i],requestingNode:n}),r.argumentTypes[o]=n.getType(a[o]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:e,requestingNode:n});var s=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=s}return null}},{key:"_getFunction",value:function(t){return this._isFunction(t),this.functionMap[t]}},{key:"_isFunction",value:function(t){return Boolean(this.functionMap[t])}},{key:"_getNativeFunction",value:function(t){for(var e=0;e<this.nativeFunctions.length;e++)if(this.nativeFunctions[e].name===t)return this.nativeFunctions[e];return null}},{key:"_isNativeFunction",value:function(t){return Boolean(this._getNativeFunction(t))}},{key:"_lookupNativeFunctionReturnType",value:function(t){var e=this._getNativeFunction(t);if(e)return e.returnType;throw new Error("Native function ".concat(t," not found"))}},{key:"lookupFunctionArgumentTypes",value:function(t){return this._isNativeFunction(t)?this._getNativeFunction(t).argumentTypes:this._isFunction(t)?this._getFunction(t).argumentTypes:null}},{key:"lookupFunctionArgumentName",value:function(t,e){return this._getFunction(t).argumentNames[e]}},{key:"lookupFunctionArgumentBitRatio",value:function(t,e){if(!this._isFunction(t))throw new Error("function not found");if(this.rootNode.name===t){var n=this.rootNode.argumentNames.indexOf(e);if(-1!==n)return this.rootNode.argumentBitRatios[n]}var r=this._getFunction(t),i=r.argumentNames.indexOf(e);if(-1===i)throw new Error("argument not found");var a=r.argumentBitRatios[i];if("number"!==typeof a)throw new Error("argument bit ratio not found");return a}},{key:"needsArgumentType",value:function(t,e){return!!this._isFunction(t)&&!this._getFunction(t).argumentTypes[e]}},{key:"assignArgumentType",value:function(t,e,n,r){if(this._isFunction(t)){var i=this._getFunction(t);i.argumentTypes[e]||(i.argumentTypes[e]=n)}}},{key:"assignArgumentBitRatio",value:function(t,e,n,r){var i=this._getFunction(t);if(this._isNativeFunction(n))return null;var a=this._getFunction(n),o=i.argumentNames.indexOf(e);if(-1===o)throw new Error("Argument ".concat(e," not found in arguments from function ").concat(t));var s=i.argumentBitRatios[o];if("number"!==typeof s)throw new Error("Bit ratio for argument ".concat(e," not found in function ").concat(t));a.argumentBitRatios||(a.argumentBitRatios=new Array(a.argumentNames.length));var u=a.argumentBitRatios[o];if("number"===typeof u){if(u!==s)throw new Error("Incompatible bit ratio found at function ".concat(t," at argument ").concat(e));return u}return a.argumentBitRatios[o]=s,s}},{key:"trackFunctionCall",value:function(t,e,n){this.functionNodeDependencies[t]||(this.functionNodeDependencies[t]=new Set,this.functionCalls[t]=[]),this.functionNodeDependencies[t].add(e),this.functionCalls[t].push(n)}},{key:"getKernelResultType",value:function(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}},{key:"getSubKernelResultType",value:function(t){for(var e=this.subKernelNodes[t],n=!1,r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===e.name&&(n=!0);if(!n)throw new Error("SubKernel ".concat(e.name," never called by kernel"));return e.returnType||e.getType(e.getJsAST())}},{key:"getReturnTypes",value:function(){for(var t=s({},this.rootNode.name,this.rootNode.getType(this.rootNode.ast)),e=this.traceFunctionCalls(this.rootNode.name),n=0;n<e.length;n++){var r=e[n],i=this.functionMap[r];t[r]=i.getType(i.ast)}return t}}],[{key:"fromKernel",value:function(e,n,r){for(var i=e.kernelArguments,a=e.kernelConstants,o=e.argumentNames,s=e.argumentSizes,u=e.argumentBitRatios,c=e.constants,l=e.constantBitRatios,h=e.debug,p=e.loopMaxIterations,d=e.nativeFunctions,f=e.output,m=e.optimizeFloatMemory,g=e.precision,v=e.plugins,y=e.source,x=e.subKernels,b=e.functions,w=e.leadingReturnStatement,k=e.followingReturnStatement,S=e.dynamicArguments,T=e.dynamicOutput,A=new Array(i.length),E={},_=0;_<i.length;_++)A[_]=i[_].type;for(var L=0;L<a.length;L++){var I=a[L];E[I.name]=I.type}var C=function(t,e){return U.needsArgumentType(t,e)},O=function(t,e,n){U.assignArgumentType(t,e,n)},R=function(t,e,n){return U.lookupReturnType(t,e,n)},D=function(t){return U.lookupFunctionArgumentTypes(t)},M=function(t,e){return U.lookupFunctionArgumentName(t,e)},F=function(t,e){return U.lookupFunctionArgumentBitRatio(t,e)},z=function(t,e,n,r){U.assignArgumentType(t,e,n,r)},P=function(t,e,n,r){U.assignArgumentBitRatio(t,e,n,r)},N=function(t,e,n){U.trackFunctionCall(t,e,n)},V=function(t,e){for(var r=[],i=0;i<t.params.length;i++)r.push(t.params[i].name);var a=new n(e,Object.assign({},K,{returnType:null,ast:t,name:t.id.name,argumentNames:r,lookupReturnType:R,lookupFunctionArgumentTypes:D,lookupFunctionArgumentName:M,lookupFunctionArgumentBitRatio:F,needsArgumentType:C,assignArgumentType:O,triggerImplyArgumentType:z,triggerImplyArgumentBitRatio:P,onFunctionCall:N}));a.traceFunctionAST(t),U.addFunctionNode(a)},K=Object.assign({isRootKernel:!1,onNestedFunction:V,lookupReturnType:R,lookupFunctionArgumentTypes:D,lookupFunctionArgumentName:M,lookupFunctionArgumentBitRatio:F,needsArgumentType:C,assignArgumentType:O,triggerImplyArgumentType:z,triggerImplyArgumentBitRatio:P,onFunctionCall:N,optimizeFloatMemory:m,precision:g,constants:c,constantTypes:E,constantBitRatios:l,debug:h,loopMaxIterations:p,output:f,plugins:v,dynamicArguments:S,dynamicOutput:T},r||{}),Z=Object.assign({},K,{isRootKernel:!0,name:"kernel",argumentNames:o,argumentTypes:A,argumentSizes:s,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:k});if("object"===typeof y&&y.functionNodes)return(new t).fromJSON(y.functionNodes,n);var j=new n(y,Z),G=null;b&&(G=b.map((function(t){return new n(t.source,{returnType:t.returnType,argumentTypes:t.argumentTypes,output:f,plugins:v,constants:c,constantTypes:E,constantBitRatios:l,optimizeFloatMemory:m,precision:g,lookupReturnType:R,lookupFunctionArgumentTypes:D,lookupFunctionArgumentName:M,lookupFunctionArgumentBitRatio:F,needsArgumentType:C,assignArgumentType:O,triggerImplyArgumentType:z,triggerImplyArgumentBitRatio:P,onFunctionCall:N,onNestedFunction:V})})));var B=null;x&&(B=x.map((function(t){var e=t.name,r=t.source;return new n(r,Object.assign({},K,{name:e,isSubKernel:!0,isRootKernel:!1}))})));var U=new t({kernel:e,rootNode:j,functionNodes:G,nativeFunctions:d,subKernelNodes:B});return U}}]),t}();e.exports={FunctionBuilder:r}},{}],10:[function(t,e,n){var r=t("acorn"),i=t("../utils").utils,a=t("./function-tracer").FunctionTracer,o=function(){function t(e,n){if(f(this,t),!e&&!n.ast)throw new Error("source parameter is missing");if(n=n||{},this.source=e,this.ast=null,this.name="string"===typeof e?n.isRootKernel?"kernel":n.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,n)for(var r in n)n.hasOwnProperty(r)&&this.hasOwnProperty(r)&&(this[r]=n[r]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}return m(t,[{key:"validate",value:function(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error("argumentTypes count of ".concat(this.argumentTypes.length," exceeds ").concat(this.argumentNames.length));if(this.output.length<1)throw new Error("this.output is not big enough")}},{key:"isIdentifierConstant",value:function(t){return!!this.constants&&this.constants.hasOwnProperty(t)}},{key:"isInput",value:function(t){return"Input"===this.argumentTypes[this.argumentNames.indexOf(t)]}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(this.state!==t)throw new Error("Cannot popState ".concat(t," when in ").concat(this.state));this.states.pop()}},{key:"isState",value:function(t){return this.state===t}},{key:"state",get:function(){return this.states[this.states.length-1]}},{key:"astMemberExpressionUnroll",value:function(t){if("Identifier"===t.type)return t.name;if("ThisExpression"===t.type)return"this";if("MemberExpression"===t.type&&t.object&&t.property)return t.object.hasOwnProperty("name")&&"Math"!==t.object.name?this.astMemberExpressionUnroll(t.property):this.astMemberExpressionUnroll(t.object)+"."+this.astMemberExpressionUnroll(t.property);if(t.hasOwnProperty("expressions")){var e=t.expressions[0];if("Literal"===e.type&&0===e.value&&2===t.expressions.length)return this.astMemberExpressionUnroll(t.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",t)}},{key:"getJsAST",value:function(t){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(t=t||r))throw new Error("Missing JS to AST parser");var e=Object.freeze(t.parse("const parser_".concat(this.name," = ").concat(this.source,";"),{locations:!0})),n=e.body[0].declarations[0].init;if(this.traceFunctionAST(n),!e)throw new Error("Failed to parse JS code");return this.ast=n}},{key:"traceFunctionAST",value:function(t){var e=new a(t),n=e.contexts,r=e.declarations,i=e.functions,o=e.identifiers,s=e.functionCalls;this.contexts=n,this.identifiers=o,this.functionCalls=s,this.functions=i;for(var u=0;u<r.length;u++){var c=r[u],l=c.ast,h=c.inForLoopInit,p=c.inForLoopTest,d=l.init,f=this.getDependencies(d),m=null;if(h&&p)m="Integer";else if(d){var g=this.getType(d);switch(g){case"Integer":case"Float":case"Number":m="MemberExpression"===d.type?g:"Number";break;case"LiteralInteger":m="Number";break;default:m=g}}c.valueType=m,c.dependencies=f,c.isSafe=this.isSafeDependencies(f)}for(var v=0;v<i.length;v++)this.onNestedFunction(i[v],this.source)}},{key:"getDeclaration",value:function(t){for(var e=0;e<this.identifiers.length;e++){var n=this.identifiers[e];if(t===n.ast)return n.declaration}return null}},{key:"getVariableType",value:function(t){if("Identifier"!==t.type)throw new Error("ast of ".concat(t.type,' not "Identifier"'));var e=null,n=this.argumentNames.indexOf(t.name);if(-1===n){var r=this.getDeclaration(t);if(r)return r.valueType}else{var i=this.argumentTypes[n];i&&(e=i)}if(!e&&this.strictTypingChecking)throw new Error("Declaration of ".concat(name," not found"));return e}},{key:"getLookupType",value:function(t){if(!s.hasOwnProperty(t))throw new Error("unknown typeLookupMap ".concat(t));return s[t]}},{key:"getConstantType",value:function(t){if(this.constantTypes[t]){var e=this.constantTypes[t];return"Float"===e?"Number":e}throw new Error('Type for constant "'.concat(t,'" not declared'))}},{key:"toString",value:function(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}},{key:"toJSON",value:function(){var t={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:t}}},{key:"getType",value:function(t){if(Array.isArray(t))return this.getType(t[t.length-1]);switch(t.type){case"BlockStatement":return this.getType(t.body);case"ArrayExpression":switch(this.getType(t.elements[0])){case"Array(2)":case"Array(3)":case"Array(4)":return"Matrix(".concat(t.elements.length,")")}return"Array(".concat(t.elements.length,")");case"Literal":var e=this.astKey(t);return this.literalTypes[e]?this.literalTypes[e]:Number.isInteger(t.value)?"LiteralInteger":!0===t.value||!1===t.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(t.left);case"CallExpression":if(this.isAstMathFunction(t))return"Number";if(!t.callee||!t.callee.name){if("SequenceExpression"===t.callee.type&&t.callee.expressions[t.callee.expressions.length-1].property.name){var n=t.callee.expressions[t.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(n,t.arguments),this.lookupReturnType(n,t,this)}if("this.color"===this.getVariableSignature(t.callee,!0))return null;if("MemberExpression"===t.callee.type&&t.callee.object&&t.callee.property&&t.callee.property.name&&t.arguments){var r=t.callee.property.name;return this.inferArgumentTypesIfNeeded(r,t.arguments),this.lookupReturnType(r,t,this)}throw this.astErrorOutput("Unknown call expression",t)}if(t.callee&&t.callee.name){var i=t.callee.name;return this.inferArgumentTypesIfNeeded(i,t.arguments),this.lookupReturnType(i,t,this)}throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(t.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}var a=this.getType(t.left);if(this.isState("skip-literal-correction"))return a;if("LiteralInteger"===a){var o=this.getType(t.right);return"LiteralInteger"===o?t.left.value%1===0?"Integer":"Float":o}return s[a]||a;case"UpdateExpression":case"ReturnStatement":return this.getType(t.argument);case"UnaryExpression":return"~"===t.operator?"Integer":this.getType(t.argument);case"VariableDeclaration":for(var u,c=t.declarations,l=0;l<c.length;l++){var h=c[l];u=this.getType(h)}if(!u)throw this.astErrorOutput("Unable to find type for declaration",t);return u;case"VariableDeclarator":var p=this.getDeclaration(t.id);if(!p)throw this.astErrorOutput("Unable to find declarator",t);if(!p.valueType)throw this.astErrorOutput("Unable to find declarator valueType",t);return p.valueType;case"Identifier":if("Infinity"===t.name)return"Number";if(this.isAstVariable(t)&&"value"===this.getVariableSignature(t))return this.getCheckVariableType(t);var d=this.findIdentifierOrigin(t);return d&&d.init?this.getType(d.init):null;case"MemberExpression":if(this.isAstMathFunction(t)){switch(t.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(t)){switch(this.getVariableSignature(t)){case"value[]":return this.getLookupType(this.getCheckVariableType(t.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(t.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(t.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(t.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(t.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(t.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(t.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(t.object));case"value.value":if(this.isAstMathVariable(t))return"Number";switch(t.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(t.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",t)}throw this.astErrorOutput("Unhandled getType MemberExpression",t);case"ConditionalExpression":case"IfStatement":return this.getType(t.consequent);case"FunctionDeclaration":case"FunctionExpression":var f=this.findLastReturn(t.body);return f?this.getType(f):null;case"SequenceExpression":return this.getType(t.expressions[t.expressions.length-1]);default:throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t)}}},{key:"getCheckVariableType",value:function(t){var e=this.getVariableType(t);if(!e)throw this.astErrorOutput("".concat(t.type," is not defined"),t);return e}},{key:"inferArgumentTypesIfNeeded",value:function(t,e){for(var n=0;n<e.length;n++)if(this.needsArgumentType(t,n)){var r=this.getType(e[n]);if(!r)throw this.astErrorOutput("Unable to infer argument ".concat(n),e[n]);this.assignArgumentType(t,n,r)}}},{key:"isAstMathVariable",value:function(t){var e=["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"];return"MemberExpression"===t.type&&t.object&&"Identifier"===t.object.type&&"Math"===t.object.name&&t.property&&"Identifier"===t.property.type&&e.indexOf(t.property.name)>-1}},{key:"isAstMathFunction",value:function(t){var e=["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"];return"CallExpression"===t.type&&t.callee&&"MemberExpression"===t.callee.type&&t.callee.object&&"Identifier"===t.callee.object.type&&"Math"===t.callee.object.name&&t.callee.property&&"Identifier"===t.callee.property.type&&e.indexOf(t.callee.property.name)>-1}},{key:"isAstVariable",value:function(t){return"Identifier"===t.type||"MemberExpression"===t.type}},{key:"isSafe",value:function(t){return this.isSafeDependencies(this.getDependencies(t))}},{key:"isSafeDependencies",value:function(t){return!t||!t.every||t.every((function(t){return t.isSafe}))}},{key:"getDependencies",value:function(t,e,n){if(e||(e=[]),!t)return null;if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.getDependencies(t[r],e,n);return e}switch(t.type){case"AssignmentExpression":return this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"ConditionalExpression":return this.getDependencies(t.test,e,n),this.getDependencies(t.alternate,e,n),this.getDependencies(t.consequent,e,n),e;case"Literal":e.push({origin:"literal",value:t.value,isSafe:!0!==n&&t.value>-1/0&&t.value<1/0&&!isNaN(t.value)});break;case"VariableDeclarator":return this.getDependencies(t.init,e,n);case"Identifier":var i=this.getDeclaration(t);if(i)e.push({name:t.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(i.dependencies)});else if(this.argumentNames.indexOf(t.name)>-1)e.push({name:t.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error('Cannot find identifier origin "'.concat(t.name,'"'));break;case"FunctionDeclaration":return this.getDependencies(t.body.body[t.body.body.length-1],e,n);case"ReturnStatement":return this.getDependencies(t.argument,e);case"BinaryExpression":case"LogicalExpression":return n="/"===t.operator||"*"===t.operator,this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(t.argument,e,n);case"VariableDeclaration":return this.getDependencies(t.declarations,e,n);case"ArrayExpression":return e.push({origin:"declaration",isSafe:!0}),e;case"CallExpression":return e.push({origin:"function",isSafe:!0}),e;case"MemberExpression":var a=this.getMemberExpressionDetails(t);switch(a.signature){case"value[]":this.getDependencies(t.object,e,n);break;case"value[][]":this.getDependencies(t.object.object,e,n);break;case"value[][][]":this.getDependencies(t.object.object.object,e,n);break;case"this.output.value":this.dynamicOutput&&e.push({name:a.name,origin:"output",isSafe:!1})}if(a)return a.property&&this.getDependencies(a.property,e,n),a.xProperty&&this.getDependencies(a.xProperty,e,n),a.yProperty&&this.getDependencies(a.yProperty,e,n),a.zProperty&&this.getDependencies(a.zProperty,e,n),e;case"SequenceExpression":return this.getDependencies(t.expressions,e,n);default:throw this.astErrorOutput("Unhandled type ".concat(t.type," in getDependencies"),t)}return e}},{key:"getVariableSignature",value:function(t,e){if(!this.isAstVariable(t))throw new Error('ast of type "'.concat(t.type,'" is not a variable signature'));if("Identifier"===t.type)return"value";for(var n=[];t;)t.computed?n.push("[]"):"ThisExpression"===t.type?n.unshift("this"):t.property&&t.property.name?"x"===t.property.name||"y"===t.property.name||"z"===t.property.name?n.unshift(e?"."+t.property.name:".value"):"constants"===t.property.name||"thread"===t.property.name||"output"===t.property.name?n.unshift("."+t.property.name):n.unshift(e?"."+t.property.name:".value"):t.name?n.unshift(e?t.name:"value"):t.callee&&t.callee.name?n.unshift(e?t.callee.name+"()":"fn()"):t.elements?n.unshift("[]"):n.unshift("unknown"),t=t.object;var r=n.join("");return e||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}},{key:"build",value:function(){return this.toString().length>0}},{key:"astGeneric",value:function(t,e){if(null===t)throw this.astErrorOutput("NULL ast",t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)this.astGeneric(t[n],e);return e}switch(t.type){case"FunctionDeclaration":return this.astFunctionDeclaration(t,e);case"FunctionExpression":return this.astFunctionExpression(t,e);case"ReturnStatement":return this.astReturnStatement(t,e);case"Literal":return this.astLiteral(t,e);case"BinaryExpression":return this.astBinaryExpression(t,e);case"Identifier":return this.astIdentifierExpression(t,e);case"AssignmentExpression":return this.astAssignmentExpression(t,e);case"ExpressionStatement":return this.astExpressionStatement(t,e);case"EmptyStatement":return this.astEmptyStatement(t,e);case"BlockStatement":return this.astBlockStatement(t,e);case"IfStatement":return this.astIfStatement(t,e);case"SwitchStatement":return this.astSwitchStatement(t,e);case"BreakStatement":return this.astBreakStatement(t,e);case"ContinueStatement":return this.astContinueStatement(t,e);case"ForStatement":return this.astForStatement(t,e);case"WhileStatement":return this.astWhileStatement(t,e);case"DoWhileStatement":return this.astDoWhileStatement(t,e);case"VariableDeclaration":return this.astVariableDeclaration(t,e);case"VariableDeclarator":return this.astVariableDeclarator(t,e);case"ThisExpression":return this.astThisExpression(t,e);case"SequenceExpression":return this.astSequenceExpression(t,e);case"UnaryExpression":return this.astUnaryExpression(t,e);case"UpdateExpression":return this.astUpdateExpression(t,e);case"LogicalExpression":return this.astLogicalExpression(t,e);case"MemberExpression":return this.astMemberExpression(t,e);case"CallExpression":return this.astCallExpression(t,e);case"ArrayExpression":return this.astArrayExpression(t,e);case"DebuggerStatement":return this.astDebuggerStatement(t,e);case"ConditionalExpression":return this.astConditionalExpression(t,e)}throw this.astErrorOutput("Unknown ast type : "+t.type,t)}},{key:"astErrorOutput",value:function(t,e){if("string"!==typeof this.source)return new Error(t);var n=i.getAstString(this.source,e),r=this.source.substr(e.start).split(/\n/),a=r.length>0?r[r.length-1]:0;return new Error("".concat(t," on line ").concat(r.length,", position ").concat(a.length,":\n ").concat(n))}},{key:"astDebuggerStatement",value:function(t,e){return e}},{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);return e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e}},{key:"astFunction",value:function(t,e){throw new Error('"astFunction" not defined on '.concat(this.constructor.name))}},{key:"astFunctionDeclaration",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"astFunctionExpression",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"isChildFunction",value:function(t){for(var e=0;e<this.functions.length;e++)if(this.functions[e]===t)return!0;return!1}},{key:"astReturnStatement",value:function(t,e){return e}},{key:"astLiteral",value:function(t,e){return this.literalTypes[this.astKey(t)]="Number",e}},{key:"astBinaryExpression",value:function(t,e){return e}},{key:"astIdentifierExpression",value:function(t,e){return e}},{key:"astAssignmentExpression",value:function(t,e){return e}},{key:"astExpressionStatement",value:function(t,e){return this.astGeneric(t.expression,e),e.push(";"),e}},{key:"astEmptyStatement",value:function(t,e){return e}},{key:"astBlockStatement",value:function(t,e){return e}},{key:"astIfStatement",value:function(t,e){return e}},{key:"astSwitchStatement",value:function(t,e){return e}},{key:"astBreakStatement",value:function(t,e){return e.push("break;"),e}},{key:"astContinueStatement",value:function(t,e){return e.push("continue;\n"),e}},{key:"astForStatement",value:function(t,e){return e}},{key:"astWhileStatement",value:function(t,e){return e}},{key:"astDoWhileStatement",value:function(t,e){return e}},{key:"astVariableDeclarator",value:function(t,e){return this.astGeneric(t.id,e),null!==t.init&&(e.push("="),this.astGeneric(t.init,e)),e}},{key:"astThisExpression",value:function(t,e){return e}},{key:"astSequenceExpression",value:function(t,e){for(var n=t.expressions,r=[],i=0;i<n.length;i++){var a=n[i],o=[];this.astGeneric(a,o),r.push(o.join(""))}return r.length>1?e.push("(",r.join(","),")"):e.push(r[0]),e}},{key:"astUnaryExpression",value:function(t,e){return this.checkAndUpconvertBitwiseUnary(t,e)||(t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator))),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){}},{key:"astUpdateExpression",value:function(t,e){return t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator)),e}},{key:"astLogicalExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astMemberExpression",value:function(t,e){return e}},{key:"astCallExpression",value:function(t,e){return e}},{key:"astArrayExpression",value:function(t,e){return e}},{key:"getMemberExpressionDetails",value:function(t){if("MemberExpression"!==t.type)throw this.astErrorOutput("Expression ".concat(t.type," not a MemberExpression"),t);var e=null,n=null,r=this.getVariableSignature(t);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:t.property.name};case"value[]":if("string"!==typeof t.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.name,origin:"user",signature:r,type:this.getVariableType(t.object),xProperty:t.property};case"value[][]":if("string"!==typeof t.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object),yProperty:t.object.property,xProperty:t.property};case"value[][][]":if("string"!==typeof t.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value[][][][]":if("string"!==typeof t.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(this.isAstMathVariable(t))return{name:e=t.property.name,origin:"Math",type:"Number",signature:r};switch(t.property.name){case"r":case"g":case"b":case"a":return{name:e=t.object.name,property:t.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",t)}case"this.constants.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof t.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,xProperty:t.property};case"this.constants.value[][]":if("string"!==typeof t.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,yProperty:t.object.property,xProperty:t.property};case"this.constants.value[][][]":if("string"!==typeof t.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"fn()[]":case"fn()[][]":case"[][]":return{signature:r,property:t.property};default:throw this.astErrorOutput("Unexpected expression",t)}}},{key:"findIdentifierOrigin",value:function(t){for(var e=[this.ast];e.length>0;){var n=e[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===t.name)return n;if(e.shift(),n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r])}return null}},{key:"findLastReturn",value:function(t){for(var e=[t||this.ast];e.length>0;){var n=e.pop();if("ReturnStatement"===n.type)return n;if("FunctionDeclaration"!==n.type)if(n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r]);else n.consequent?e.push(n.consequent):n.cases&&e.push(n.cases)}return null}},{key:"getInternalVariableName",value:function(t){return this._internalVariableNames.hasOwnProperty(t)||(this._internalVariableNames[t]=0),this._internalVariableNames[t]++,1===this._internalVariableNames[t]?t:t+this._internalVariableNames[t]}},{key:"astKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!t.start||!t.end)throw new Error("AST start and end needed");return"".concat(t.start).concat(e).concat(t.end)}}]),t}(),s={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number","Matrix(2)":"Number","Matrix(3)":"Number","Matrix(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",OffscreenCanvas:"Array(4)",HTMLImage:"Array(4)",ImageBitmap:"Array(4)",ImageData:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};e.exports={FunctionNode:o}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(t,e,n){var r=t("../utils").utils;function i(t){return t.length>0?t[t.length-1]:null}var a={trackIdentifiers:"trackIdentifiers",memberExpression:"memberExpression",inForLoopInit:"inForLoopInit"},o=function(){function t(e){f(this,t),this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(e)}return m(t,[{key:"isState",value:function(t){return this.states[this.states.length-1]===t}},{key:"hasState",value:function(t){return this.states.indexOf(t)>-1}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(!this.isState(t))throw new Error('Cannot pop the non-active state "'.concat(t,'"'));this.states.pop()}},{key:"currentFunctionContext",get:function(){return i(this.functionContexts)}},{key:"currentContext",get:function(){return i(this.runningContexts)}},{key:"newFunctionContext",value:function(){var t={"@contextType":"function"};this.contexts.push(t),this.functionContexts.push(t)}},{key:"newContext",value:function(t){var e=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(e),this.runningContexts.push(e),t();var n=this.currentFunctionContext;for(var r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r]);return this.runningContexts.pop(),e}},{key:"useFunctionContext",value:function(t){var e=i(this.functionContexts);this.runningContexts.push(e),t(),this.runningContexts.pop()}},{key:"getIdentifiers",value:function(t){var e=this.trackedIdentifiers=[];return this.pushState(a.trackIdentifiers),t(),this.trackedIdentifiers=null,this.popState(a.trackIdentifiers),e}},{key:"getDeclaration",value:function(t){var e=this.currentContext,n=this.currentFunctionContext,r=this.runningContexts,i=e[t]||n[t]||null;if(!i&&e===n&&r.length>0){var a=r[r.length-2];if(a[t])return a[t]}return i}},{key:"scan",value:function(t){var e=this;if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)this.scan(t[n]);else switch(t.type){case"Program":this.useFunctionContext((function(){e.scan(t.body)}));break;case"BlockStatement":this.newContext((function(){e.scan(t.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(t.left),this.scan(t.right);break;case"UpdateExpression":if("++"===t.operator){var i=this.getDeclaration(t.argument.name);i&&(i.suggestedType="Integer")}this.scan(t.argument);break;case"UnaryExpression":this.scan(t.argument);break;case"VariableDeclaration":"var"===t.kind?this.useFunctionContext((function(){t.declarations=r.normalizeDeclarations(t),e.scan(t.declarations)})):(t.declarations=r.normalizeDeclarations(t),this.scan(t.declarations));break;case"VariableDeclarator":var o=this.currentContext,s=this.hasState(a.inForLoopInit),u={ast:t,context:o,name:t.id.name,origin:"declaration",inForLoopInit:s,inForLoopTest:null,assignable:o===this.currentFunctionContext||!s&&!o.hasOwnProperty(t.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};o[t.id.name]||(o[t.id.name]=u),this.declarations.push(u),this.scan(t.id),this.scan(t.init);break;case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(t.body):this.functions.push(t);break;case"IfStatement":this.scan(t.test),this.scan(t.consequent),t.alternate&&this.scan(t.alternate);break;case"ForStatement":var c,l=this.newContext((function(){e.pushState(a.inForLoopInit),e.scan(t.init),e.popState(a.inForLoopInit),c=e.getIdentifiers((function(){e.scan(t.test)})),e.scan(t.update),e.newContext((function(){e.scan(t.body)}))}));if(c)for(var h in l)"@contextType"!==h&&c.indexOf(h)>-1&&(l[h].inForLoopTest=!0);break;case"DoWhileStatement":case"WhileStatement":this.newContext((function(){e.scan(t.body),e.scan(t.test)}));break;case"Identifier":this.isState(a.trackIdentifiers)&&this.trackedIdentifiers.push(t.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(t.name),ast:t});break;case"ReturnStatement":this.returnStatements.push(t),this.scan(t.argument);break;case"MemberExpression":this.pushState(a.memberExpression),this.scan(t.object),this.scan(t.property),this.popState(a.memberExpression);break;case"ExpressionStatement":this.scan(t.expression);break;case"SequenceExpression":this.scan(t.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:t}),this.scan(t.arguments);break;case"ArrayExpression":this.scan(t.elements);break;case"ConditionalExpression":this.scan(t.test),this.scan(t.alternate),this.scan(t.consequent);break;case"SwitchStatement":this.scan(t.discriminant),this.scan(t.cases);break;case"SwitchCase":this.scan(t.test),this.scan(t.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error('unhandled type "'.concat(t.type,'"'))}}}]),t}();e.exports={FunctionTracer:o}},{"../utils":114}],12:[function(t,e,n){var r=t("gl-wiretap").glWiretap,i=t("../../utils").utils;function a(t){return t.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function o(t,e,n,o,h){n.built||n.build.apply(n,e),e=e?Array.from(e).map((function(t){switch(typeof t){case"boolean":return new Boolean(t);case"number":return new Number(t);default:return t}})):null;var p=[],d=r(n.context,{useTrackablePrimitives:!0,onReadPixels:function(t){if(M.subKernels){if(f){var e=M.subKernels[m++].property;p.push("    result".concat(isNaN(e)?"."+e:"[".concat(e,"]")," = ").concat(s(t,M),";"))}else p.push("    const result = { result: ".concat(s(t,M)," };")),f=!0;m===M.subKernels.length&&p.push("    return result;")}else t?p.push("    return ".concat(s(t,M),";")):p.push("    return null;")},onUnrecognizedArgumentLookup:function(t){var e=l(t,M.kernelArguments,[],d);if(e)return e;var n=l(t,M.kernelConstants,k?Object.keys(k).map((function(t){return k[t]})):[],d);return n||null}}),f=!1,m=0,g=n.source,v=n.canvas,y=n.output,x=n.pipeline,b=n.graphical,w=n.loopMaxIterations,k=n.constants,S=n.optimizeFloatMemory,T=n.precision,A=n.fixIntegerDivisionAccuracy,E=n.functions,_=n.nativeFunctions,L=n.subKernels,I=n.immutable,C=n.argumentTypes,O=n.constantTypes,R=(n.kernelArguments,n.kernelConstants),D=n.tactic,M=new t(g,{canvas:v,context:d,checkContext:!1,output:y,pipeline:x,graphical:b,loopMaxIterations:w,constants:k,optimizeFloatMemory:S,precision:T,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:L,immutable:I,argumentTypes:C,constantTypes:O,tactic:D}),F=[];if(d.setIndent(2),M.build.apply(M,e),F.push(d.toString()),d.reset(),M.kernelArguments.forEach((function(t,n){switch(t.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":case"Input":d.insertVariable("uploadValue_".concat(t.name),t.uploadValue);break;case"HTMLImageArray":for(var r=0;r<e[n].length;r++){var i=e[n];d.insertVariable("uploadValue_".concat(t.name,"[").concat(r,"]"),i[r])}break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":d.insertVariable("uploadValue_".concat(t.name),e[n].texture);break;default:throw new Error("unhandled kernelArgumentType insertion for glWiretap of type ".concat(t.type))}})),F.push("/** start of injected functions **/"),F.push("function ".concat(a(i.flattenTo))),F.push("function ".concat(a(i.flatten2dArrayTo))),F.push("function ".concat(a(i.flatten3dArrayTo))),F.push("function ".concat(a(i.flatten4dArrayTo))),F.push("function ".concat(a(i.isArray))),M.renderOutput!==M.renderTexture&&M.formatValues&&F.push("  const renderOutput = function ".concat(a(M.formatValues),";")),F.push("/** end of injected functions **/"),F.push("  const innerKernel = function (".concat(M.kernelArguments.map((function(t){return t.varName})).join(", "),") {")),d.setIndent(4),M.run.apply(M,e),M.renderKernels?M.renderKernels():M.renderOutput&&M.renderOutput(),F.push("    /** start setup uploads for kernel values **/"),M.kernelArguments.forEach((function(t){F.push("    "+t.getStringValueHandler().split("\n").join("\n    "))})),F.push("    /** end setup uploads for kernel values **/"),F.push(d.toString()),M.renderOutput===M.renderTexture){d.reset();var z=d.getContextVariableName(M.framebuffer);if(M.renderKernels){var P=M.renderKernels(),N=d.getContextVariableName(M.texture.texture);F.push("    return {\n      result: {\n        texture: ".concat(N,",\n        type: '").concat(P.result.type,"',\n        toArray: ").concat(c(P.result,N,z),"\n      },"));for(var V=M.subKernels,K=M.mappedTextures,Z=0;Z<V.length;Z++){var j=K[Z],G=V[Z],B=P[G.property],U=d.getContextVariableName(j.texture);F.push("\n      ".concat(G.property,": {\n        texture: ").concat(U,",\n        type: '").concat(B.type,"',\n        toArray: ").concat(c(B,U,z),"\n      },"))}F.push("    };")}else{var W=M.renderOutput(),H=d.getContextVariableName(M.texture.texture);F.push("    return {\n        texture: ".concat(H,",\n        type: '").concat(W.type,"',\n        toArray: ").concat(c(W,H,z),"\n      };"))}}F.push("    ".concat(h?"\n"+h+"    ":"")),F.push(p.join("\n")),F.push("  };"),M.graphical&&(F.push(u(M)),F.push("  innerKernel.getPixels = getPixels;")),F.push("  return innerKernel;");var X=[];return R.forEach((function(t){X.push("".concat(t.getStringValueHandler()))})),"function kernel(settings) {\n  const { context, constants } = settings;\n  ".concat(X.join(""),"\n  ").concat(o||"","\n").concat(F.join("\n"),"\n}")}function s(t,e){var n="single"===e.precision?t:"new Float32Array(".concat(t,".buffer)");return e.output[2]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],", ").concat(e.output[2],")"):e.output[1]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],")"):"renderOutput(".concat(n,", ").concat(e.output[0],")")}function u(t){var e=t.getPixels.toString(),n=!/^function/.test(e);return i.flattenFunctionToString("".concat(n?"function ":"").concat(e),{findDependency:function(t,e){return"utils"===t?"const ".concat(e," = ").concat(i[e].toString(),";"):null},thisLookup:function(e){if("context"===e)return null;if(t.hasOwnProperty(e))return JSON.stringify(t[e]);throw new Error("unhandled thisLookup ".concat(e))}})}function c(t,e,n){var r=t.toArray.toString(),a=!/^function/.test(r),o=i.flattenFunctionToString("".concat(a?"function ":"").concat(r),{findDependency:function(e,n){if("utils"===e)return"const ".concat(n," = ").concat(i[n].toString(),";");if("this"===e)return"framebuffer"===n?"":"".concat(a?"function ":"").concat(t[n].toString());throw new Error("unhandled fromObject")},thisLookup:function(n,r){if("texture"===n)return e;if("context"===n)return r?null:"gl";if(t.hasOwnProperty(n))return JSON.stringify(t[n]);throw new Error("unhandled thisLookup ".concat(n))}});return"() => {\n  function framebuffer() { return ".concat(n,"; };\n  ").concat(o,"\n  return toArray();\n  }")}function l(t,e,n,r,i){if(null===t)return null;if(null===e)return null;switch(typeof t){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)for(var a=0;a<e.length;a++){var o=e[a];if(("HTMLImageArray"===o.type||!o)&&o.uploadValue===t){var s=n[a].indexOf(t);if(-1!==s){var u="uploadValue_".concat(o.name,"[").concat(s,"]");return r.insertVariable(u,t),u}}}for(var c=0;c<e.length;c++){var l=e[c];if(t===l.uploadValue){var h="uploadValue_".concat(l.name);return r.insertVariable(h,l),h}}return null}e.exports={glKernelString:o}},{"../../utils":114,"gl-wiretap":3}],13:[function(t,e,n){var r=t("../kernel").Kernel,i=t("../../utils").utils,a=t("./texture/array-2-float").GLTextureArray2Float,o=t("./texture/array-2-float-2d").GLTextureArray2Float2D,s=t("./texture/array-2-float-3d").GLTextureArray2Float3D,u=t("./texture/array-3-float").GLTextureArray3Float,c=t("./texture/array-3-float-2d").GLTextureArray3Float2D,d=t("./texture/array-3-float-3d").GLTextureArray3Float3D,g=t("./texture/array-4-float").GLTextureArray4Float,v=t("./texture/array-4-float-2d").GLTextureArray4Float2D,y=t("./texture/array-4-float-3d").GLTextureArray4Float3D,x=t("./texture/float").GLTextureFloat,b=t("./texture/float-2d").GLTextureFloat2D,w=t("./texture/float-3d").GLTextureFloat3D,k=t("./texture/memory-optimized").GLTextureMemoryOptimized,S=t("./texture/memory-optimized-2d").GLTextureMemoryOptimized2D,T=t("./texture/memory-optimized-3d").GLTextureMemoryOptimized3D,A=t("./texture/unsigned").GLTextureUnsigned,E=t("./texture/unsigned-2d").GLTextureUnsigned2D,_=t("./texture/unsigned-3d").GLTextureUnsigned3D,L=t("./texture/graphical").GLTextureGraphical,I=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).transferValues=null,i.formatValues=null,i.TextureConstructor=null,i.renderOutput=null,i.renderRawOutput=null,i.texSize=null,i.translatedSource=null,i.compiledFragmentShader=null,i.compiledVertexShader=null,i.switchingKernels=null,i._textureSwitched=null,i._mappedTextureSwitched=null,i}return m(n,[{key:"setFixIntegerDivisionAccuracy",value:function(t){return this.fixIntegerDivisionAccuracy=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setFloatTextures",value:function(t){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=t,this}},{key:"checkTextureSize",value:function(){var t=this.constructor.features;if(this.texSize[0]>t.maxTextureSize||this.texSize[1]>t.maxTextureSize)throw new Error("Texture size [".concat(this.texSize[0],",").concat(this.texSize[1],"] generated by kernel is larger than supported size [").concat(t.maxTextureSize,",").concat(t.maxTextureSize,"]"))}},{key:"translateSource",value:function(){throw new Error('"translateSource" not defined on '.concat(this.constructor.name))}},{key:"pickRenderStrategy",value:function(t){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=function(t){return t},this.TextureConstructor=L,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=_,null):this.output[1]>0?(this.TextureConstructor=E,null):(this.TextureConstructor=A,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=_,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=E,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=A,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else{if("single"!==this.precision)throw new Error('unhandled precision of "'.concat(this.precision,'"'));if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=T,null):this.output[1]>0?(this.TextureConstructor=S,null):(this.TextureConstructor=k,null):this.output[2]>0?(this.TextureConstructor=w,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=x,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,null):this.output[1]>0?(this.TextureConstructor=o,null):(this.TextureConstructor=a,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,null):this.output[1]>0?(this.TextureConstructor=c,null):(this.TextureConstructor=u,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,null):this.output[1]>0?(this.TextureConstructor=v,null):(this.TextureConstructor=g,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=T,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=S,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=k,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=o,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=c,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=g,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=w,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=o,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=c,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=g,this.formatValues=i.erectArray4,null)}}throw new Error('unhandled return type "'.concat(this.returnType,'"'))}},{key:"getKernelString",value:function(){throw new Error("abstract method call")}},{key:"getMainResultTexture",value:function(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error("unhandled returnType type ".concat(this.returnType))}}},{key:"getMainResultKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultGraphical",value:function(){throw new Error("abstract method call")}},{key:"getMainResultMemoryOptimizedFloats",value:function(){throw new Error("abstract method call")}},{key:"getMainResultPackedPixels",value:function(){throw new Error("abstract method call")}},{key:"getMainResultString",value:function(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}},{key:"getMainResultNumberTexture",value:function(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}},{key:"getMainResultArray2Texture",value:function(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}},{key:"getMainResultArray3Texture",value:function(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}},{key:"getMainResultArray4Texture",value:function(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}},{key:"getFloatTacticDeclaration",value:function(){var t=this.getVariablePrecisionString(this.texSize,this.tactic);return"precision ".concat(t," float;\n")}},{key:"getIntTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic,!0)," int;\n")}},{key:"getSampler2DTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2D;\n")}},{key:"getSampler2DArrayTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2DArray;\n")}},{key:"renderTexture",value:function(){return this.immutable?this.texture.clone():this.texture}},{key:"readPackedPixelsToUint8Array",value:function(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');var t=this.texSize,e=this.context,n=new Uint8Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,n),n}},{key:"readPackedPixelsToFloat32Array",value:function(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}},{key:"readFloatPixelsToFloat32Array",value:function(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');var t=this.texSize,e=this.context,n=t[0],r=t[1],i=new Float32Array(n*r*4);return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,i),i}},{key:"getPixels",value:function(t){var e=this.context,n=this.output,r=p(n,2),a=r[0],o=r[1],s=new Uint8Array(a*o*4);return e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,s),new Uint8ClampedArray((t?s:i.flipPixels(s,a,o)).buffer)}},{key:"renderKernelsToArrays",value:function(){for(var t={result:this.renderOutput()},e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].toArray();return t}},{key:"renderKernelsToTextures",value:function(){var t={result:this.renderOutput()};if(this.immutable)for(var e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].clone();else for(var n=0;n<this.subKernels.length;n++)t[this.subKernels[n].property]=this.mappedTextures[n];return t}},{key:"resetSwitchingKernels",value:function(){var t=this.switchingKernels;return this.switchingKernels=null,t}},{key:"setOutput",value:function(t){var e=this.toKernelOutput(t);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");var n=[e[0],e[1]||1,e[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),a=this.texSize;if(a){var o=this.getVariablePrecisionString(a,this.tactic),s=this.getVariablePrecisionString(r,this.tactic);if(o!==s)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:s,needed:t})}this.output=e,this.threadDim=n,this.texSize=r;var u=this.context;if(u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],u.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(var c=0;c<this.mappedTextures.length;c++)this.mappedTextures[c].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=e;return this}},{key:"renderValues",value:function(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}},{key:"switchKernels",value:function(t){this.switchingKernels?this.switchingKernels.push(t):this.switchingKernels=[t]}},{key:"getVariablePrecisionString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e){if(!this.constructor.features.isSpeedTacticSupported)return"highp";var r=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],i=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],a=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],o=Math.log2(t[0]*t[1]);if(o<=r.rangeMax)return"lowp";if(o<=i.rangeMax)return"mediump";if(o<=a.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(e){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error('Unknown tactic "'.concat(e,'" use "speed", "balanced", "precision", or empty for auto'))}}},{key:"updateTextureArgumentRefs",value:function(t,e){if(this.immutable)if(this.texture.texture===e.texture){var n=t.prevArg;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),t.prevArg=e.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0)for(var r=this.mappedTextures,i=0;i<r.length;i++){var a=r[i];if(a.texture===e.texture){var o=t.prevArg;return o&&(1===o.texture._refs&&(a.delete(),r[i]=o.clone(),this._mappedTextureSwitched[i]=!0),o.delete()),void(t.prevArg=e.clone())}}}},{key:"onActivate",value:function(t){if(this._textureSwitched=!0,this.texture=t.texture,this.mappedTextures){for(var e=0;e<this.mappedTextures.length;e++)this._mappedTextureSwitched[e]=!0;this.mappedTextures=t.mappedTextures}}},{key:"initCanvas",value:function(){}}],[{key:"mode",get:function(){return"gpu"}},{key:"getIsFloatRead",value:function(){var t=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});t.build(),t.run();var e=t.renderOutput();return t.destroy(!0),1===e[0]}},{key:"getIsIntegerDivisionAccurate",value:function(){function t(t,e){return t[this.thread.x]/e[this.thread.x]}var e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[6,6030401],[3,3991]];e.build.apply(e,n),e.run.apply(e,n);var r=e.renderOutput();return e.destroy(!0),2===r[0]&&1511===r[1]}},{key:"getIsSpeedTacticSupported",value:function(){function t(t){return t[this.thread.x]}var e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[0,1,2,3]];e.build.apply(e,n),e.run.apply(e,n);var r=e.renderOutput();return e.destroy(!0),0===Math.round(r[0])&&1===Math.round(r[1])&&2===Math.round(r[2])&&3===Math.round(r[3])}},{key:"testCanvas",get:function(){throw new Error('"testCanvas" not defined on '.concat(this.name))}},{key:"testContext",get:function(){throw new Error('"testContext" not defined on '.concat(this.name))}},{key:"getFeatures",value:function(){var t=this.testContext,e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"setupFeatureChecks",value:function(){throw new Error('"setupFeatureChecks" not defined on '.concat(this.name))}},{key:"getSignature",value:function(t,e){return t.getVariablePrecisionString()+(e.length>0?":"+e.join(","):"")}},{key:"nativeFunctionArguments",value:function(t){for(var e=[],n=[],r=[],i=/^[a-zA-Z_]/,a=/[a-zA-Z_0-9]/,o=0,s=null,u=null;o<t.length;){var c=t[o],l=t[o+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==c||"*"!==l)if("MULTI_LINE_COMMENT"!==h||"*"!==c||"/"!==l)if("FUNCTION_ARGUMENTS"!==h||"/"!==c||"/"!==l)if("COMMENT"!==h||"\n"!==c)if(null!==h||"("!==c){if("FUNCTION_ARGUMENTS"===h){if(")"===c){r.pop();break}if("f"===c&&"l"===l&&"o"===t[o+2]&&"a"===t[o+3]&&"t"===t[o+4]&&" "===t[o+5]){r.push("DECLARE_VARIABLE"),u="float",s="",o+=6;continue}if("i"===c&&"n"===l&&"t"===t[o+2]&&" "===t[o+3]){r.push("DECLARE_VARIABLE"),u="int",s="",o+=4;continue}if("v"===c&&"e"===l&&"c"===t[o+2]&&"2"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec2",s="",o+=5;continue}if("v"===c&&"e"===l&&"c"===t[o+2]&&"3"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec3",s="",o+=5;continue}if("v"===c&&"e"===l&&"c"===t[o+2]&&"4"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec4",s="",o+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===s){if(" "===c){o++;continue}if(!i.test(c))throw new Error("variable name is not expected string")}s+=c,a.test(l)||(r.pop(),n.push(s),e.push(C[u]))}o++}else r.push("FUNCTION_ARGUMENTS"),o++;else r.pop(),o++;else r.push("COMMENT"),o+=2;else r.pop(),o+=2;else r.push("MULTI_LINE_COMMENT"),o+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:e}}},{key:"nativeFunctionReturnType",value:function(t){return C[t.match(/int|float|vec[2-4]/)[0]]}},{key:"combineKernels",value:function(t,e){t.apply(null,arguments);var n,r=e.texSize,a=r.texSize,o=r.context,s=r.threadDim;if("single"===e.precision){var u=a[0],c=Math.ceil(a[1]/4);n=new Float32Array(u*c*4*4),o.readPixels(0,0,u,4*c,o.RGBA,o.FLOAT,n)}else{var l=new Uint8Array(a[0]*a[1]*4);o.readPixels(0,0,a[0],a[1],o.RGBA,o.UNSIGNED_BYTE,l),n=new Float32Array(l.buffer)}return n=n.subarray(0,s[0]*s[1]*s[2]),1===e.output.length?n:2===e.output.length?i.splitArray(n,e.output[0]):3===e.output.length?i.splitArray(n,e.output[0]*e.output[1]).map((function(t){return i.splitArray(t,e.output[0])})):void 0}}]),n}(r),C={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};e.exports={GLKernel:I}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float2D:i}},{"../../../utils":114,"./float":25}],15:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float3D:i}},{"../../../utils":114,"./float":25}],16:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float:i}},{"../../../utils":114,"./float":25}],17:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float2D:i}},{"../../../utils":114,"./float":25}],18:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float3D:i}},{"../../../utils":114,"./float":25}],19:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray3(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float:i}},{"../../../utils":114,"./float":25}],20:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float2D:i}},{"../../../utils":114,"./float":25}],21:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float3D:i}},{"../../../utils":114,"./float":25}],22:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray4(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float:i}},{"../../../utils":114,"./float":25}],23:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat2D:i}},{"../../../utils":114,"./float":25}],24:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat3D:i}},{"../../../utils":114,"./float":25}],25:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"textureType",get:function(){return this.context.FLOAT}},{key:"renderRawOutput",value:function(){var t=this.context,e=this.size;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var n=new Float32Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.FLOAT,n),n}},{key:"renderValues",value:function(){return this._deleted?null:this.renderRawOutput()}},{key:"toArray",value:function(){return r.erectFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureFloat:i}},{"../../../utils":114,"./index":27}],26:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return this.renderValues()}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureGraphical:r}},{"./unsigned":33}],27:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"textureType",get:function(){throw new Error('"textureType" not implemented on '.concat(this.name))}},{key:"clone",value:function(){return new this.constructor(this)}},{key:"beforeMutate",value:function(){return this.texture._refs>1&&(this.newTexture(),!0)}},{key:"cloneTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size,n=this.texture;this.kernel.debug&&console.warn("cloning internal texture"),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),i(t,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var r=t.createTexture();i(t,r),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),t.copyTexSubImage2D(t.TEXTURE_2D,0,0,0,0,0,e[0],e[1]),r._refs=1,this.texture=r}},{key:"newTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size;this.kernel.debug&&console.warn("new internal texture");var n=t.createTexture();i(t,n),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}},{key:"clear",value:function(){if(this.texture._refs){this.texture._refs--;var t=this.context,e=this.texture=t.createTexture();i(t,e);var n=this.size;e._refs=1,t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}var r=this.context,a=this.texture;r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer()),r.bindTexture(r.TEXTURE_2D,a),i(r,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}},{key:"delete",value:function(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture))}},{key:"framebuffer",value:function(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer}}]),n}(t("../../../texture").Texture);function i(t,e){t.activeTexture(t.TEXTURE15),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}e.exports={GLTexture:r}},{"../../../texture":113}],28:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized2D:i}},{"../../../utils":114,"./float":25}],29:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized3D:i}},{"../../../utils":114,"./float":25}],30:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized:i}},{"../../../utils":114,"./float":25}],31:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned2D:i}},{"../../../utils":114,"./unsigned":33}],32:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned3D:i}},{"../../../utils":114,"./unsigned":33}],33:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"textureType",get:function(){return this.context.UNSIGNED_BYTE}},{key:"renderRawOutput",value:function(){var t=this.context;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var e=new Uint8Array(this.size[0]*this.size[1]*4);return t.readPixels(0,0,this.size[0],this.size[1],t.RGBA,t.UNSIGNED_BYTE,e),e}},{key:"renderValues",value:function(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}},{key:"toArray",value:function(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureUnsigned:i}},{"../../../utils":114,"./index":27}],34:[function(t,e,n){var r=t("gl"),i=t("../web-gl/kernel").WebGLKernel,a=t("../gl/kernel-string").glKernelString,o=null,s=null,p=null,d=null,g=null,v=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"initCanvas",value:function(){return{}}},{key:"initContext",value:function(){return r(2,2,{preserveDrawingBuffer:!0})}},{key:"initExtensions",value:function(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}},{key:"build",value:function(){u(c(n.prototype),"build",this).apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}},{key:"destroyExtensions",value:function(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toString",value:function(){var t="const gl = context || require('gl')(1, 1);\n",e="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return a(this.constructor,arguments,this,t,e)}},{key:"setOutput",value:function(t){return u(c(n.prototype),"setOutput",this).call(this,t),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}],[{key:"isSupported",get:function(){return null!==o?o:(this.setupFeatureChecks(),o=null!==p)}},{key:"setupFeatureChecks",value:function(){if(s=null,d=null,"function"===typeof r)try{if(!(p=r(2,2,{preserveDrawingBuffer:!0}))||!p.getExtension)return;d={STACKGL_resize_drawingbuffer:p.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:p.getExtension("STACKGL_destroy_context"),OES_texture_float:p.getExtension("OES_texture_float"),OES_texture_float_linear:p.getExtension("OES_texture_float_linear"),OES_element_index_uint:p.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:p.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:p.getExtension("WEBGL_color_buffer_float")},g=this.getFeatures()}catch(t){console.warn(t)}}},{key:"isContextMatch",value:function(t){try{return"ANGLE"===t.getParameter(t.RENDERER)}catch(e){return!1}}},{key:"getIsTextureFloat",value:function(){return Boolean(d.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(d.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return d.WEBGL_draw_buffers?p.getParameter(d.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return p.getParameter(p.MAX_TEXTURE_SIZE)}},{key:"testCanvas",get:function(){return s}},{key:"testContext",get:function(){return p}},{key:"features",get:function(){return g}},{key:"destroyContext",value:function(t){var e=t.getExtension("STACKGL_destroy_context");e&&e.destroy&&e.destroy()}}]),n}(i);e.exports={HeadlessGLKernel:v}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(t,e,n){var r=function(){function t(e,n){f(this,t);var r=n.name,i=n.kernel,a=n.context,o=n.checkContext,s=n.onRequestContextHandle,u=n.onUpdateValueMismatch,c=n.origin,l=n.strictIntegers,h=n.type,p=n.tactic;if(!r)throw new Error("name not set");if(!h)throw new Error("type not set");if(!c)throw new Error("origin not set");if("user"!==c&&"constants"!==c)throw new Error('origin must be "user" or "constants" value is "'.concat(c,'"'));if(!s)throw new Error("onRequestContextHandle is not set");this.name=r,this.origin=c,this.tactic=p,this.varName="constants"===c?"constants.".concat(r):r,this.kernel=i,this.strictIntegers=l,this.type=e.type||h,this.size=e.size||null,this.index=null,this.context=a,this.checkContext=null===o||void 0===o||o,this.contextHandle=null,this.onRequestContextHandle=s,this.onUpdateValueMismatch=u,this.forceUploadEachRun=null}return m(t,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(name)}},{key:"getSource",value:function(){throw new Error('"getSource" not defined on '.concat(this.constructor.name))}},{key:"updateValue",value:function(t){throw new Error('"updateValue" not defined on '.concat(this.constructor.name))}}]),t}();e.exports={KernelValue:r}},{}],36:[function(t,e,n){var r=t("../utils").utils,i=t("../input").Input,a=function(){function t(e,n){if(f(this,t),"object"!==typeof e){if("string"!==typeof e)throw new Error("source not a string");if(!r.isFunctionString(e))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof e?r.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null}return m(t,[{key:"mergeSettings",value:function(t){for(var e in t)if(t.hasOwnProperty(e)&&this.hasOwnProperty(e)){switch(e){case"output":if(!Array.isArray(t.output)){this.setOutput(t.output);continue}break;case"functions":this.functions=[];for(var n=0;n<t.functions.length;n++)this.addFunction(t.functions[n]);continue;case"graphical":t[e]&&!t.hasOwnProperty("precision")&&(this.precision="unsigned"),this[e]=t[e];continue;case"nativeFunctions":if(!t.nativeFunctions)continue;this.nativeFunctions=[];for(var r=0;r<t.nativeFunctions.length;r++){var i=t.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}continue}this[e]=t[e]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(t))}},{key:"build",value:function(){throw new Error('"build" not defined on '.concat(this.constructor.name))}},{key:"run",value:function(){throw new Error('"run" not defined on '.concat(this.constructor.name))}},{key:"initCanvas",value:function(){throw new Error('"initCanvas" not defined on '.concat(this.constructor.name))}},{key:"initContext",value:function(){throw new Error('"initContext" not defined on '.concat(this.constructor.name))}},{key:"initPlugins",value:function(t){throw new Error('"initPlugins" not defined on '.concat(this.constructor.name))}},{key:"addFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.name&&t.source&&t.argumentTypes&&"returnType"in t)this.functions.push(t);else if("settings"in t&&"source"in t)this.functions.push(this.functionToIGPUFunction(t.source,t.settings));else{if("string"!==typeof t&&"function"!==typeof t)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(t,e))}return this}},{key:"addNativeFunction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.argumentTypes?o(n.argumentTypes):this.constructor.nativeFunctionArguments(e)||{},i=r.argumentTypes,a=r.argumentNames;return this.nativeFunctions.push({name:t,source:e,settings:n,argumentTypes:i,argumentNames:a,returnType:n.returnType||this.constructor.nativeFunctionReturnType(e)}),this}},{key:"setupArguments",value:function(t){if(this.kernelArguments=[],this.argumentTypes)for(var e=0;e<this.argumentTypes.length;e++)this.kernelArguments.push({type:this.argumentTypes[e]});else if(!this.argumentTypes){this.argumentTypes=[];for(var n=0;n<t.length;n++){var a=r.getVariableType(t[n],this.strictIntegers),o="Integer"===a?"Number":a;this.argumentTypes.push(o),this.kernelArguments.push({type:o})}}this.argumentSizes=new Array(t.length),this.argumentBitRatios=new Int32Array(t.length);for(var s=0;s<t.length;s++){var u=t[s];this.argumentSizes[s]=u.constructor===i?u.size:null,this.argumentBitRatios[s]=this.getBitRatio(u)}if(this.argumentNames.length!==t.length)throw new Error("arguments are miss-aligned")}},{key:"setupConstants",value:function(){this.kernelConstants=[];var t=null===this.constantTypes;if(t&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(var e in this.constants){if(t){var n=r.getVariableType(this.constants[e],this.strictIntegers);this.constantTypes[e]=n,this.kernelConstants.push({name:e,type:n})}else this.kernelConstants.push({name:e,type:this.constantTypes[e]});this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}}},{key:"setOptimizeFloatMemory",value:function(t){return this.optimizeFloatMemory=t,this}},{key:"toKernelOutput",value:function(t){return t.hasOwnProperty("x")?t.hasOwnProperty("y")?t.hasOwnProperty("z")?[t.x,t.y,t.z]:[t.x,t.y]:[t.x]:t}},{key:"setOutput",value:function(t){return this.output=this.toKernelOutput(t),this}},{key:"setDebug",value:function(t){return this.debug=t,this}},{key:"setGraphical",value:function(t){return this.graphical=t,this.precision="unsigned",this}},{key:"setLoopMaxIterations",value:function(t){return this.loopMaxIterations=t,this}},{key:"setConstants",value:function(t){return this.constants=t,this}},{key:"setConstantTypes",value:function(t){return this.constantTypes=t,this}},{key:"setFunctions",value:function(t){for(var e=0;e<t.length;e++)this.addFunction(t[e]);return this}},{key:"setNativeFunctions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.name,i=n.source;this.addNativeFunction(r,i,n)}return this}},{key:"setInjectedNative",value:function(t){return this.injectedNative=t,this}},{key:"setPipeline",value:function(t){return this.pipeline=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setDimensions",value:function(t){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=t,this}},{key:"setOutputToTexture",value:function(t){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=t,this}},{key:"setImmutable",value:function(t){return this.immutable=t,this}},{key:"setCanvas",value:function(t){return this.canvas=t,this}},{key:"setStrictIntegers",value:function(t){return this.strictIntegers=t,this}},{key:"setDynamicOutput",value:function(t){return this.dynamicOutput=t,this}},{key:"setHardcodeConstants",value:function(t){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(t),this.setDynamicArguments(t),this}},{key:"setDynamicArguments",value:function(t){return this.dynamicArguments=t,this}},{key:"setUseLegacyEncoder",value:function(t){return this.useLegacyEncoder=t,this}},{key:"setWarnVarUsage",value:function(t){return r.warnDeprecated("method","setWarnVarUsage"),this}},{key:"getCanvas",value:function(){return r.warnDeprecated("method","getCanvas"),this.canvas}},{key:"getWebGl",value:function(){return r.warnDeprecated("method","getWebGl"),this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"setArgumentTypes",value:function(t){if(Array.isArray(t))this.argumentTypes=t;else for(var e in this.argumentTypes=[],t)if(t.hasOwnProperty(e)){var n=this.argumentNames.indexOf(e);if(-1===n)throw new Error("unable to find argument ".concat(e));this.argumentTypes[n]=t[e]}return this}},{key:"setTactic",value:function(t){return this.tactic=t,this}},{key:"requestFallback",value:function(t){if(!this.onRequestFallback)throw new Error('"onRequestFallback" not defined on '.concat(this.constructor.name));return this.fallbackRequested=!0,this.onRequestFallback(t)}},{key:"validateSettings",value:function(){throw new Error('"validateSettings" not defined on '.concat(this.constructor.name))}},{key:"addSubKernel",value:function(t){if(null===this.subKernels&&(this.subKernels=[]),!t.source)throw new Error('subKernel missing "source" property');if(!t.property&&isNaN(t.property))throw new Error('subKernel missing "property" property');if(!t.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(t),this}},{key:"destroy",value:function(t){throw new Error('"destroy" called on '.concat(this.constructor.name))}},{key:"getBitRatio",value:function(t){if("single"===this.precision)return 4;if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"getPixels",value:function(t){throw new Error('"getPixels" called on '.concat(this.constructor.name))}},{key:"checkOutput",value:function(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(var t=0;t<this.output.length;t++)if(isNaN(this.output[t])||this.output[t]<1)throw new Error("".concat(this.constructor.name,".output[").concat(t,"] incorrectly defined as `").concat(this.output[t],"`, needs to be numeric, and greater than 0"))}},{key:"prependString",value:function(t){throw new Error('"prependString" called on '.concat(this.constructor.name))}},{key:"hasPrependString",value:function(t){throw new Error('"hasPrependString" called on '.concat(this.constructor.name))}},{key:"toJSON",value:function(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((function(t){return t.name})):null,returnType:this.returnType}}}},{key:"buildSignature",value:function(t){var e=this.constructor;this.signature=e.getSignature(this,e.getArgumentTypes(this,t))}},{key:"functionToIGPUFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t&&"function"!==typeof t)throw new Error("source not a string or function");var n="string"===typeof t?t:t.toString(),i=[];return i=Array.isArray(e.argumentTypes)?e.argumentTypes:"object"===typeof e.argumentTypes?r.getArgumentNamesFromString(n).map((function(t){return e.argumentTypes[t]}))||[]:e.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:e.returnType||null}}},{key:"onActivate",value:function(t){}}],[{key:"isSupported",get:function(){throw new Error('"isSupported" not implemented on '.concat(this.name))}},{key:"isContextMatch",value:function(t){throw new Error('"isContextMatch" not implemented on '.concat(this.name))}},{key:"getFeatures",value:function(){throw new Error('"getFeatures" not implemented on '.concat(this.name))}},{key:"destroyContext",value:function(t){throw new Error('"destroyContext" called on '.concat(this.name))}},{key:"nativeFunctionArguments",value:function(){throw new Error('"nativeFunctionArguments" called on '.concat(this.name))}},{key:"nativeFunctionReturnType",value:function(){throw new Error('"nativeFunctionReturnType" called on '.concat(this.name))}},{key:"combineKernels",value:function(){throw new Error('"combineKernels" called on '.concat(this.name))}},{key:"getArgumentTypes",value:function(t,e){for(var n=new Array(e.length),i=0;i<e.length;i++){var a=e[i],o=t.argumentTypes[i];if(a.type)n[i]=a.type;else switch(o){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(a);break;default:n[i]=o}}return n}},{key:"getSignature",value:function(t,e){throw new Error('"getSignature" not implemented on '.concat(this.name))}}]),t}();function o(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++){var i=e[r];n.push(t[i])}return{argumentTypes:n,argumentNames:e}}e.exports={Kernel:a}},{"../input":110,"../utils":114}],37:[function(t,e,n){var r="__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(".concat(Math.E,", x) - pow(").concat(Math.E,", -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(").concat(Math.E,", x) + pow(").concat(Math.E,", -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(").concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],38:[function(t,e,n){var r=t("../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),i=e.call(this,t,r),r&&r.hasOwnProperty("fixIntegerDivisionAccuracy")&&(i.fixIntegerDivisionAccuracy=r.fixIntegerDivisionAccuracy),i}return m(n,[{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);var n=this.getType(t.consequent),r=this.getType(t.alternate);return null===n&&null===r?(e.push("if ("),this.astGeneric(t.test,e),e.push(") {"),this.astGeneric(t.consequent,e),e.push(";"),e.push("} else {"),this.astGeneric(t.alternate,e),e.push(";"),e.push("}"),e):(e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e)}},{key:"astFunction",value:function(t,e){if(this.isRootKernel)e.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(t.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));var n=this.returnType;if(n){var i=a[n];if(!i)throw new Error("unknown type ".concat(n));e.push(i)}else e.push("void")}if(e.push(" "),e.push(this.name),e.push("("),!this.isRootKernel)for(var o=0;o<this.argumentNames.length;++o){var s=this.argumentNames[o];o>0&&e.push(", ");var u=this.argumentTypes[this.argumentNames.indexOf(s)];if(!u)throw this.astErrorOutput("Unknown argument ".concat(s," type"),t);"LiteralInteger"===u&&(this.argumentTypes[o]=u="Number");var c=a[u];if(!c)throw this.astErrorOutput("Unexpected expression",t);var l=r.sanitizeName(s);"sampler2D"===c||"sampler2DArray"===c?e.push("".concat(c," user_").concat(l,",ivec2 user_").concat(l,"Size,ivec3 user_").concat(l,"Dim")):e.push("".concat(c," user_").concat(l))}e.push(") {\n");for(var h=0;h<t.body.body.length;++h)this.astGeneric(t.body.body[h],e),e.push("\n");return e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){if(!t.argument)throw this.astErrorOutput("Unexpected return statement",t);this.pushState("skip-literal-correction");var n=this.getType(t.argument);this.popState("skip-literal-correction");var r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(t.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(t.argument,r),"Integer"===this.getType(t)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(t.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(t.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,r);break;default:this.astGeneric(t.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"Input":this.astGeneric(t.argument,r);break;default:throw this.astErrorOutput("unhandled return type ".concat(this.returnType),t)}return this.isRootKernel?(e.push("kernelResult = ".concat(r.join(""),";")),e.push("return;")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ").concat(r.join(""),";")),e.push("return subKernelResult_".concat(this.name,";"))):e.push("return ".concat(r.join(""),";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);var n=this.astKey(t);return Number.isInteger(t.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push("".concat(t.value))):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",e.push("".concat(t.value,".0"))):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push(Math.round(t.value))):(this.literalTypes[n]="Number",e.push("".concat(t.value))),e}},{key:"astBinaryExpression",value:function(t,e){if(this.checkAndUpconvertOperator(t,e))return e;if(this.fixIntegerDivisionAccuracy&&"/"===t.operator){switch(e.push("divWithIntCheck("),this.pushState("building-float"),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(", "),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return this.popState("building-float"),e.push(")"),e}e.push("(");var n=this.getType(t.left)||"Number",r=this.getType(t.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",t);var i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===t.operator||"<"===t.operator&&"Literal"===t.right.type)&&!Number.isInteger(t.right.value)){this.pushState("building-float"),this.castValueToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-integer"),"Literal"===t.right.type){var a=[];if(this.astGeneric(t.right,a),"Integer"!==this.getType(t.right))throw this.astErrorOutput("Unhandled binary expression with literal",t);e.push(a.join(""))}else e.push("int("),this.astGeneric(t.right,e),e.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToInteger(t.right,e),this.popState("building-integer");break;case"Number & Integer":case"Float & Integer":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToFloat(t.right,e),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToInteger(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-float"),this.astGeneric(t.right,e),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-boolean");break;default:throw this.astErrorOutput("Unhandled binary expression between ".concat(i),t)}return e.push(")"),e}},{key:"checkAndUpconvertOperator",value:function(t,e){var n=this.checkAndUpconvertBitwiseOperators(t,e);if(n)return n;var r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[t.operator];if(!r)return null;switch(e.push(r),e.push("("),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseOperators",value:function(t,e){var n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.left)){case"Number":case"Float":this.castValueToInteger(t.left,e);break;case"LiteralInteger":this.castLiteralToInteger(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Number":case"Float":this.castValueToInteger(t.right,e);break;case"LiteralInteger":this.castLiteralToInteger(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){var n={"~":"bitwiseNot"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.argument)){case"Number":case"Float":this.castValueToInteger(t.argument,e);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,e);break;default:this.astGeneric(t.argument,e)}return e.push(")"),e}},{key:"castLiteralToInteger",value:function(t,e){return this.pushState("casting-to-integer"),this.astGeneric(t,e),this.popState("casting-to-integer"),e}},{key:"castLiteralToFloat",value:function(t,e){return this.pushState("casting-to-float"),this.astGeneric(t,e),this.popState("casting-to-float"),e}},{key:"castValueToInteger",value:function(t,e){return this.pushState("casting-to-integer"),e.push("int("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-integer"),e}},{key:"castValueToFloat",value:function(t,e){return this.pushState("casting-to-float"),e.push("float("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-float"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){var s=t.init.declarations;s.length>1&&(o=!1),this.astGeneric(t.init,n);for(var u=0;u<s.length;u++)s[u].init&&"Literal"!==s[u].init.type&&(o=!1)}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o){var c=n.join(""),l=";"!==c[c.length-1];e.push("for (".concat(c).concat(l?";":"").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n")}else{var h=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),"\n"),e.push("for (int ".concat(h,"=0;").concat(h,"<LOOP_MAX;").concat(h,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),this.astGeneric(t.body,e),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){if("%="===t.operator)this.astGeneric(t.left,e),e.push("="),e.push("mod("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")");else{if("**="!==t.operator){var n=this.getType(t.left),r=this.getType(t.right);return this.astGeneric(t.left,e),e.push(t.operator),"Integer"!==n&&"Integer"===r?(e.push("float("),this.astGeneric(t.right,e),e.push(")")):this.astGeneric(t.right,e),e}this.astGeneric(t.left,e),e.push("="),e.push("pow("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")")}}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){var n=t.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",t);for(var i=[],o=null,s=[],u=[],c=0;c<n.length;c++){var l=n[c],h=l.init,p=this.getDeclaration(l.id),d=this.getType(l.init),f=d;"LiteralInteger"===f&&(f="Integer"===p.suggestedType?"Integer":"Number");var m=a[f];if(!m)throw this.astErrorOutput("Markup type ".concat(f," not handled"),t);var g=[];if("Integer"===d&&"Integer"===f){if(p.valueType="Number",0===c||null===o)g.push("float ");else if(f!==o)throw new Error("Unhandled declaration");o=f,g.push("user_".concat(r.sanitizeName(l.id.name),"=")),g.push("float("),this.astGeneric(h,g),g.push(")")}else p.valueType=f,0===c||null===o?g.push("".concat(m," ")):f!==o&&(s.push(u.join(",")),u=[],g.push("".concat(m," "))),o=f,g.push("user_".concat(r.sanitizeName(l.id.name),"=")),"Number"===d&&"Integer"===f?h.left&&"Literal"===h.left.type?this.astGeneric(h,g):(g.push("int("),this.astGeneric(h,g),g.push(")")):"LiteralInteger"===d&&"Integer"===f?this.castLiteralToInteger(h,g):this.astGeneric(h,g);u.push(g.join(""))}return u.length>0&&s.push(u.join(",")),i.push(s.join(";")),e.push(i.join("")),e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){if("SwitchStatement"!==t.type)throw this.astErrorOutput("Invalid switch statement",t);var n=t.discriminant,r=t.cases,i=this.getType(n),a="switchDiscriminant".concat(this.astKey(t,"_"));switch(i){case"Float":case"Number":e.push("float ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n");break;case"Integer":e.push("int ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,e),e;for(var o=!1,s=[],u=!1,c=!1,l=0;l<r.length;l++){if(r[l].test){if(0!==l&&c?o?(e.push("".concat(a," == ")),o=!1):e.push(" else if (".concat(a," == ")):(c=!0,e.push("if (".concat(a," == "))),"Integer"===i)switch(this.getType(r[l].test)){case"Number":case"Float":this.castValueToInteger(r[l].test,e);break;case"LiteralInteger":this.castLiteralToInteger(r[l].test,e)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[l].test)){case"LiteralInteger":this.castLiteralToFloat(r[l].test,e);break;case"Integer":this.castValueToFloat(r[l].test,e)}}if(!r[l].consequent||0===r[l].consequent.length){o=!0,e.push(" || ");continue}e.push(") {\n")}else{if(r.length>l+1){u=!0,this.astGeneric(r[l].consequent,s);continue}e.push(" else {\n")}this.astGeneric(r[l].consequent,e),e.push("\n}")}return u&&(e.push(" else {"),e.push(s.join("")),e.push("}")),e}},{key:"astThisExpression",value:function(t,e){return e.push("this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),i=n.property,a=n.name,o=n.signature,s=n.origin,u=n.type,c=n.xProperty,l=n.yProperty,h=n.zProperty;switch(o){case"value.thread.value":case"this.thread.value":if("x"!==a&&"y"!==a&&"z"!==a)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",t);return e.push("threadId.".concat(a)),e;case"this.output.value":if(this.dynamicOutput)switch(a){case"x":this.isState("casting-to-float")?e.push("float(uOutputDim.x)"):e.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?e.push("float(uOutputDim.y)"):e.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?e.push("float(uOutputDim.z)"):e.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",t)}else switch(a){case"x":this.isState("casting-to-integer")?e.push(this.output[0]):e.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?e.push(this.output[1]):e.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?e.push(this.output[2]):e.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===s)return e.push(Math[a]),e;var p=r.sanitizeName(a);switch(i){case"r":return e.push("user_".concat(p,".r")),e;case"g":return e.push("user_".concat(p,".g")),e;case"b":return e.push("user_".concat(p,".b")),e;case"a":return e.push("user_".concat(p,".a")),e}break;case"this.constants.value":if("undefined"===typeof c)switch(u){case"Array(2)":case"Array(3)":case"Array(4)":return e.push("constants_".concat(r.sanitizeName(a))),e}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;case"fn()[][]":return this.astCallExpression(t.object.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.object.property)),e.push("]"),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.property)),e.push("]"),e;case"[][]":return this.astArrayExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;default:throw this.astErrorOutput("Unexpected expression",t)}if(!1===t.computed)switch(u){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(s,"_").concat(r.sanitizeName(a))),e}var d="".concat(s,"_").concat(r.sanitizeName(a));switch(u){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(c)),e.push("]");break;case"HTMLImageArray":e.push("getImage3D(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"ArrayTexture(1)":e.push("getFloatFromSampler2D(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":e.push("getMemoryOptimizedVec2(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"ArrayTexture(2)":e.push("getVec2FromSampler2D(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":e.push("getMemoryOptimizedVec3(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"ArrayTexture(3)":e.push("getVec3FromSampler2D(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":e.push("getMemoryOptimizedVec4(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":e.push("getVec4FromSampler2D(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)e.push("getMemoryOptimized32(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");else{var f="user"===s?this.lookupFunctionArgumentBitRatio(this.name,a):this.constantBitRatios[a];switch(f){case 1:e.push("get8(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, "));break;case 2:e.push("get16(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, "));break;case 4:case 0:e.push("get32(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, "));break;default:throw new Error("unhandled bit ratio of ".concat(f))}this.memberExpressionXYZ(c,l,h,e),e.push(")")}break;case"MemoryOptimizedNumberTexture":e.push("getMemoryOptimized32(".concat(d,", ").concat(d,"Size, ").concat(d,"Dim, ")),this.memberExpressionXYZ(c,l,h,e),e.push(")");break;case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("".concat(d,"[").concat(this.memberExpressionPropertyMarkup(l),"]")),l&&e.push("[".concat(this.memberExpressionPropertyMarkup(c),"]"));break;default:throw new Error('unhandled member expression "'.concat(u,'"'))}return e}},{key:"astCallExpression",value:function(t,e){if(!t.callee)throw this.astErrorOutput("Unknown CallExpression",t);var n=null,i=this.isAstMathFunction(t);if(!(n=i||t.callee.object&&"ThisExpression"===t.callee.object.type?t.callee.property.name:"SequenceExpression"!==t.callee.type||"Literal"!==t.callee.expressions[0].type||isNaN(t.callee.expressions[0].raw)?t.callee.name:t.callee.expressions[1].property.name))throw this.astErrorOutput("Unhandled function, couldn't find name",t);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(var a=0;a<this.plugins.length;a++){var o=this.plugins[a];if("Math.random()"===o.functionMatch&&o.functionReplace)return e.push(o.functionReplace),e}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("("),i)for(var s=0;s<t.arguments.length;++s){var u=t.arguments[s],c=this.getType(u);s>0&&e.push(", "),"Integer"===c?this.castValueToFloat(u,e):this.astGeneric(u,e)}else for(var l=this.lookupFunctionArgumentTypes(n)||[],h=0;h<t.arguments.length;++h){var p=t.arguments[h],d=l[h];h>0&&e.push(", ");var f=this.getType(p);switch(d||(this.triggerImplyArgumentType(n,h,f,this),d=f),f){case"Boolean":this.astGeneric(p,e);continue;case"Number":case"Float":if("Integer"===d){e.push("int("),this.astGeneric(p,e),e.push(")");continue}if("Number"===d||"Float"===d){this.astGeneric(p,e);continue}if("LiteralInteger"===d){this.castLiteralToFloat(p,e);continue}break;case"Integer":if("Number"===d||"Float"===d){e.push("float("),this.astGeneric(p,e),e.push(")");continue}if("Integer"===d){this.astGeneric(p,e);continue}break;case"LiteralInteger":if("Integer"===d){this.castLiteralToInteger(p,e);continue}if("Number"===d||"Float"===d){this.castLiteralToFloat(p,e);continue}if("LiteralInteger"===d){this.astGeneric(p,e);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(d===f){if("Identifier"===p.type)e.push("user_".concat(r.sanitizeName(p.name)));else{if("ArrayExpression"!==p.type&&"MemberExpression"!==p.type&&"CallExpression"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),t);this.astGeneric(p,e)}continue}break;case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(d===f){if("Identifier"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),t);this.triggerImplyArgumentBitRatio(this.name,p.name,n,h);var m=r.sanitizeName(p.name);e.push("user_".concat(m,",user_").concat(m,"Size,user_").concat(m,"Dim"));continue}}throw this.astErrorOutput("Unhandled argument combination of ".concat(f," and ").concat(d,' for argument named "').concat(p.name,'"'),t)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){var n=this.getType(t),r=t.elements.length;switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("mat".concat(r,"("));break;default:e.push("vec".concat(r,"("))}for(var i=0;i<r;++i){i>0&&e.push(", ");var a=t.elements[i];this.astGeneric(a,e)}return e.push(")"),e}},{key:"memberExpressionXYZ",value:function(t,e,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),e?r.push(this.memberExpressionPropertyMarkup(e),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(t)),r}},{key:"memberExpressionPropertyMarkup",value:function(t){if(!t)throw new Error("Property not set");var e=[];switch(this.getType(t)){case"Number":case"Float":this.castValueToInteger(t,e);break;case"LiteralInteger":this.castLiteralToInteger(t,e);break;default:this.astGeneric(t,e)}return e.join("")}}]),n}(t("../function-node").FunctionNode),a={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4","Matrix(2)":"mat2","Matrix(3)":"mat3","Matrix(4)":"mat4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",OffscreenCanvas:"sampler2D",HTMLImage:"sampler2D",ImageBitmap:"sampler2D",ImageData:"sampler2D",HTMLImageArray:"sampler2DArray"},o={"===":"==","!==":"!="};e.exports={WebGLFunctionNode:i}},{"../../utils":114,"../function-node":10}],39:[function(t,e,n){var r=t("./kernel-value/boolean").WebGLKernelValueBoolean,i=t("./kernel-value/float").WebGLKernelValueFloat,a=t("./kernel-value/integer").WebGLKernelValueInteger,o=t("./kernel-value/html-image").WebGLKernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage,u=t("./kernel-value/html-video").WebGLKernelValueHTMLVideo,c=t("./kernel-value/dynamic-html-video").WebGLKernelValueDynamicHTMLVideo,l=t("./kernel-value/single-input").WebGLKernelValueSingleInput,h=t("./kernel-value/dynamic-single-input").WebGLKernelValueDynamicSingleInput,p=t("./kernel-value/unsigned-input").WebGLKernelValueUnsignedInput,d=t("./kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput,f=t("./kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture,m=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture,g=t("./kernel-value/number-texture").WebGLKernelValueNumberTexture,v=t("./kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture,y=t("./kernel-value/single-array").WebGLKernelValueSingleArray,x=t("./kernel-value/dynamic-single-array").WebGLKernelValueDynamicSingleArray,b=t("./kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI,w=t("./kernel-value/dynamic-single-array1d-i").WebGLKernelValueDynamicSingleArray1DI,k=t("./kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI,S=t("./kernel-value/dynamic-single-array2d-i").WebGLKernelValueDynamicSingleArray2DI,T=t("./kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI,A=t("./kernel-value/dynamic-single-array3d-i").WebGLKernelValueDynamicSingleArray3DI,E=t("./kernel-value/array2").WebGLKernelValueArray2,_=t("./kernel-value/array3").WebGLKernelValueArray3,L=t("./kernel-value/array4").WebGLKernelValueArray4,I=t("./kernel-value/unsigned-array").WebGLKernelValueUnsignedArray,C={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:c},static:{Boolean:r,Float:i,Integer:a,Array:I,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:f,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:x,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:h,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:c},static:{Boolean:r,Float:i,Integer:a,Array:y,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":b,"Array1D(3)":b,"Array1D(4)":b,"Array2D(2)":k,"Array2D(3)":k,"Array2D(4)":k,"Array3D(2)":T,"Array3D(3)":T,"Array3D(4)":T,Input:l,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:f,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u}}};function O(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=C[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]}e.exports={lookupKernelValueType:O,kernelValueMaps:C}},{"./kernel-value/array2":41,"./kernel-value/array3":42,"./kernel-value/array4":43,"./kernel-value/boolean":44,"./kernel-value/dynamic-html-image":45,"./kernel-value/dynamic-html-video":46,"./kernel-value/dynamic-memory-optimized-number-texture":47,"./kernel-value/dynamic-number-texture":48,"./kernel-value/dynamic-single-array":49,"./kernel-value/dynamic-single-array1d-i":50,"./kernel-value/dynamic-single-array2d-i":51,"./kernel-value/dynamic-single-array3d-i":52,"./kernel-value/dynamic-single-input":53,"./kernel-value/dynamic-unsigned-array":54,"./kernel-value/dynamic-unsigned-input":55,"./kernel-value/float":56,"./kernel-value/html-image":57,"./kernel-value/html-video":58,"./kernel-value/integer":60,"./kernel-value/memory-optimized-number-texture":61,"./kernel-value/number-texture":62,"./kernel-value/single-array":63,"./kernel-value/single-array1d-i":64,"./kernel-value/single-array2d-i":65,"./kernel-value/single-array3d-i":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(t,e,n){var r=t("./index").WebGLKernelValue,i=t("../../../input").Input,a=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"checkSize",value:function(t,e){if(this.kernel.validate){var n=this.kernel.constructor.features.maxTextureSize;if(t>n||e>n)throw t>e?new Error("Argument texture width of ".concat(t," larger than maximum size of ").concat(n," for your GPU")):t<e?new Error("Argument texture height of ".concat(e," larger than maximum size of ").concat(n," for your GPU")):new Error("Argument texture height and width of ".concat(e," larger than maximum size of ").concat(n," for your GPU"))}}},{key:"setup",value:function(){this.requestTexture(),this.setupTexture(),this.defineTexture()}},{key:"requestTexture",value:function(){this.texture=this.onRequestTexture()}},{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}},{key:"setupTexture",value:function(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}},{key:"getBitRatio",value:function(t){if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"destroy",value:function(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}]),n}(r);e.exports={WebGLKernelArray:a}},{"../../../input":110,"./index":59}],41:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec2 ".concat(this.id," = vec2(").concat(t[0],",").concat(t[1],");\n"):"uniform vec2 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray2:r}},{"./index":59}],42:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec3 ".concat(this.id," = vec3(").concat(t[0],",").concat(t[1],",").concat(t[2],");\n"):"uniform vec3 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray3:r}},{"./index":59}],43:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec4 ".concat(this.id," = vec4(").concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3],");\n"):"uniform vec4 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray4:r}},{"./index":59}],44:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const bool ".concat(this.id," = ").concat(t,";\n"):"uniform bool ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueBoolean:r}},{"../../../utils":114,"./index":59}],45:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t.width,r=t.height;this.checkSize(e,r),this.dimensions=[e,r,1],this.textureSize=[e,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueDynamicHTMLImage:i}},{"../../../utils":114,"./html-image":57}],46:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("./dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGLKernelValueDynamicHTMLVideo:r}},{"./dynamic-html-image":45}],47:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"./memory-optimized-number-texture":61}],48:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./number-texture").WebGLKernelValueNumberTexture);e.exports={WebGLKernelValueDynamicNumberTexture:i}},{"../../../utils":114,"./number-texture":62}],49:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array").WebGLKernelValueSingleArray);e.exports={WebGLKernelValueDynamicSingleArray:i}},{"../../../utils":114,"./single-array":63}],50:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGLKernelValueDynamicSingleArray1DI:i}},{"../../../utils":114,"./single-array1d-i":64}],51:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGLKernelValueDynamicSingleArray2DI:i}},{"../../../utils":114,"./single-array2d-i":65}],52:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGLKernelValueDynamicSingleArray3DI:i}},{"../../../utils":114,"./single-array3d-i":66}],53:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-input").WebGLKernelValueSingleInput);e.exports={WebGLKernelValueDynamicSingleInput:i}},{"../../../utils":114,"./single-input":67}],54:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var e=this.getTransferArrayType(t);this.preUploadValue=new e(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGLKernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"./unsigned-array":68}],55:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var s=this.getTransferArrayType(t.value);this.preUploadValue=new s(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGLKernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"./unsigned-input":69}],56:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?Number.isInteger(t)?"const float ".concat(this.id," = ").concat(t,".0;\n"):"const float ".concat(this.id," = ").concat(t,";\n"):"uniform float ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueFloat:r}},{"../../../utils":114,"./index":59}],57:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;f(this,n),i=e.call(this,t,r);var a=t.width,o=t.height;return i.checkSize(a,o),i.dimensions=[a,o,1],i.textureSize=[a,o],i.uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueHTMLImage:i}},{"../../../utils":114,"./array":40}],58:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueHTMLVideo:r}},{"./html-image":57}],59:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).dimensionsId=null,i.sizeId=null,i.initialValueConstructor=t.constructor,i.onRequestTexture=r.onRequestTexture,i.onRequestIndex=r.onRequestIndex,i.uploadValue=null,i.textureSize=null,i.bitRatio=null,i.prevArg=null,i}return m(n,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(r.sanitizeName(this.name))}},{key:"setup",value:function(){}},{key:"getTransferArrayType",value:function(t){if(Array.isArray(t[0]))return this.getTransferArrayType(t[0]);switch(t.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return t.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),t.constructor}},{key:"getStringValueHandler",value:function(){throw new Error('"getStringValueHandler" not implemented on '.concat(this.constructor.name))}},{key:"getVariablePrecisionString",value:function(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}},{key:"destroy",value:function(){}}]),n}(t("../../kernel-value").KernelValue);e.exports={WebGLKernelValue:i}},{"../../../utils":114,"../../kernel-value":35}],60:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?"const int ".concat(this.id," = ").concat(parseInt(t),";\n"):"uniform int ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueInteger:r}},{"../../../utils":114,"./index":59}],61:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()",o=function(t){l(n,t);var e=h(n);function n(t,r){var i;f(this,n),i=e.call(this,t,r);var a=p(t.size,2),o=a[0],s=a[1];return i.checkSize(o,s),i.dimensions=t.dimensions,i.textureSize=t.size,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return m(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueMemoryOptimizedNumberTexture:o,sameError:a}},{"../../../utils":114,"./array":40}],62:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a=t("./memory-optimized-number-texture").sameError,o=function(t){l(n,t);var e=h(n);function n(t,r){var i;f(this,n),i=e.call(this,t,r);var a=p(t.size,2),o=a[0],s=a[1];i.checkSize(o,s);var u=t.size,c=t.dimensions;return i.bitRatio=i.getBitRatio(t),i.dimensions=c,i.textureSize=u,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return m(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueNumberTexture:o}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":61}],63:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,i){var a;return f(this,n),(a=e.call(this,t,i)).bitRatio=4,a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray:i}},{"../../../utils":114,"./array":40}],64:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten2dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray1DI:i}},{"../../../utils":114,"./array":40}],65:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten3dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray2DI:i}},{"../../../utils":114,"./array":40}],66:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],e[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten4dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray3DI:i}},{"../../../utils":114,"./array":40}],67:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,i){var a;f(this,n),(a=e.call(this,t,i)).bitRatio=4;var o=p(t.size,3),s=o[0],u=o[1],c=o[2];return a.dimensions=new Int32Array([s||1,u||1,c||1]),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,".value, uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleInput:i}},{"../../../utils":114,"./array":40}],68:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,i){var a;return f(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t),a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,", preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedArray:i}},{"../../../utils":114,"./array":40}],69:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,i){var a;f(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t);var o=p(t.size,3),s=o[0],u=o[1],c=o[2];return a.dimensions=new Int32Array([s||1,u||1,c||1]),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t.value),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,".value, preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(value.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedInput:i}},{"../../../utils":114,"./array":40}],70:[function(t,e,n){var r=t("../gl/kernel").GLKernel,i=t("../function-builder").FunctionBuilder,a=t("./function-node").WebGLFunctionNode,o=t("../../utils").utils,s=t("../../plugins/math-random-uniformly-distributed"),p=t("./fragment-shader").fragmentShader,d=t("./vertex-shader").vertexShader,g=t("../gl/kernel-string").glKernelString,v=t("./kernel-value-maps").lookupKernelValueType,y=null,x=null,b=null,w=null,k=null,S=[s],T=[],A={},E=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).program=null,i.pipeline=r.pipeline,i.endianness=o.systemEndianness(),i.extensions={},i.argumentTextureCount=0,i.constantTextureCount=0,i.fragShader=null,i.vertShader=null,i.drawBuffersMap=null,i.maxTexSize=null,i.onRequestSwitchKernel=null,i.texture=null,i.mappedTextures=null,i.mergeSettings(t.settings||r),i.threadDim=null,i.framebuffer=null,i.buffer=null,i.textureCache=[],i.programUniformLocationCache={},i.uniform1fCache={},i.uniform1iCache={},i.uniform2fCache={},i.uniform2fvCache={},i.uniform2ivCache={},i.uniform3fvCache={},i.uniform3ivCache={},i.uniform4fvCache={},i.uniform4ivCache={},i}return m(n,[{key:"initCanvas",value:function(){if("undefined"!==typeof document){var t=document.createElement("canvas");return t.width=2,t.height=2,t}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}},{key:"initContext",value:function(){var t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)}},{key:"initPlugins",value:function(t){var e=[],n=this.source;if("string"===typeof n)for(var r=0;r<S.length;r++){var i=S[r];n.match(i.functionMatch)&&e.push(i)}else if("object"===typeof n&&t.pluginNames)for(var a=function(){var n=S[o];t.pluginNames.some((function(t){return t===n.name}))&&e.push(n)},o=0;o<S.length;o++)a();return e}},{key:"initExtensions",value:function(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if(!0===this.optimizeFloatMemory&&!e.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!e.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision=e.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=o.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=o.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=o.clone(this.output))}null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"updateMaxTexSize",value:function(){var t=this.texSize,e=this.canvas;if(null===this.maxTexSize){var n=T.indexOf(e);-1===n&&(n=T.length,T.push(e),A[n]=[t[0],t[1]]),this.maxTexSize=A[n]}this.maxTexSize[0]<t[0]&&(this.maxTexSize[0]=t[0]),this.maxTexSize[1]<t[1]&&(this.maxTexSize[1]=t[1])}},{key:"setupArguments",value:function(t){var e=this;this.kernelArguments=[],this.argumentTextureCount=0;var n=null===this.argumentTypes;if(n&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],t.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(t.length>this.argumentNames.length)throw new Error("too many arguments for kernel");for(var r=this.context,i=0,a=function(){return e.createTexture()},s=function(){return e.constantTextureCount+i++},u=function(t){e.switchKernels({type:"argumentMismatch",needed:t})},c=function(){return r.TEXTURE0+e.constantTextureCount+e.argumentTextureCount++},l=0;l<t.length;l++){var h=t[l],p=this.argumentNames[l],d=void 0;n?(d=o.getVariableType(h,this.strictIntegers),this.argumentTypes.push(d)):d=this.argumentTypes[l];var f=this.constructor.lookupKernelValueType(d,this.dynamicArguments?"dynamic":"static",this.precision,t[l]);if(null===f)return this.requestFallback(t);var m=new f(h,{name:p,type:d,tactic:this.tactic,origin:"user",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:a,onRequestIndex:s,onUpdateValueMismatch:u,onRequestContextHandle:c});this.kernelArguments.push(m),m.setup(),this.argumentSizes.push(m.textureSize),this.argumentBitRatios[l]=m.bitRatio}}},{key:"createTexture",value:function(){var t=this.context.createTexture();return this.textureCache.push(t),t}},{key:"setupConstants",value:function(t){var e=this,n=this.context;this.kernelConstants=[],this.forceUploadKernelConstants=[];var r=null===this.constantTypes;r&&(this.constantTypes={}),this.constantBitRatios={};var i=0;for(var a in this.constants){var s=this.constants[a],u=void 0;r?(u=o.getVariableType(s,this.strictIntegers),this.constantTypes[a]=u):u=this.constantTypes[a];var c=this.constructor.lookupKernelValueType(u,"static",this.precision,s);if(null===c)return this.requestFallback(t);var l=new c(s,{name:a,type:u,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:function(){return e.createTexture()},onRequestIndex:function(){return i++},onRequestContextHandle:function(){return n.TEXTURE0+e.constantTextureCount++}});this.constantBitRatios[a]=l.bitRatio,this.kernelConstants.push(l),l.setup(),l.forceUploadEachRun&&this.forceUploadKernelConstants.push(l)}}},{key:"build",value:function(){if(!this.built&&(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),!this.fallbackRequested&&(this.setupArguments(arguments),!this.fallbackRequested))){this.updateMaxTexSize(),this.translateSource();var t=this.pickRenderStrategy(arguments);if(t)return t;var e=this.texSize,n=this.context,r=this.canvas;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];for(var i=this.threadDim=Array.from(this.output);i.length<3;)i.push(1);var a=this.getVertexShader(arguments),o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,a),n.compileShader(o),this.vertShader=o;var s=this.getFragmentShader(arguments),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(u,s),n.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(s)),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(o));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(u));var c=this.program=n.createProgram();n.attachShader(c,o),n.attachShader(c,u),n.linkProgram(c),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=e[0],this.framebuffer.height=e[1],this.rawValueFramebuffers={};var l=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=l.byteLength,d=this.buffer;d?n.bindBuffer(n.ARRAY_BUFFER,d):(d=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,l.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,l),n.bufferSubData(n.ARRAY_BUFFER,p,h);var f=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(f),n.vertexAttribPointer(f,2,n.FLOAT,!1,0,0);var m=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);var g=0;for(var v in n.useProgram(this.program),this.constants)this.kernelConstants[g++].updateValue(this.constants[v]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}}},{key:"translateSource",value:function(){var t=i.fromKernel(this,a,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"setupReturnTypes",value:function(t){if(this.graphical||this.returnType||(this.returnType=t.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(var e=0;e<this.subKernels.length;e++){var n=this.subKernels[e];n.returnType||(n.returnType=t.getSubKernelResultType(e))}}},{key:"run",value:function(){var t=this.kernelArguments,e=this.texSize,n=this.forceUploadKernelConstants,r=this.context;r.useProgram(this.program),r.scissor(0,0,e[0],e[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",e)),this.setUniform2f("ratio",e[0]/this.maxTexSize[0],e[1]/this.maxTexSize[1]);for(var i=0;i<n.length;i++){var a=n[i];if(a.updateValue(this.constants[a.name]),this.switchingKernels)return}for(var o=0;o<t.length;o++)if(t[o].updateValue(arguments[o]),this.switchingKernels)return;if(this.plugins)for(var s=0;s<this.plugins.length;s++){var u=this.plugins[s];u.onBeforeRun&&u.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}},{key:"drawBuffers",value:function(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}},{key:"getInternalFormat",value:function(){return this.context.RGBA}},{key:"getTextureFormat",value:function(){var t=this.context;if(this.getInternalFormat()===t.RGBA)return t.RGBA;throw new Error("Unknown internal format")}},{key:"_replaceOutputTexture",value:function(){if(this.texture.beforeMutate()||this._textureSwitched){var t=this.context;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}},{key:"_setupOutputTexture",value:function(){var t=this.context,e=this.texSize;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{var n=this.createTexture();t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_replaceSubOutputTextures",value:function(){for(var t=this.context,e=0;e<this.mappedTextures.length;e++){var n=this.mappedTextures[e];(n.beforeMutate()||this._mappedTextureSwitched[e])&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[e]=!1)}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"setUniform1f",value:function(t,e){if(!this.uniform1fCache.hasOwnProperty(t)||e!==this.uniform1fCache[t]){this.uniform1fCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1f(n,e)}}},{key:"setUniform1i",value:function(t,e){if(!this.uniform1iCache.hasOwnProperty(t)||e!==this.uniform1iCache[t]){this.uniform1iCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1i(n,e)}}},{key:"setUniform2f",value:function(t,e,n){if(this.uniform2fCache.hasOwnProperty(t)){var r=this.uniform2fCache[t];if(e===r[0]&&n===r[1])return}this.uniform2fCache[t]=[e,n];var i=this.getUniformLocation(t);this.context.uniform2f(i,e,n)}},{key:"setUniform2fv",value:function(t,e){if(this.uniform2fvCache.hasOwnProperty(t)){var n=this.uniform2fvCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2fv(r,e)}},{key:"setUniform2iv",value:function(t,e){if(this.uniform2ivCache.hasOwnProperty(t)){var n=this.uniform2ivCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2iv(r,e)}},{key:"setUniform3fv",value:function(t,e){if(this.uniform3fvCache.hasOwnProperty(t)){var n=this.uniform3fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3fv(r,e)}},{key:"setUniform3iv",value:function(t,e){if(this.uniform3ivCache.hasOwnProperty(t)){var n=this.uniform3ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3iv(r,e)}},{key:"setUniform4fv",value:function(t,e){if(this.uniform4fvCache.hasOwnProperty(t)){var n=this.uniform4fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4fv(r,e)}},{key:"setUniform4iv",value:function(t,e){if(this.uniform4ivCache.hasOwnProperty(t)){var n=this.uniform4ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4iv(r,e)}},{key:"getUniformLocation",value:function(t){return this.programUniformLocationCache.hasOwnProperty(t)?this.programUniformLocationCache[t]:this.programUniformLocationCache[t]=this.context.getUniformLocation(this.program,t)}},{key:"_getFragShaderArtifactMap",value:function(t){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(t),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getVertShaderArtifactMap",value:function(t){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getHeaderString",value:function(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";\n"):" 1000;\n"}},{key:"_getPluginsString",value:function(){var t=this;return this.plugins?this.plugins.map((function(e){return e.source&&t.source.match(e.functionMatch)?e.source:""})).join("\n"):"\n"}},{key:"_getConstantsString",value:function(){var t=[],e=this.threadDim,n=this.texSize;return this.dynamicOutput?t.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):t.push("ivec3 uOutputDim = ivec3(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),"ivec2 uTexSize = ivec2(".concat(n[0],", ").concat(n[1],")")),o.linesToString(t)}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels;return null===t||t.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}},{key:"_getDecode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getEncode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getDivideWithIntegerCheckString",value:function(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"_getInjectedNative",value:function(){return this.injectedNative||""}},{key:"_getMainConstantsString",value:function(){var t=[],e=this.constants;if(e){var n=0;for(var r in e)this.constants.hasOwnProperty(r)&&t.push(this.kernelConstants[n++].getSource(this.constants[r]))}return t.join("")}},{key:"getRawValueFramebuffer",value:function(t,e){if(this.rawValueFramebuffers[t]||(this.rawValueFramebuffers[t]={}),!this.rawValueFramebuffers[t][e]){var n=this.context.createFramebuffer();n.width=t,n.height=e,this.rawValueFramebuffers[t][e]=n}return this.rawValueFramebuffers[t][e]}},{key:"getKernelResultDeclaration",value:function(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error('unrecognized output type "'.concat(this.returnType,'"'))}}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name));break;case"Array(4)":for(var s=0;s<e.length;s++)t.push("vec4 subKernelResult_".concat(e[s].name))}return o.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return o.linesToString(t)}},{key:"getMainResultMemoryOptimizedFloats",value:function(){var t=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":for(var e=["r","g","b","a"],n=0;n<e.length;n++){var r=e[n];this.getMainResultKernelMemoryOptimizedFloats(t,r),this.getMainResultSubKernelMemoryOptimizedFloats(t,r),n+1<e.length&&t.push("  index += 1")}break;default:throw new Error("optimized output only usable with Numbers, ".concat(this.returnType," specified"))}return o.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0].".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?t.push("  gl_FragData[".concat(n+1,"].").concat(e," = float(subKernelResult_").concat(this.subKernels[n].name,")")):t.push("  gl_FragData[".concat(n+1,"].").concat(e," = subKernelResult_").concat(this.subKernels[n].name))}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  gl_FragData[".concat(e+1,"][0] = float(subKernelResult_").concat(n.name,")")):t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"));return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"),"  gl_FragData[".concat(e+1,"][2] = subKernelResult_").concat(this.subKernels[e].name,"[2]"));return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;switch(this.returnType){case"Number":case"Float":case"Integer":for(var e=0;e<this.subKernels.length;++e)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = float(subKernelResult_").concat(this.subKernels[e].name,")")):t.push("  gl_FragData[".concat(e+1,"] = subKernelResult_").concat(this.subKernels[e].name));break;case"Array(2)":for(var n=0;n<this.subKernels.length;++n)t.push("  gl_FragData[".concat(n+1,"][0] = subKernelResult_").concat(this.subKernels[n].name,"[0]"),"  gl_FragData[".concat(n+1,"][1] = subKernelResult_").concat(this.subKernels[n].name,"[1]"));break;case"Array(3)":for(var r=0;r<this.subKernels.length;++r)t.push("  gl_FragData[".concat(r+1,"][0] = subKernelResult_").concat(this.subKernels[r].name,"[0]"),"  gl_FragData[".concat(r+1,"][1] = subKernelResult_").concat(this.subKernels[r].name,"[1]"),"  gl_FragData[".concat(r+1,"][2] = subKernelResult_").concat(this.subKernels[r].name,"[2]"));break;case"Array(4)":for(var i=0;i<this.subKernels.length;++i)t.push("  gl_FragData[".concat(i+1,"][0] = subKernelResult_").concat(this.subKernels[i].name,"[0]"),"  gl_FragData[".concat(i+1,"][1] = subKernelResult_").concat(this.subKernels[i].name,"[1]"),"  gl_FragData[".concat(i+1,"][2] = subKernelResult_").concat(this.subKernels[i].name,"[2]"),"  gl_FragData[".concat(i+1,"][3] = subKernelResult_").concat(this.subKernels[i].name,"[3]"))}return t}},{key:"replaceArtifacts",value:function(t,e){return t.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,(function(t,n){if(e.hasOwnProperty(n))return e[n];throw"unhandled artifact ".concat(n)}))}},{key:"getFragmentShader",value:function(t){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(t))}},{key:"getVertexShader",value:function(t){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(t))}},{key:"toString",value:function(){var t=o.linesToString(["const gl = context"]);return g(this.constructor,arguments,this,t)}},{key:"destroy",value:function(t){if(this.context){for(var e in this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.rawValueFramebuffers){for(var n in this.rawValueFramebuffers[e])this.context.deleteFramebuffer(this.rawValueFramebuffers[e][n]),delete this.rawValueFramebuffers[e][n];delete this.rawValueFramebuffers[e]}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();var r=this.textureCache.indexOf(this.texture.texture);r>-1&&this.textureCache.splice(r,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(var i=0;i<this.mappedTextures.length;i++){var a=this.mappedTextures[i];a.delete();var o=this.textureCache.indexOf(a.texture);o>-1&&this.textureCache.splice(o,1)}this.mappedTextures=null}if(this.kernelArguments)for(var s=0;s<this.kernelArguments.length;s++)this.kernelArguments[s].destroy();if(this.kernelConstants)for(var u=0;u<this.kernelConstants.length;u++)this.kernelConstants[u].destroy();for(;this.textureCache.length>0;){var c=this.textureCache.pop();this.context.deleteTexture(c)}if(t){var l=T.indexOf(this.canvas);l>=0&&(T[l]=null,A[l]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,this.gpu){var h=this.gpu.kernels.indexOf(this);-1!==h&&this.gpu.kernels.splice(h,1)}}}},{key:"destroyExtensions",value:function(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toJSON",value:function(){var t=u(c(n.prototype),"toJSON",this).call(this);return t.functionNodes=i.fromKernel(this,a).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==y?y:(this.setupFeatureChecks(),y=this.isContextMatch(b))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?x=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(x=new OffscreenCanvas(0,0)),x&&(b=x.getContext("webgl")||x.getContext("experimental-webgl"))&&b.getExtension&&(w={OES_texture_float:b.getExtension("OES_texture_float"),OES_texture_float_linear:b.getExtension("OES_texture_float_linear"),OES_element_index_uint:b.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:b.getExtension("WEBGL_draw_buffers")},k=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext}},{key:"getIsTextureFloat",value:function(){return Boolean(w.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(w.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return w.WEBGL_draw_buffers?b.getParameter(w.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return b.getParameter(b.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return v(t,e,n,r)}},{key:"testCanvas",get:function(){return x}},{key:"testContext",get:function(){return b}},{key:"features",get:function(){return k}},{key:"fragmentShader",get:function(){return p}},{key:"vertexShader",get:function(){return d}},{key:"destroyContext",value:function(t){var e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}}]),n}(r);e.exports={WebGLKernel:E}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(t,e,n){var r="__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],72:[function(t,e,n){var r="#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(".concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],73:[function(t,e,n){var r=t("../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}}]),n}(t("../web-gl/function-node").WebGLFunctionNode);e.exports={WebGL2FunctionNode:i}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(t,e,n){var r=t("./kernel-value/boolean").WebGL2KernelValueBoolean,i=t("./kernel-value/float").WebGL2KernelValueFloat,a=t("./kernel-value/integer").WebGL2KernelValueInteger,o=t("./kernel-value/html-image").WebGL2KernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGL2KernelValueDynamicHTMLImage,u=t("./kernel-value/html-image-array").WebGL2KernelValueHTMLImageArray,c=t("./kernel-value/dynamic-html-image-array").WebGL2KernelValueDynamicHTMLImageArray,l=t("./kernel-value/html-video").WebGL2KernelValueHTMLVideo,h=t("./kernel-value/dynamic-html-video").WebGL2KernelValueDynamicHTMLVideo,p=t("./kernel-value/single-input").WebGL2KernelValueSingleInput,d=t("./kernel-value/dynamic-single-input").WebGL2KernelValueDynamicSingleInput,f=t("./kernel-value/unsigned-input").WebGL2KernelValueUnsignedInput,m=t("./kernel-value/dynamic-unsigned-input").WebGL2KernelValueDynamicUnsignedInput,g=t("./kernel-value/memory-optimized-number-texture").WebGL2KernelValueMemoryOptimizedNumberTexture,v=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,y=t("./kernel-value/number-texture").WebGL2KernelValueNumberTexture,x=t("./kernel-value/dynamic-number-texture").WebGL2KernelValueDynamicNumberTexture,b=t("./kernel-value/single-array").WebGL2KernelValueSingleArray,w=t("./kernel-value/dynamic-single-array").WebGL2KernelValueDynamicSingleArray,k=t("./kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI,S=t("./kernel-value/dynamic-single-array1d-i").WebGL2KernelValueDynamicSingleArray1DI,T=t("./kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI,A=t("./kernel-value/dynamic-single-array2d-i").WebGL2KernelValueDynamicSingleArray2DI,E=t("./kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI,_=t("./kernel-value/dynamic-single-array3d-i").WebGL2KernelValueDynamicSingleArray3DI,L=t("./kernel-value/array2").WebGL2KernelValueArray2,I=t("./kernel-value/array3").WebGL2KernelValueArray3,C=t("./kernel-value/array4").WebGL2KernelValueArray4,O=t("./kernel-value/unsigned-array").WebGL2KernelValueUnsignedArray,R={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGL2KernelValueDynamicUnsignedArray,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:m,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:v,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:c,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:O,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:v,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:l}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:w,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":S,"Array1D(3)":S,"Array1D(4)":S,"Array2D(2)":A,"Array2D(3)":A,"Array2D(4)":A,"Array3D(2)":_,"Array3D(3)":_,"Array3D(4)":_,Input:d,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:v,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:c,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:b,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":k,"Array1D(3)":k,"Array1D(4)":k,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:p,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:g,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:l}}};function D(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=R[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]}e.exports={kernelValueMaps:R,lookupKernelValueType:D}},{"./kernel-value/array2":75,"./kernel-value/array3":76,"./kernel-value/array4":77,"./kernel-value/boolean":78,"./kernel-value/dynamic-html-image":80,"./kernel-value/dynamic-html-image-array":79,"./kernel-value/dynamic-html-video":81,"./kernel-value/dynamic-memory-optimized-number-texture":82,"./kernel-value/dynamic-number-texture":83,"./kernel-value/dynamic-single-array":84,"./kernel-value/dynamic-single-array1d-i":85,"./kernel-value/dynamic-single-array2d-i":86,"./kernel-value/dynamic-single-array3d-i":87,"./kernel-value/dynamic-single-input":88,"./kernel-value/dynamic-unsigned-array":89,"./kernel-value/dynamic-unsigned-input":90,"./kernel-value/float":91,"./kernel-value/html-image":93,"./kernel-value/html-image-array":92,"./kernel-value/html-video":94,"./kernel-value/integer":95,"./kernel-value/memory-optimized-number-texture":96,"./kernel-value/number-texture":97,"./kernel-value/single-array":98,"./kernel-value/single-array1d-i":99,"./kernel-value/single-array2d-i":100,"./kernel-value/single-array3d-i":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array2").WebGLKernelValueArray2);e.exports={WebGL2KernelValueArray2:r}},{"../../web-gl/kernel-value/array2":41}],76:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array3").WebGLKernelValueArray3);e.exports={WebGL2KernelValueArray3:r}},{"../../web-gl/kernel-value/array3":42}],77:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array4").WebGLKernelValueArray4);e.exports={WebGL2KernelValueArray4:r}},{"../../web-gl/kernel-value/array4":43}],78:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/boolean").WebGLKernelValueBoolean);e.exports={WebGL2KernelValueBoolean:r}},{"../../web-gl/kernel-value/boolean":44}],79:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t[0],r=e.width,i=e.height;this.checkSize(r,i),this.dimensions=[r,i,t.length],this.textureSize=[r,i],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image-array").WebGL2KernelValueHTMLImageArray);e.exports={WebGL2KernelValueDynamicHTMLImageArray:i}},{"../../../utils":114,"./html-image-array":92}],80:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":45}],81:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("./dynamic-html-image").WebGL2KernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLVideo:r}},{"../../../utils":114,"./dynamic-html-image":80}],82:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":47}],83:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture);e.exports={WebGL2KernelValueDynamicNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":48}],84:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array").WebGL2KernelValueSingleArray);e.exports={WebGL2KernelValueDynamicSingleArray:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":98}],85:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI);e.exports={WebGL2KernelValueDynamicSingleArray1DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":99}],86:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI);e.exports={WebGL2KernelValueDynamicSingleArray2DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":100}],87:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI);e.exports={WebGL2KernelValueDynamicSingleArray3DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":101}],88:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(c(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-input").WebGL2KernelValueSingleInput);e.exports={WebGL2KernelValueDynamicSingleInput:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],89:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray);e.exports={WebGL2KernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":54}],90:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput);e.exports={WebGL2KernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":55}],91:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/float").WebGLKernelValueFloat);e.exports={WebGL2KernelValueFloat:r}},{"../../../utils":114,"../../web-gl/kernel-value/float":56}],92:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).checkSize(t[0].width,t[0].height),i.dimensions=[t[0].width,t[0].height,t.length],i.textureSize=[t[0].width,t[0].height],i}return m(n,[{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST)}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage3D(e.TEXTURE_2D_ARRAY,0,e.RGBA,t[0].width,t[0].height,t.length,0,e.RGBA,e.UNSIGNED_BYTE,null);for(var n=0;n<t.length;n++){var r=0,i=0,a=1;e.texSubImage3D(e.TEXTURE_2D_ARRAY,0,r,i,n,t[n].width,t[n].height,a,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t[n])}this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/array").WebGLKernelArray);e.exports={WebGL2KernelValueHTMLImageArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],93:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/html-image").WebGLKernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":57}],94:[function(t,e,n){t("../../../utils");var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(t("./html-image").WebGL2KernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLVideo:r}},{"../../../utils":114,"./html-image":93}],95:[function(t,e,n){var r=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(t){var e=this.getVariablePrecisionString();return"constants"===this.origin?"const ".concat(e," int ").concat(this.id," = ").concat(parseInt(t),";\n"):"uniform ".concat(e," int ").concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("../../web-gl/kernel-value/integer").WebGLKernelValueInteger);e.exports={WebGL2KernelValueInteger:r}},{"../../web-gl/kernel-value/integer":60}],96:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform sampler2D ".concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":61}],97:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(o," sampler2D ").concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/number-texture").WebGLKernelValueNumberTexture);e.exports={WebGL2KernelValueNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":62}],98:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array").WebGLKernelValueSingleArray);e.exports={WebGL2KernelValueSingleArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":63}],99:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGL2KernelValueSingleArray1DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":64}],100:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGL2KernelValueSingleArray2DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":65}],101:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGL2KernelValueSingleArray3DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":66}],102:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/single-input").WebGLKernelValueSingleInput);e.exports={WebGL2KernelValueSingleInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGL2KernelValueUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGL2KernelValueUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(t,e,n){var r=t("../web-gl/kernel").WebGLKernel,i=t("./function-node").WebGL2FunctionNode,a=t("../function-builder").FunctionBuilder,o=t("../../utils").utils,s=t("./fragment-shader").fragmentShader,p=t("./vertex-shader").vertexShader,d=t("./kernel-value-maps").lookupKernelValueType,g=null,v=null,y=null,x=null,b=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"initContext",value:function(){var t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl2",t)}},{key:"initExtensions",value:function(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if("single"===this.precision&&!e.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=e.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=o.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=o.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=o.clone(this.output))}!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"translateSource",value:function(){var t=a.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"drawBuffers",value:function(){this.context.drawBuffers(this.drawBuffersMap)}},{key:"getTextureFormat",value:function(){var t=this.context;switch(this.getInternalFormat()){case t.R32F:return t.RED;case t.RG32F:return t.RG;case t.RGBA32F:case t.RGBA:return t.RGBA;default:throw new Error("Unknown internal format")}}},{key:"getInternalFormat",value:function(){var t=this.context;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?t.RGBA32F:t.R32F;case"Array(2)":return t.RG32F;case"Array(3)":case"Array(4)":return t.RGBA32F;default:throw new Error("Unhandled return type")}return t.RGBA32F}return t.RGBA}},{key:"_setupOutputTexture",value:function(){var t=this.context;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);var e=t.createTexture(),n=this.texSize;t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,r,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,r,n[0],n[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.texture=new this.TextureConstructor({texture:e,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var a=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,a,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"_getHeaderString",value:function(){return""}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels,e=this.getVariablePrecisionString(this.texSize,this.tactic);return null===t||t.length<1?"in ".concat(e," vec2 vTexCoord;\n"):"out ".concat(e," vec2 vTexCoord;\n")}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(t.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"),"layout(location = ".concat(n+1,") out vec4 data").concat(n+1))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name),"layout(location = ".concat(i+1,") out vec4 data").concat(i+1));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name),"layout(location = ".concat(a+1,") out vec4 data").concat(a+1));break;case"Array(4)":for(var s=0;s<e.length;s++)t.push("vec4 subKernelResult_".concat(e[s].name),"layout(location = ".concat(s+1,") out vec4 data").concat(s+1))}else t.push("out vec4 data0");return o.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return o.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0.".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++){var r=this.subKernels[n];"Integer"===r.returnType?t.push("  data".concat(n+1,".").concat(e," = float(subKernelResult_").concat(r.name,")")):t.push("  data".concat(n+1,".").concat(e," = subKernelResult_").concat(r.name))}}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  data".concat(e+1,"[0] = float(subKernelResult_").concat(n.name,")")):t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"))}return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"),"  data".concat(e+1,"[2] = subKernelResult_").concat(n.name,"[2]"))}return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  data".concat(e+1," = subKernelResult_").concat(this.subKernels[e].name));return t}},{key:"destroyExtensions",value:function(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}},{key:"toJSON",value:function(){var t=u(c(n.prototype),"toJSON",this).call(this);return t.functionNodes=a.fromKernel(this,i).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==g?g:(this.setupFeatureChecks(),g=this.isContextMatch(y))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?v=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(v=new OffscreenCanvas(0,0)),v&&(y=v.getContext("webgl2"))&&y.getExtension&&(y.getExtension("EXT_color_buffer_float"),y.getExtension("OES_texture_float_linear"),x=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext}},{key:"getFeatures",value:function(){var t=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"getIsTextureFloat",value:function(){return!0}},{key:"getChannelCount",value:function(){return y.getParameter(y.MAX_DRAW_BUFFERS)}},{key:"getMaxTextureSize",value:function(){return y.getParameter(y.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return d(t,e,n,r)}},{key:"testCanvas",get:function(){return v}},{key:"testContext",get:function(){return y}},{key:"features",get:function(){return x}},{key:"fragmentShader",get:function(){return s}},{key:"vertexShader",get:function(){return p}}]),n}(r);e.exports={WebGL2Kernel:b}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(t,e,n){var r="#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],107:[function(t,e,n){var r=t("./index"),i=r.GPU;for(var a in r)r.hasOwnProperty(a)&&"GPU"!==a&&(i[a]=r[a]);function o(t){t.GPU||Object.defineProperty(t,"GPU",{get:function(){return i}})}"undefined"!==typeof window&&o(window),"undefined"!==typeof self&&o(self),e.exports=r},{"./index":109}],108:[function(t,e,n){var r=t("gpu-mock.js").gpuMock,i=t("./utils").utils;t("./backend/kernel");var a=t("./backend/cpu/kernel").CPUKernel,o=t("./backend/headless-gl/kernel").HeadlessGLKernel,s=t("./backend/web-gl2/kernel").WebGL2Kernel,u=t("./backend/web-gl/kernel").WebGLKernel,c=t("./kernel-run-shortcut").kernelRunShortcut,l=[o,s,u],h=["gpu","cpu"],p={headlessgl:o,webgl2:s,webgl:u},d=!0,g=function(){function t(e){if(f(this,t),e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,"dev"!==this.mode){if(this.chooseKernel(),e.functions)for(var n=0;n<e.functions.length;n++)this.addFunction(e.functions[n]);if(e.nativeFunctions)for(var r in e.nativeFunctions)if(e.nativeFunctions.hasOwnProperty(r)){var i=e.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}}}return m(t,[{key:"chooseKernel",value:function(){if(!this.Kernel){var t=null;if(this.context){for(var e=0;e<l.length;e++){var n=l[e];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error("Kernel type ".concat(n.name," not supported"));t=n;break}}if(null===t)throw new Error("unknown Context")}else if(this.mode){if(this.mode in p)d&&!p[this.mode].isSupported||(t=p[this.mode]);else if("gpu"===this.mode){for(var r=0;r<l.length;r++)if(l[r].isSupported){t=l[r];break}}else"cpu"===this.mode&&(t=a);if(!t)throw new Error('A requested mode of "'.concat(this.mode,'" and is not supported'))}else{for(var i=0;i<l.length;i++)if(l[i].isSupported){t=l[i];break}t||(t=a)}this.mode||(this.mode=t.mode),this.Kernel=t}}},{key:"createKernel",value:function(t,e){if("undefined"===typeof t)throw new Error("Missing source parameter");if("object"!==typeof t&&!i.isFunction(t)&&"string"!==typeof t)throw new Error("source parameter not a function");var n=this.kernels;if("dev"===this.mode){var o=r(t,v(e));return n.push(o),o}t="function"===typeof t?t.toString():t;var s={},u=v(e)||{};function l(e){console.warn("Falling back to CPU");var n=new a(t,{argumentTypes:m.argumentTypes,constantTypes:m.constantTypes,graphical:m.graphical,loopMaxIterations:m.loopMaxIterations,constants:m.constants,dynamicOutput:m.dynamicOutput,dynamicArgument:m.dynamicArguments,output:m.output,precision:m.precision,pipeline:m.pipeline,immutable:m.immutable,optimizeFloatMemory:m.optimizeFloatMemory,fixIntegerDivisionAccuracy:m.fixIntegerDivisionAccuracy,functions:m.functions,nativeFunctions:m.nativeFunctions,injectedNative:m.injectedNative,subKernels:m.subKernels,strictIntegers:m.strictIntegers,debug:m.debug});n.build.apply(n,e);var r=n.run.apply(n,e);return m.replaceKernel(n),r}function h(e,r,i){i.debug&&console.warn("Switching kernels");var a=null;if(i.signature&&!s[i.signature]&&(s[i.signature]=i),i.dynamicOutput)for(var o=e.length-1;o>=0;o--){var u=e[o];"outputPrecisionMismatch"===u.type&&(a=u.needed)}var c=i.constructor,p=c.getArgumentTypes(i,r),f=c.getSignature(i,p),g=s[f];if(g)return g.onActivate(i),g;var v=s[f]=new c(t,{argumentTypes:p,constantTypes:i.constantTypes,graphical:i.graphical,loopMaxIterations:i.loopMaxIterations,constants:i.constants,dynamicOutput:i.dynamicOutput,dynamicArgument:i.dynamicArguments,context:i.context,canvas:i.canvas,output:a||i.output,precision:i.precision,pipeline:i.pipeline,immutable:i.immutable,optimizeFloatMemory:i.optimizeFloatMemory,fixIntegerDivisionAccuracy:i.fixIntegerDivisionAccuracy,functions:i.functions,nativeFunctions:i.nativeFunctions,injectedNative:i.injectedNative,subKernels:i.subKernels,strictIntegers:i.strictIntegers,debug:i.debug,gpu:i.gpu,validate:d,returnType:i.returnType,tactic:i.tactic,onRequestFallback:l,onRequestSwitchKernel:h,texture:i.texture,mappedTextures:i.mappedTextures,drawBuffersMap:i.drawBuffersMap});return v.build.apply(v,r),m.replaceKernel(v),n.push(v),v}e&&"object"===typeof e.argumentTypes&&(u.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]})));var p=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:d,onRequestFallback:l,onRequestSwitchKernel:h},u),f=new this.Kernel(t,p),m=c(f);return this.canvas||(this.canvas=f.canvas),this.context||(this.context=f.context),n.push(f),m}},{key:"createKernelMap",value:function(){var t,e,n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(t=arguments[arguments.length-2],e=arguments[arguments.length-1]):t=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&h.indexOf(this.mode)<0)throw new Error("kernelMap not supported on ".concat(this.Kernel.name));var r=v(e);if(e&&"object"===typeof e.argumentTypes&&(r.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]}))),Array.isArray(arguments[0])){r.subKernels=[];for(var a=arguments[0],o=0;o<a.length;o++){var s=a[o].toString(),u=i.getFunctionNameFromString(s);r.subKernels.push({name:u,source:s,property:o})}}else{r.subKernels=[];var c=arguments[0];for(var l in c)if(c.hasOwnProperty(l)){var p=c[l].toString(),d=i.getFunctionNameFromString(p);r.subKernels.push({name:d||l,source:p,property:l})}}return this.createKernel(t,r)}},{key:"combineKernels",value:function(){var t=arguments[arguments.length-1];if("cpu"===arguments[0].kernel.constructor.mode)return t;for(var e=arguments[0].canvas,n=arguments[0].context,r=arguments.length-1,i=0;i<r;i++)arguments[i].setCanvas(e).setContext(n).setPipeline(!0);return function(){var e=t.apply(this,arguments);return e.toArray?e.toArray():e}}},{key:"setFunctions",value:function(t){return this.functions=t,this}},{key:"setNativeFunctions",value:function(t){return this.nativeFunctions=t,this}},{key:"addFunction",value:function(t,e){return this.functions.push({source:t,settings:e}),this}},{key:"addNativeFunction",value:function(t,e,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:t,source:e},n)),this}},{key:"injectNative",value:function(t){return this.injectedNative=t,this}},{key:"destroy",value:function(){var t=this;return new Promise((function(e,n){t.kernels||e(),setTimeout((function(){try{for(var r=0;r<t.kernels.length;r++)t.kernels[r].destroy(!0);var i=t.kernels[0];i&&(i.kernel&&(i=i.kernel),i.constructor.destroyContext&&i.constructor.destroyContext(t.context))}catch(a){n(a)}e()}),0)}))}}],[{key:"disableValidation",value:function(){d=!1}},{key:"enableValidation",value:function(){d=!0}},{key:"isGPUSupported",get:function(){return l.some((function(t){return t.isSupported}))}},{key:"isKernelMapSupported",get:function(){return l.some((function(t){return t.isSupported&&t.features.kernelMap}))}},{key:"isOffscreenCanvasSupported",get:function(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}},{key:"isWebGLSupported",get:function(){return u.isSupported}},{key:"isWebGL2Supported",get:function(){return s.isSupported}},{key:"isHeadlessGLSupported",get:function(){return o.isSupported}},{key:"isCanvasSupported",get:function(){return"undefined"!==typeof HTMLCanvasElement}},{key:"isGPUHTMLImageArraySupported",get:function(){return s.isSupported}},{key:"isSinglePrecisionSupported",get:function(){return l.some((function(t){return t.isSupported&&t.features.isFloatRead&&t.features.isTextureFloat}))}}]),t}();function v(t){if(!t)return{};var e=Object.assign({},t);return t.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),e.precision=t.floatOutput?"single":"unsigned"),t.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),e.pipeline=Boolean(t.outputToTexture)),t.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),e.immutable=Boolean(t.outputImmutable)),t.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),e.optimizeFloatMemory=Boolean(t.floatTextures)),e}e.exports={GPU:g,kernelOrder:l,kernelTypes:h}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(t,e,n){var r=t("./gpu").GPU,i=t("./alias").alias,a=t("./utils").utils,o=t("./input"),s=o.Input,u=o.input,c=t("./texture").Texture,l=t("./backend/function-builder").FunctionBuilder,h=t("./backend/function-node").FunctionNode,p=t("./backend/cpu/function-node").CPUFunctionNode,d=t("./backend/cpu/kernel").CPUKernel,f=t("./backend/headless-gl/kernel").HeadlessGLKernel,m=t("./backend/web-gl/function-node").WebGLFunctionNode,g=t("./backend/web-gl/kernel").WebGLKernel,v=t("./backend/web-gl/kernel-value-maps").kernelValueMaps,y=t("./backend/web-gl2/function-node").WebGL2FunctionNode,x=t("./backend/web-gl2/kernel").WebGL2Kernel,b=t("./backend/web-gl2/kernel-value-maps").kernelValueMaps,w=t("./backend/gl/kernel").GLKernel,k=t("./backend/kernel").Kernel,S=t("./backend/function-tracer").FunctionTracer,T=t("./plugins/math-random-uniformly-distributed");e.exports={alias:i,CPUFunctionNode:p,CPUKernel:d,GPU:r,FunctionBuilder:l,FunctionNode:h,HeadlessGLKernel:f,Input:s,input:u,Texture:c,utils:a,WebGL2FunctionNode:y,WebGL2Kernel:x,webGL2KernelValueMaps:b,WebGLFunctionNode:m,WebGLKernel:g,webGLKernelValueMaps:v,GLKernel:w,Kernel:k,FunctionTracer:S,plugins:{mathRandom:T}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(t,e,n){var r=function(){function e(t,n){f(this,e),this.value=t,Array.isArray(n)?this.size=n:(this.size=new Int32Array(3),n.z?this.size=new Int32Array([n.x,n.y,n.z]):n.y?this.size=new Int32Array([n.x,n.y]):this.size=new Int32Array([n.x]));var r=p(this.size,3),i=r[0],a=r[1],o=r[2];if(o){if(this.value.length!==i*a*o)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," * ").concat(o," = ").concat(a*i*o))}else if(a){if(this.value.length!==i*a)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," = ").concat(a*i))}else if(this.value.length!==i)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i))}return m(e,[{key:"toArray",value:function(){var e=t("./utils").utils,n=p(this.size,3),r=n[0],i=n[1],a=n[2];return a?e.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i,a):i?e.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i):this.value}}]),e}();function i(t,e){return new r(t,e)}e.exports={Input:r,input:i}},{"./utils":114}],111:[function(t,e,n){var r=t("./utils").utils;function i(t){var e=function(){return t.build.apply(t,arguments),e=function(){var e=t.run.apply(t,arguments);if(t.switchingKernels){var r=t.resetSwitchingKernels(),i=t.onRequestSwitchKernel(r,arguments,t);n.kernel=t=i,e=i.run.apply(i,arguments)}return t.renderKernels?t.renderKernels():t.renderOutput?t.renderOutput():e},e.apply(t,arguments)},n=function(){return e.apply(t,arguments)};return n.exec=function(){var t=arguments,n=this;return new Promise((function(r,i){try{r(e.apply(n,t))}catch(a){i(a)}}))},n.replaceKernel=function(e){a(t=e,n)},a(t,n),n}function a(t,e){if(e.kernel)e.kernel=t;else{for(var n=r.allPropertiesOf(t),i=function(){var r=n[a];if("_"===r[0]&&"_"===r[1])return"continue";"function"===typeof t[r]?"add"===r.substring(0,3)||"set"===r.substring(0,3)?e[r]=function(){return e.kernel[r].apply(e.kernel,arguments),e}:e[r]=function(){return e.kernel[r].apply(e.kernel,arguments)}:(e.__defineGetter__(r,(function(){return e.kernel[r]})),e.__defineSetter__(r,(function(t){e.kernel[r]=t})))},a=0;a<n.length;a++)i();e.kernel=t}}e.exports={kernelRunShortcut:i}},{"./utils":114}],112:[function(t,e,n){var r={name:"math-random-uniformly-distributed",onBeforeRun:function(t){t.setUniform1f("randomSeed1",Math.random()),t.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};e.exports=r},{}],113:[function(t,e,n){var r=function(){function t(e){f(this,t);var n=e.texture,r=e.size,i=e.dimensions,a=e.output,o=e.context,s=e.type,u=void 0===s?"NumberTexture":s,c=e.kernel,l=e.internalFormat,h=e.textureFormat;if(!a)throw new Error('settings property "output" required.');if(!o)throw new Error('settings property "context" required.');if(!n)throw new Error('settings property "texture" required.');if(!c)throw new Error('settings property "kernel" required.');this.texture=n,n._refs?n._refs++:n._refs=1,this.size=r,this.dimensions=i,this.output=a,this.context=o,this.kernel=c,this.type=u,this._deleted=!1,this.internalFormat=l,this.textureFormat=h}return m(t,[{key:"toArray",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clone",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"delete",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clear",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}}]),t}();e.exports={Texture:r}},{}],114:[function(t,e,n){var r=t("acorn"),i=t("./input").Input,a=t("./texture").Texture,o=/function ([^(]*)/,s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,c={systemEndianness:function(){return f},getSystemEndianness:function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:function(t){return"function"===typeof t},isFunctionString:function(t){return"string"===typeof t&&"function"===t.slice(0,8).toLowerCase()},getFunctionNameFromString:function(t){var e=o.exec(t);return e&&0!==e.length?e[1].trim():null},getFunctionBodyFromString:function(t){return t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))},getArgumentNamesFromString:function(t){var e=t.replace(s,""),n=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(u);return null===n&&(n=[]),n},clone:function(t){if(null===t||"object"!==typeof t||t.hasOwnProperty("isActiveClone"))return t;var e=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=c.clone(t[n]),delete t.isActiveClone);return e},isArray:function(t){return!isNaN(t.length)},getVariableType:function(t,e){if(c.isArray(t))return t.length>0&&"IMG"===t[0].nodeName?"HTMLImageArray":"Array";switch(t.constructor){case Boolean:return"Boolean";case Number:return e&&Number.isInteger(t)?"Integer":"Float";case a:return t.type;case i:return"Input"}if("nodeName"in t)switch(t.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}else{if(t.hasOwnProperty("type"))return t.type;if("undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)return"OffscreenCanvas";if("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap)return"ImageBitmap";if("undefined"!==typeof ImageData&&t instanceof ImageData)return"ImageData"}return"Unknown"},getKernelTextureSize:function(t,e){var n=p(e,3),r=n[0],i=n[1],a=(r||1)*(i||1)*(n[2]||1);return t.optimizeFloatMemory&&"single"===t.precision&&(r=a=Math.ceil(a/4)),i>1&&r*i===a?new Int32Array([r,i]):c.closestSquareDimensions(a)},closestSquareDimensions:function(t){for(var e=Math.sqrt(t),n=Math.ceil(e),r=Math.floor(e);n*r<t;)n--,r=Math.ceil(t/n);return new Int32Array([r,Math.ceil(t/r)])},getMemoryOptimizedFloatTextureSize:function(t,e){var n=c.roundTo((t[0]||1)*(t[1]||1)*(t[2]||1)*(t[3]||1),4)/e;return c.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize:function(t,e){var n=p(t,3),r=n[0],i=n[1],a=n[2],o=c.roundTo((r||1)*(i||1)*(a||1),4)/(4/e);return c.closestSquareDimensions(o)},roundTo:function(t,e){return Math.floor((t+e-1)/e)*e},getDimensions:function(t,e){var n;if(c.isArray(t)){for(var r=[],o=t;c.isArray(o);)r.push(o.length),o=o[0];n=r.reverse()}else if(t instanceof a)n=t.output;else{if(!(t instanceof i))throw new Error("Unknown dimensions of ".concat(t));n=t.size}if(e)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)e.set(t[r],n),n+=t[r].length},flatten3dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)e.set(t[r][i],n),n+=t[r][i].length},flatten4dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var a=0;a<t[r][i].length;a++)e.set(t[r][i][a],n),n+=t[r][i][a].length},flattenTo:function(t,e){c.isArray(t[0])?c.isArray(t[0][0])?c.isArray(t[0][0][0])?c.flatten4dArrayTo(t,e):c.flatten3dArrayTo(t,e):c.flatten2dArrayTo(t,e):e.set(t)},splitArray:function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(new t.constructor(t.buffer,4*r+t.byteOffset,e));return n},getAstString:function(t,e){var n=Array.isArray(t)?t:t.split(/\r?\n/g),r=e.loc.start,i=e.loc.end,a=[];if(r.line===i.line)a.push(n[r.line-1].substring(r.column,i.column));else{a.push(n[r.line-1].slice(r.column));for(var o=r.line;o<i.line;o++)a.push(n[o]);a.push(n[i.line-1].slice(0,i.column))}return a.join("\n")},allPropertiesOf:function(t){var e=[];do{e.push.apply(e,Object.getOwnPropertyNames(t))}while(t=Object.getPrototypeOf(t));return e},linesToString:function(t){return t.length>0?t.join(";\n")+";\n":"\n"},warnDeprecated:function(t,e,n){n?console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been replaced with "').concat(n,'". Fixing, but please upgrade as it will soon be removed.')):console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been removed. Fixing, but please upgrade as it will soon be removed.'))},flipPixels:function(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,c=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,c,c+i),o.set(a,c)}return o},erectPackedFloat:function(t,e){return t.subarray(0,e)},erect2DPackedFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e,o=a+e;r[i]=t.subarray(a,o)}return r},erect3DPackedFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e,c=u+e;o[s]=t.subarray(u,c)}i[a]=o}return i},erectMemoryOptimizedFloat:function(t,e){return t.subarray(0,e)},erectMemoryOptimized2DFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e;r[i]=t.subarray(a,a+e)}return r},erectMemoryOptimized3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e;o[s]=t.subarray(u,u+e)}i[a]=o}return i},erectFloat:function(t,e){for(var n=new Float32Array(e),r=0,i=0;i<e;i++)n[i]=t[r],r+=4;return n},erect2DFloat:function(t,e,n){for(var r=new Array(n),i=0,a=0;a<n;a++){for(var o=new Float32Array(e),s=0;s<e;s++)o[s]=t[i],i+=4;r[a]=o}return r},erect3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0,o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var c=new Float32Array(e),l=0;l<e;l++)c[l]=t[a],a+=4;s[u]=c}i[o]=s}return i},erectArray2:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+2);return n},erect2DArray2:function(t,e,n){for(var r=new Array(n),i=4*e,a=0;a<n;a++){for(var o=new Array(e),s=a*i,u=0,c=0;c<i;c+=4)o[u++]=t.subarray(c+s,c+s+2);r[a]=o}return r},erect3DArray2:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var c=new Array(e),l=o*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=t.subarray(p+l,p+l+2);s[u]=c}a[o]=s}return a},erectArray3:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+3);return n},erect2DArray3:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,c=0;c<r;c+=4)o[u++]=t.subarray(c+s,c+s+3);i[a]=o}return i},erect3DArray3:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var c=new Array(e),l=o*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=t.subarray(p+l,p+l+3);s[u]=c}a[o]=s}return a},erectArray4:function(t,e){for(var n=new Array(t),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+4);return n},erect2DArray4:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,c=0;c<r;c+=4)o[u++]=t.subarray(c+s,c+s+4);i[a]=o}return i},erect3DArray4:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var c=new Array(e),l=o*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=t.subarray(p+l,p+l+4);s[u]=c}a[o]=s}return a},flattenFunctionToString:function(t,e){var n=e.findDependency,i=e.thisLookup,a=(e.doNotDefine,e.flattened);a||(a=e.flattened={});var o=r.parse(t),s=[],u=0;function l(t){if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(l(t[r]));return e.join("")}switch(t.type){case"Program":return l(t.body)+("VariableDeclaration"===t.body[0].type?";":"");case"FunctionDeclaration":return"function ".concat(t.id.name,"(").concat(t.params.map(l).join(", "),") ").concat(l(t.body));case"BlockStatement":var a=[];u+=2;for(var o=0;o<t.body.length;o++){var h=l(t.body[o]);h&&a.push(" ".repeat(u)+h,";\n")}return u-=2,"{\n".concat(a.join(""),"}");case"VariableDeclaration":var p=c.normalizeDeclarations(t).map(l).filter((function(t){return null!==t}));return p.length<1?"":"".concat(t.kind," ").concat(p.join(","));case"VariableDeclarator":return t.init.object&&"ThisExpression"===t.init.object.type?i(t.init.property.name,!0)?"".concat(t.id.name," = ").concat(l(t.init)):null:"".concat(t.id.name," = ").concat(l(t.init));case"CallExpression":if("subarray"===t.callee.property.name)return"".concat(l(t.callee.object),".").concat(l(t.callee.property),"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")");if("gl"===t.callee.object.name||"context"===t.callee.object.name)return"".concat(l(t.callee.object),".").concat(l(t.callee.property),"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")");if("ThisExpression"===t.callee.object.type)return s.push(n("this",t.callee.property.name)),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")");if(t.callee.object.name){var d=n(t.callee.object.name,t.callee.property.name);return null===d?"".concat(t.callee.object.name,".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")"):(s.push(d),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")"))}if("MemberExpression"===t.callee.object.type)return"".concat(l(t.callee.object),".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")");throw new Error("unknown ast.callee");case"ReturnStatement":return"return ".concat(l(t.argument));case"BinaryExpression":return"(".concat(l(t.left)).concat(t.operator).concat(l(t.right),")");case"UnaryExpression":return t.prefix?"".concat(t.operator," ").concat(l(t.argument)):"".concat(l(t.argument)," ").concat(t.operator);case"ExpressionStatement":return"".concat(l(t.expression));case"SequenceExpression":return"(".concat(l(t.expressions),")");case"ArrowFunctionExpression":return"(".concat(t.params.map(l).join(", "),") => ").concat(l(t.body));case"Literal":return t.raw;case"Identifier":return t.name;case"MemberExpression":return"ThisExpression"===t.object.type?i(t.property.name):t.computed?"".concat(l(t.object),"[").concat(l(t.property),"]"):l(t.object)+"."+l(t.property);case"ThisExpression":return"this";case"NewExpression":return"new ".concat(l(t.callee),"(").concat(t.arguments.map((function(t){return l(t)})).join(", "),")");case"ForStatement":return"for (".concat(l(t.init),";").concat(l(t.test),";").concat(l(t.update),") ").concat(l(t.body));case"AssignmentExpression":return"".concat(l(t.left)).concat(t.operator).concat(l(t.right));case"UpdateExpression":return"".concat(l(t.argument)).concat(t.operator);case"IfStatement":return"if (".concat(l(t.test),") ").concat(l(t.consequent));case"ThrowStatement":return"throw ".concat(l(t.argument));case"ObjectPattern":return t.properties.map(l).join(", ");case"ArrayPattern":return t.elements.map(l).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return"".concat(l(t.test),"?").concat(l(t.consequent),":").concat(l(t.alternate));case"Property":if("init"===t.kind)return l(t.key)}throw new Error("unhandled ast.type of ".concat(t.type))}var h=l(o);if(s.length>0){for(var p=[],d=0;d<s.length;d++){var f=s[d];a[f]||(a[f]=!0),f&&p.push(c.flattenFunctionToString(f,e)+"\n")}return p.join("")+h}return h},normalizeDeclarations:function(t){if("VariableDeclaration"!==t.type)throw new Error('Ast is not of type "VariableDeclaration"');for(var e=[],n=0;n<t.declarations.length;n++){var r=t.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties)for(var i=r.id.properties,a=0;a<i.length;a++){var o=i[a];if("ObjectPattern"===o.value.type&&o.value.properties)for(var s=0;s<o.value.properties.length;s++){var u=o.value.properties[s];if("Property"!==u.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:u.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1},property:{type:"Identifier",name:u.key.name},computed:!1}})}else{if("Identifier"!==o.value.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:o.value&&o.value.name?o.value.name:o.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1}})}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements)for(var c=r.id.elements,l=0;l<c.length;l++){var h=c[l];if("Identifier"!==h.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:h.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:l,raw:l.toString(),start:h.start,end:h.end},computed:!0}})}else e.push(r)}return e},splitHTMLImageToRGB:function(t,e){var n=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].r}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].g}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].b}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].a}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),o=[n(e),r(e),i(e),a(e)];return o.rKernel=n,o.gKernel=r,o.bKernel=i,o.aKernel=a,o.gpu=t,o},splitRGBAToCanvases:function(t,e,n,r){var i=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(e.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(e);var a=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,e.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(e);var o=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,0,e.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});o(e);var s=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(255,255,255,e.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return s(e),[i.canvas,a.canvas,o.canvas,s.canvas]},getMinifySafeName:function(t){try{var e=r.parse("const value = ".concat(t.toString())).body[0].declarations[0].init;return e.body.name||e.body.body[0].argument.name}catch(n){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(t){return l.test(t)&&(t=t.replace(l,"S_S")),h.test(t)?t=t.replace(h,"U_U"):d.test(t)&&(t=t.replace(d,"u_u")),t}},l=/\$/,h=/__/,d=/_/,f=c.getSystemEndianness();e.exports={utils:c}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},t.exports=n()})),D=null;function M(t){D=t}function F(t,e){var n=D;return null===n&&M(n=new R.GPU({mode:"gpu"})),n.createKernel(t,e).setPipeline(!0)}function z(t,e,n){var r=D;return null===r&&M(r=new R.GPU({mode:"gpu"})),r.createKernelMap(t,e,n).setPipeline(!0)}function P(t,e){return new R.Input(t,e)}function N(t){t instanceof R.Texture&&t.delete()}function V(t){if(t instanceof R.Texture)t.clear();else{if(Array.isArray(t))if("number"===typeof t[0])t.fill(0);else{if("number"===typeof t[0][0]){for(var e=0;e<t.length;e++)t[e].fill(0);return}if("number"===typeof t[0][0][0]){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)r[i].fill(0);return}}if(!(t instanceof Float32Array))throw new Error("unhandled value");t.fill(0)}}function K(t){if(t instanceof R.Texture)return t.clone();if(t instanceof Float32Array)return t.slice(0);if(Array.isArray(t)){if("number"===typeof t[0])return t.slice(0);if("number"===typeof t[0][0]){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n].slice(0);return e}if("number"===typeof t[0][0][0]){for(var r=new Array(t.length),i=0;i<t.length;i++)for(var a=t[i],o=new Array(a.length),s=0;s<a.length;s++)o[s]=a[s].slice(0);return r}}throw new Error("unhandled value")}function Z(t){for(var e=0,n=0;n<this.constants.height;n++)for(var r=0;r<this.constants.width;r++)e+=Math.pow(t[n][r],2);return e/this.constants.length}var j=m((function t(e){var n=e.width,r=e.height;f(this,t),this.calculate=F(Z,{output:[1],constants:{width:n,height:r,length:n*r},immutable:!0}),this.addAbsolute=F((function(t,e){return t[0]+Math.abs(e[0][0])}),{output:[1],immutable:!0}),this.add=F((function(t,e){return t[0]+e[0]}),{output:[1],immutable:!0}),this.divide=F((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1],immutable:!0})})),G={width:1,height:1,depth:null,weights:null,deltas:null,praxis:null,praxisOpts:null,cleanupDeltas:!0},B=function(){function t(e){f(this,t),this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings=e?d(d({},G),e):d({},G),this.setupPraxis()}return m(t,[{key:"width",get:function(){var t;return null!==(t=this.settings.width)&&void 0!==t?t:0}},{key:"height",get:function(){var t;return null!==(t=this.settings.height)&&void 0!==t?t:0}},{key:"depth",get:function(){var t;return null!==(t=this.settings.depth)&&void 0!==t?t:0}},{key:"weights",get:function(){return this.settings.weights},set:function(t){this.settings.weights=t,this.settings.cleanupDeltas&&this.deltas&&V(this.deltas)}},{key:"deltas",get:function(){return this.settings.deltas},set:function(t){this.settings.deltas=t}},{key:"id",get:function(){var t;return null!==(t=this.settings.id)&&void 0!==t?t:""},set:function(t){this.settings.id=t}},{key:"setupPraxis",value:function(){var t=this.settings,e=t.initPraxis,n=t.praxis,r=t.praxisOpts;this.praxis||(e?this.praxis=r?e(this,r):e(this):n&&(this.praxis=n))}},{key:"validate",value:function(){if(Number.isNaN(this.height))throw new Error("".concat(this.constructor.name," layer height is not a number"));if(Number.isNaN(this.width))throw new Error("".concat(this.constructor.name," layer width is not a number"));if(this.height<1)throw new Error("".concat(this.constructor.name," layer height is less than 1"));if(this.width<1)throw new Error("".concat(this.constructor.name," layer width is less than 1"))}},{key:"setupKernels",value:function(t){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));if(t.hasOwnProperty("predictKernel")&&null!==t.predictKernel){if(!t.predictKernel.immutable)throw new Error("".concat(t.constructor.name,".predictKernel is not reusable, set kernel.immutable = true"));this.predictKernel=t.predictKernel}if(t.hasOwnProperty("compareKernel")&&null!==t.compareKernel){if(!t.compareKernel.immutable)throw new Error("".concat(t.constructor.name,".compareKernel is not reusable, set kernel.immutable = true"));this.compareKernel=t.compareKernel}this.praxis=t.praxis}},{key:"predict",value:function(t){}},{key:"compare",value:function(t){}},{key:"learn",value:function(t){}},{key:"toArray",value:function(){return Array.isArray(this.weights)?this.weights:this.weights.toArray()}},{key:"toJSON",value:function(){return t.toJSON(this)}}],[{key:"toJSON",value:function(t){var e=t.weights;return{width:t.width,height:t.height,depth:t.depth,weights:U(e&&e instanceof R.Texture?e.toArray():e),type:t.constructor.name,praxisOpts:t.praxis?t.praxis.toJSON():null}}}]),t}();function U(t){if(null===t)return null;if(Array.isArray(t)){if("number"===typeof t[0])return t;if(Array.isArray(t[0])&&"number"===typeof t[0][0])return t;if(Array.isArray(t[0][0])&&"number"===typeof t[0][0][0])return t;if(t[0]instanceof Float32Array)return t.map((function(t){return Array.from(t)}));if(t[0][0]instanceof Float32Array)return t.map((function(t){return t.map((function(t){return Array.from(t)}))}))}else if(t)return Array.from(t);throw new Error("unexpected value")}function W(t){return new Float32Array(t)}function H(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=W(t);return n}function X(t,e,n){for(var r=new Array(n),i=0;i<n;i++)r[i]=H(t,e);return r}var q=function(t){l(n,t);var e=h(n);function n(t,r){var i;f(this,n),(i=e.call(this,r)).inputLayer=t;var a=o(i),s=a.width,u=a.height,c=a.depth;return i.predictKernel=null,i.compareKernel=null,i.validate(),c>0?(i.weights=X(s,u,c),i.deltas=X(s,u,c)):u>0&&(i.weights=H(s,u),i.deltas=H(s,u)),i.setupPraxis(),i}return m(n,[{key:"width",get:function(){return this.inputLayer.width}},{key:"height",get:function(){return this.inputLayer.height}},{key:"depth",get:function(){return this.inputLayer.depth}}]),n}(B),Y=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this)).settings=t,i.inputLayer=r,i}return m(n,[{key:"width",get:function(){return this.inputLayer.width}},{key:"height",get:function(){return this.inputLayer.height}},{key:"depth",get:function(){return this.inputLayer.depth}},{key:"filterCount",get:function(){return this.settings.filterCount}},{key:"filterWidth",get:function(){return this.settings.filterWidth}},{key:"filterHeight",get:function(){return this.settings.filterHeight}},{key:"filters",get:function(){return this.settings.filters},set:function(t){this.settings.filters=t}},{key:"filterDeltas",get:function(){return this.settings.filterDeltas},set:function(t){this.settings.filterDeltas=t}}]),n}(B),J=function(){function t(){f(this,t),this.predictKernel=null,this.compareKernel=null,this.praxis=null}return m(t,[{key:"width",get:function(){return this.settings.width}},{key:"height",get:function(){return this.settings.height}},{key:"depth",get:function(){return this.settings.depth}},{key:"weights",get:function(){return this.settings.weights},set:function(t){this.settings.weights=t}},{key:"deltas",get:function(){return this.settings.deltas},set:function(t){this.settings.deltas=t}},{key:"toJSON",value:function(){return B.toJSON(this)}}]),t}(),$=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,d(d({},r),{},{width:t.width,height:t.height,depth:t.depth}))).inputLayer=t,i}return m(n,[{key:"validate",value:function(){var t;if(u(c(n.prototype),"validate",this).call(this),this.width!==this.inputLayer.width)throw new Error("width of ".concat(this.width," does not match inputLayer.width of ").concat(this.inputLayer.width));if(this.height!==this.inputLayer.height)throw new Error("height of ".concat(this.height," does not match inputLayer.height of ").concat(this.inputLayer.height));if(this.depth!==(null!==(t=this.inputLayer.depth)&&void 0!==t?t:0))throw new Error("depth of ".concat(this.depth," does not match inputLayer.depth of ").concat(this.inputLayer.depth))}}]),n}(B),Q=function(t){l(n,t);var e=h(n);function n(t,r,i){var a;return f(this,n),(a=e.call(this,i)).inputLayer1=t,a.inputLayer2=r,a.validate(),a.weights=H(a.width,a.height),a.deltas=H(a.width,a.height),a.setupPraxis(),a}return m(n)}(B);function tt(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.x]}function et(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.y][this.thread.x]}var nt=function(t){l(n,t);var e=h(n);function n(t,r){var i;if(f(this,n),(i=e.call(this,t)).inputLayer=r,i.validate(),i.depth)throw new Error("Target layer not implemented for depth");return i.height?(i.weights=H(i.width,i.height),i.deltas=H(i.width,i.height),i.errors=H(i.width,i.height)):(i.weights=W(i.width),i.deltas=W(i.width),i.errors=W(i.width)),i}return m(n,[{key:"setupKernels",value:function(){1===this.width?this.compareKernel=F(tt,{output:[this.width,this.height],immutable:!0}):this.compareKernel=F(et,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){N(this.weights),this.weights=K(this.inputLayer.weights)}},{key:"compare",value:function(t){N(this.deltas),N(this.errors),N(this.inputLayer.deltas),this.deltas=this.compareKernel(this.weights,t),this.inputLayer.deltas=K(this.deltas),this.errors=K(this.deltas)}},{key:"setupPraxis",value:function(){}}]),n}(B);function rt(t,e){return new nt(t,e)}var it=m((function t(){f(this,t)})),at=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n)}(B),ot=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"learn",value:function(t){var e=this.weights;if(!this.praxis)throw new Error("this.praxis not defined");this.weights=this.praxis.run(this,t),N(e)}}]),n}(B),st={toTable:function(t){var e=t.reduce((function(t,e){return Object.assign(t,e)}),{});return st.toHash(e)},toTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=n++)}return e},toInputTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].input,a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(e.hasOwnProperty(s)||(e[s]=n++))}return e},toOutputTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].output,a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(e.hasOwnProperty(s)||(e[s]=n++))}return e},toHash:function(t){for(var e={},n=0,r=Object.keys(t),i=0;i<r.length;i++)e[r[i]]=n++;return e},toArray:function(t,e,n){var r=new Float32Array(n);for(var i in t)t.hasOwnProperty(i)&&(r[t[i]]=e.hasOwnProperty(i)?e[i]:0);return r},toArrayShort:function(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r))break;n[t[r]]=e[r]}return Float32Array.from(n)},toArrays:function(t,e,n){for(var r=[],i=0;i<e.length;i++)r.push(this.toArray(t,e[i],n));return r},toObject:function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e[t[r]]);return n},toObjectPartial:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={},a=0;for(var o in t)t.hasOwnProperty(o)&&(n>0&&a++<n||r>0&&a++>=r||(i[o]=e[t[o]-n]));return i},dataShape:function(t){var e,n,r=[];for(t.hasOwnProperty("input")?(r.push("datum"),e=t.input):Array.isArray(t)?t[0]&&t[0].input?(r.push("array","datum"),e=t[0].input):Array.isArray(t[0])?(r.push("array"),e=t[0]):e=t:e=t;e;)if(n=Object.keys(e)[0],Array.isArray(e)||"object"===typeof e.buffer){r.push("array");var i=e[parseInt(n)];if("number"===typeof i){r.push("number");break}e=i}else{if("object"!==typeof e||"object"===typeof e.buffer)throw new Error("unhandled signature");r.push("object");var a=e[n];if("number"===typeof a){r.push("number");break}e=a}return r},addKeys:function(t,e){if(Array.isArray(t))return e;var n=Object.keys(e).length;for(var r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(e[r]=n++));return e}},ut=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,t),this.layerTemplate=e,this.settings=d({},n),this.kernel=null}return m(t,[{key:"width",get:function(){return this.layerTemplate.width}},{key:"height",get:function(){return this.layerTemplate.height}},{key:"depth",get:function(){return this.layerTemplate.depth}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));t.hasOwnProperty("kernel")&&(this.kernel=t.kernel)}},{key:"toJSON",value:function(){return d({},this.settings)}}]),t}();function ct(t,e){return t[this.thread.y][this.thread.x]+this.constants.learningRate*e[this.thread.y][this.thread.x]}var lt={learningRate:.3},ht=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).settings=d(d({},lt),r),i.kernel=null,i}return m(n,[{key:"run",value:function(t){return this.kernel(t.weights,t.deltas)}},{key:"setupKernels",value:function(){var t;this.kernel=F(ct,{output:[this.width,this.height],constants:{learningRate:null!==(t=this.settings.learningRate)&&void 0!==t?t:.01}})}}]),n}(ut);function pt(t,e){return new ht(t,e)}function dt(t){return t}function ft(t,e,n,r){var i=t[this.thread.y][this.thread.x],a=r[this.thread.y][0],o=e[this.thread.y][this.thread.x],s=n[this.thread.x][0];return o+(this.constants.learningRate*a*s+this.constants.momentum*i)}var mt={learningRate:.3,momentum:.1,weightsLayer:null,incomingLayer:null,deltaLayer:null},gt=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).kernelMap=null,i.settings=d(d({},mt),r),i.changes=H(t.width,t.height),i}return m(n,[{key:"learningRate",get:function(){return this.settings.learningRate}},{key:"momentum",get:function(){return this.settings.momentum}},{key:"weightsLayer",get:function(){return this.settings.weightsLayer},set:function(t){this.settings.weightsLayer=t}},{key:"deltaLayer",get:function(){return this.settings.deltaLayer},set:function(t){this.settings.deltaLayer=t}},{key:"incomingLayer",get:function(){return this.settings.incomingLayer},set:function(t){this.settings.incomingLayer=t}},{key:"run",value:function(){var t=this.kernelMap(this.changes,this.weightsLayer.weights,this.incomingLayer.weights,this.deltaLayer.deltas);return this.changes=t.changes,t.result}},{key:"setupKernels",value:function(){this.kernelMap=z({changes:dt},ft,{output:[this.width,this.height],constants:{learningRate:this.learningRate,momentum:this.momentum}})}}]),n}(ut);function vt(t,e){return new gt(t,e)}function yt(t,e,n){return n*e+(1-e)*t*t}function xt(t,e,n){return t>e?e:t<n?n:t}function bt(t,e,n){var r=e[this.thread.y][this.thread.x],i=xt(r,this.constants.clipValue,-this.constants.clipValue),a=t[this.thread.y][this.thread.x],o=n[this.thread.y][this.thread.x],s=yt(r,this.constants.decayRate,o);return a+-this.constants.learningRate*i/Math.sqrt(s+this.constants.smoothEps)-this.constants.regularizationStrength*a}var wt={decayRate:.999,regularizationStrength:1e-6,learningRate:.01,smoothEps:1e-8,clipValue:5},kt=function(t){l(n,t);var e=h(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),(r=e.call(this,t)).kernelMap=null,r.settings=d(d({},wt),i),r.momenta=H(t.width,t.height),r}return m(n,[{key:"clipValue",get:function(){return this.settings.clipValue}},{key:"decayRate",get:function(){return this.settings.decayRate}},{key:"learningRate",get:function(){return this.settings.learningRate}},{key:"regularizationStrength",get:function(){return this.settings.regularizationStrength}},{key:"smoothEps",get:function(){return this.settings.smoothEps}},{key:"run",value:function(t){var e=this.kernelMap(t.weights,t.deltas,this.momenta),n=e.momenta,r=e.result;return N(this.momenta),this.momenta=n,r}},{key:"setupKernels",value:function(){this.kernelMap=z({momenta:yt},bt,{output:[this.width,this.height],constants:{clipValue:this.clipValue,decayRate:this.decayRate,learningRate:this.learningRate,regularizationStrength:this.regularizationStrength,smoothEps:this.smoothEps},functions:[xt],immutable:!0})}}]),n}(ut);function St(t,e){return new kt(t,e)}var Tt=kt,At=St,Et=Object.freeze({__proto__:null,ArthurDeviationBiases:ht,arthurDeviationBiases:pt,ArthurDeviationWeights:gt,arthurDeviationWeights:vt,MomentumRootMeanSquaredPropagation:kt,momentumRootMeanSquaredPropagation:St,MRmsProp:Tt,mRmsProp:At});function _t(t,e){t.hasOwnProperty("inputLayer")?_t(t.inputLayer,e):(t.hasOwnProperty("inputLayer1")&&_t(t.inputLayer1,e),t.hasOwnProperty("inputLayer2")&&_t(t.inputLayer2,e)),e(t)}function Lt(t){for(var e=t.slice(0),n=function(t){var n=0;_t(e[t],(function(r){e.includes(r)||(e.splice(t+n,0,r),n++)}))},r=0;r<e.length;r++)n(r);return e}function It(t,e){if(t.width!==e.width)throw new Error("Layer width mismatch of ".concat(t.width," and ").concat(e.width));if(t.height!==e.height)throw new Error("Layer height mismatch of ".concat(t.height," and ").concat(e.height))}function Ct(t,e){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]}var Ot=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"width",get:function(){return this.inputLayer1.width}},{key:"height",get:function(){return this.inputLayer1.height}},{key:"depth",get:function(){return this.inputLayer1.depth}},{key:"validate",value:function(){u(c(n.prototype),"validate",this).call(this),It(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=F(Ct,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){N(this.inputLayer1.deltas),N(this.inputLayer2.deltas),this.inputLayer1.deltas=K(this.deltas),this.inputLayer2.deltas=K(this.deltas)}}]),n}(Q);function Rt(t,e,n){return new Ot(t,e,n)}function Dt(){return.4*Math.random()-.2}function Mt(t,e){return Math.random()*(e-t)+t}function Ft(){if(Ft.returnV)return Ft.returnV=!1,Ft.vVal;var t=2*Math.random()-1,e=2*Math.random()-1,n=t*t+e*e;if(0===n||n>1)return Ft();var r=Math.sqrt(-2*Math.log(n)/n);return Ft.vVal=e*r,Ft.returnV=!0,t*r}function zt(t,e){return Math.floor(Math.random()*(e-t)+t)}function Pt(t,e){return t+Ft()*e}Ft.returnV=!1,Ft.vVal=0;var Nt=Object.freeze({__proto__:null,randomFloat:Mt,gaussRandom:Ft,randomInteger:zt,randomN:Pt});function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Float32Array(t);if(null===e)for(var r=0;r<t;r++)n[r]=Dt();else for(var i=0;i<t;i++)n[i]=Mt(-e,e);return n}function Kt(t,e,n){for(var r=new Array(e),i=0;i<e;i++)r[i]=Vt(t,n);return r}function Zt(t,e,n,r){for(var i=new Array(n),a=0;a<n;a++)i[a]=Kt(t,e,r);return i}var jt=d(d({},G),{},{std:null}),Gt=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this)).settings=d(d({},jt),t),r.setupPraxis(),r.validate(),r.weights||(r.weights=Kt(r.width,r.height,t.std)),r.deltas||(r.deltas=H(r.width,r.height)),r}return m(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}]),n}(ot);function Bt(t){return new Gt(t)}function Ut(t,e){for(var n=0,r=0;r<this.constants.size;r++)n+=t[this.thread.y][r]*e[r][this.thread.x];return n}function Wt(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.y][i]*n[this.thread.x][i];return r}function Ht(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[i][this.thread.x]*n[i][this.thread.y];return r}var Xt=function(t){l(n,t);var e=h(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).compareKernel1=null,t.compareKernel2=null,t}return m(n,[{key:"width",get:function(){return this.inputLayer2.width},set:function(t){throw new Error("Cannot set width on Multiply")}},{key:"height",get:function(){return this.inputLayer1.height},set:function(t){throw new Error("Cannot set height on Multiply")}},{key:"depth",get:function(){return this.inputLayer1.depth},set:function(t){throw new Error("Cannot set depth on Multiply")}},{key:"validate",value:function(){if(u(c(n.prototype),"validate",this).call(this),this.inputLayer1.width!==this.inputLayer2.height)throw new Error("Layer width mismatch of ".concat(this.inputLayer1.width," and ").concat(this.inputLayer2.height))}},{key:"setupKernels",value:function(){this.predictKernel=F(Ut,{output:[this.width,this.height],constants:{size:this.inputLayer2.height},immutable:!0}),this.compareKernel1=F(Wt,{output:[this.inputLayer1.width,this.inputLayer1.height],constants:{size:this.inputLayer2.width},immutable:!0}),this.compareKernel2=F(Ht,{output:[this.inputLayer2.width,this.inputLayer2.height],constants:{size:this.inputLayer1.height},immutable:!0})}},{key:"reuseKernels",value:function(t){u(c(n.prototype),"reuseKernels",this).call(this,t),this.compareKernel1=t.compareKernel1,this.compareKernel2=t.compareKernel2}},{key:"predict",value:function(){if(N(this.weights),!this.predictKernel)throw new Error("this.predictKernel is not set");this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){if(!this.compareKernel1)throw new Error("this.compareKernel1 not set");if(!this.compareKernel2)throw new Error("this.compareKernel2 not set");var t=this.inputLayer1.deltas,e=this.inputLayer2.deltas,n=this.compareKernel1(this.deltas,this.inputLayer1.deltas,this.inputLayer2.weights),r=this.compareKernel2(this.deltas,this.inputLayer2.deltas,this.inputLayer1.weights);this.inputLayer2.deltas=r,this.inputLayer1.deltas=n,N(t),N(e)}},{key:"setupPraxis",value:function(){}},{key:"toJSON",value:function(){return d(d({},u(c(n.prototype),"toJSON",this).call(this)),{},{width:this.width,height:this.height})}}]),n}(Q);function qt(t,e,n){return new Xt(t,e,n)}function Yt(t){return 1/(1+Math.exp(-t[this.thread.y][this.thread.x]))}function Jt(t){return 1/(1+Math.exp(-t[this.thread.z][this.thread.y][this.thread.x]))}function $t(t,e){var n=t[this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.y][this.thread.x]}function Qt(t,e){var n=t[this.thread.z][this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.z][this.thread.y][this.thread.x]}var te=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=F(Jt,{output:[this.width,this.height,this.depth],functions:[y],immutable:!0}),this.compareKernel=F(Qt,{output:[this.width,this.height,this.depth],functions:[x],immutable:!0})):(this.predictKernel=F(Yt,{output:[this.width,this.height],functions:[y],immutable:!0}),this.compareKernel=F($t,{output:[this.width,this.height],functions:[x],immutable:!0}))}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){N(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}},{key:"learn",value:function(t){}}]),n}(q);function ee(t,e){return new te(t,e)}function ne(t,e){var n=t.height;function r(t,e){var n=vt(t,e);return n.setupKernels(),n}function i(t,e){var n=pt(t,e);return n.setupKernels(),n}var a=Bt({id:"weights",height:n,width:e.height,initPraxis:r}),o=Bt({id:"biases",height:n,initPraxis:i}),s=ee(Rt(qt(a,e),o)),u=a.praxis;return u.weightsLayer=a,u.incomingLayer=e,u.deltaLayer=s,s}function re(t,e){if("number"===typeof t.stride)return{strideX:t.stride,strideY:t.stride};var n=e.stride,r=e.stride;return"number"===typeof t.strideX&&(n=t.strideX),"number"===typeof t.strideY&&(r=t.strideY),{strideX:n,strideY:r}}function ie(t,e){if("number"===typeof t.padding)return{paddingX:t.padding,paddingY:t.padding};var n=e.padding,r=e.padding;return"number"===typeof t.paddingX&&(n=t.paddingX),"number"===typeof t.paddingY&&(r=t.paddingY),{paddingX:n,paddingY:r}}function ae(t,e){return new Float32Array(t).fill(e)}function oe(t,e,n){for(var r=this.constants.paddingX-this.thread.x*this.constants.strideX,i=this.thread.x*this.constants.strideX-this.constants.paddingX,a=Math.min(this.constants.filterWidth,r+this.constants.inputWidth),o=this.constants.paddingY-this.thread.y*this.constants.strideY,s=this.thread.y*this.constants.strideY-this.constants.paddingY,u=Math.min(this.constants.filterHeight,o+this.constants.inputHeight),c=0,l=0;l<this.constants.inputDepth;l++)for(var h=Math.max(0,o),p=Math.max(0,s);h<u;h++,p++)for(var d=Math.max(0,r),f=Math.max(0,i);d<a;d++,f++)c+=e[l][h][d]*t[l][p][f];return c+n[this.thread.z]}function se(t,e,n){for(var r=Math.max(0,Math.ceil((this.constants.paddingX-this.thread.x)/this.constants.strideX)),i=r*this.constants.strideX+this.thread.x-this.constants.paddingX,a=Math.min(this.constants.deltaWidth,Math.floor((this.constants.inputWidth-1-this.thread.x+this.constants.paddingX)/this.constants.strideX)+1),o=Math.max(0,Math.ceil((this.constants.paddingY-this.thread.y)/this.constants.strideY)),s=o*this.constants.strideY+this.thread.y-this.constants.paddingY,u=Math.min(this.constants.deltaHeight,Math.floor((this.constants.inputHeight-1-this.thread.y+this.constants.paddingY)/this.constants.strideY)+1),c=t[this.thread.z][this.thread.y][this.thread.x],l=o,h=s;l<u;l++,h+=this.constants.strideY)for(var p=r,d=i;p<a;p++,d+=this.constants.strideX)c+=e[this.thread.z][h][d]*n[this.constants.deltaZ][l][p];return c}function ue(t,e,n){for(var r=this.thread.x+this.constants.paddingX,i=r<this.constants.filterWidth?0:Math.floor((r-this.constants.filterWidth+this.constants.strideX)/this.constants.strideX),a=r-i*this.constants.strideX,o=Math.min(i+Math.floor(a/this.constants.strideX)+1,this.constants.deltaWidth),s=this.thread.y+this.constants.paddingY,u=s<this.constants.filterHeight?0:Math.floor((s-this.constants.filterHeight+this.constants.strideY)/this.constants.strideY),c=s-u*this.constants.strideY,l=Math.min(u+Math.floor(c/this.constants.strideY)+1,this.constants.deltaHeight),h=t[this.thread.z][this.thread.y][this.thread.x],p=u,d=c;p<l;d-=this.constants.strideY,p++)for(var f=i,m=a;f<o;m-=this.constants.strideX,f++)h+=e[this.thread.z][d][m]*n[this.constants.deltaZ][p][f];return h}function ce(t,e){for(var n=0,r=0;r<this.constants.deltaHeight;r++)for(var i=0;i<this.constants.deltaWidth;i++)n+=e[this.thread.z][r][i];return t[this.thread.z][this.thread.y][this.thread.x]+n}var le={stride:0,padding:0,bias:.1,filterCount:1,filterWidth:0,filterHeight:0},he=function(t){l(n,t);var e=h(n);function n(t,r){var i,a,o,s;return f(this,n),(i=e.call(this,t,r)).compareFilterDeltasKernel=null,i.compareInputDeltasKernel=null,i.compareBiasesKernel=null,i.settings=d(d(d(d({},le),t),ie(t,le)),re(t,le)),i.weights=null!==(a=t.weights)&&void 0!==a?a:Zt(i.width,i.height,i.depth),i.deltas=X(i.width,i.height,i.depth),i.biases=ae(i.depth,i.bias),i.biasDeltas=null!==(o=t.biasDeltas)&&void 0!==o?o:Vt(i.depth),i.filters=null!==(s=t.filters)&&void 0!==s?s:Zt(i.filterWidth,i.filterHeight,i.filterCount),i.filterDeltas=X(i.filterWidth,i.filterHeight,i.filterCount),i.validate(),i}return m(n,[{key:"strideX",get:function(){return this.settings.strideX}},{key:"strideY",get:function(){return this.settings.strideY}},{key:"paddingX",get:function(){return this.settings.paddingX}},{key:"paddingY",get:function(){return this.settings.paddingX}},{key:"width",get:function(){return Math.floor((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}},{key:"height",get:function(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}},{key:"bias",get:function(){return this.settings.bias}},{key:"depth",get:function(){return this.filterCount}},{key:"biases",get:function(){return this.settings.biases},set:function(t){this.settings.biases=t}},{key:"biasDeltas",get:function(){return this.settings.biasDeltas},set:function(t){this.settings.biasDeltas=t}},{key:"filters",get:function(){return this.settings.filters},set:function(t){this.settings.filters=t}},{key:"filterDeltas",get:function(){return this.settings.filterDeltas},set:function(t){this.settings.filterDeltas=t}},{key:"setupKernels",value:function(){this.predictKernel=F(oe,{constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareFilterDeltasKernel=F(se,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareInputDeltasKernel=F(ue,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight,filterCount:this.filterCount},output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],immutable:!0}),this.compareBiasesKernel=F(ce,{output:[1,1,this.depth],constants:{deltaWidth:this.width,deltaHeight:this.height},immutable:!0})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.filterDeltas,e=this.biasDeltas;this.filterDeltas=this.compareFilterDeltasKernel(t,this.inputLayer.weights,this.deltas),N(t),this.biasDeltas=this.compareBiasesKernel(e,this.deltas),N(e),N(this.deltas),this.deltas=this.compareInputDeltasKernel(this.filters,this.inputLayer.deltas),N(this.inputLayer.deltas),this.inputLayer.deltas=K(this.deltas)}},{key:"learn",value:function(t){var e=this.weights;this.weights=this.praxis.run(this,t),N(e)}}]),n}(Y);function pe(t,e){return new he(t,e)}function de(t){return t}function fe(t){return de(Math.random())<this.constants.probability?0:t[this.thread.y][this.thread.x]}function me(t){return t[this.thread.y][this.thread.x]*this.constants.probability}function ge(t,e){return 0===t[this.thread.y][this.thread.x]?0:e[this.thread.y][this.thread.x]}var ve=d(d({},G),{},{probability:.5}),ye=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,r,t)).predictKernelMap=null,i.settings=d(d({},ve),r),i.dropouts=null,i.validate(),i}return m(n,[{key:"setupKernels",value:function(t){var e=[this.width,this.height];t?(this.predictKernelMap=z({dropouts:de},fe,{output:e,immutable:!0}),this.compareKernel=F(ge,{output:e,immutable:!0})):this.predictKernelMap=z({},me,{output:e,immutable:!0})}},{key:"predict",value:function(){N(this.weights),this.dropouts&&N(this.dropouts);var t=this.predictKernelMap(this.inputLayer.weights),e=t.result,n=t.dropouts;this.weights=e,this.dropouts=n}},{key:"compare",value:function(){N(this.deltas),this.deltas=this.compareKernel(this.dropouts,this.inputLayer.deltas)}}]),n}(Y);function xe(t,e){return new ye(t,e)}function be(t,e){var n=t.height,r=t.praxisOpts,i=void 0===r?null:r,a=Bt({id:"weights",height:n,width:e.height,praxisOpts:i}),o=Bt({id:"biases",height:n,praxisOpts:i});return ee(Rt(qt(a,e,{praxisOpts:i}),o,{praxisOpts:i}),{praxisOpts:i})}function we(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputHeight;a++)for(var o=0;o<this.constants.inputWidth;o++)r+=t[a][o]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function ke(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputDepth;a++)for(var o=0;o<this.constants.inputHeight;o++)for(var s=0;s<this.constants.inputWidth;s++)r+=t[a][o][s]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function Se(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.y][this.thread.x]}function Te(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.z][this.thread.y][this.thread.x]}function Ae(t,e){return t[this.thread.x]+e[this.thread.y][this.thread.x]}function Ee(t,e,n){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]*n[this.constants.deltaY][this.constants.deltaX]}function _e(t,e,n){var r=Math.floor(this.thread.x/(this.constants.inputWidth*this.constants.inputHeight)),i=Math.floor((this.thread.x-r*this.constants.inputWidth*this.constants.inputHeight)/this.constants.inputWidth),a=this.thread.x-this.constants.inputWidth*(i+this.constants.inputHeight*r);return t[this.thread.y][this.thread.x]+e[r][i][a]*n[0][this.thread.y]}var Le=function(t){l(n,t);var e=h(n);function n(t,r){var i;f(this,n),(i=e.call(this,t,r)).compareFilterDeltasKernel=null,i.compareInputDeltasKernel=null,i.compareBiasesKernel=null,i.settings=d({},t),i.validate();var a=r.width*r.height*r.depth;return i.biases=ae(i.height,i.bias),i.biasDeltas=W(i.height),i.filters=Kt(a,i.height),i.filterDeltas=H(a,i.height),i.depth>0?(i.weights=Zt(i.width,i.height,i.depth),i.deltas=X(i.width,i.height,i.depth)):i.height>0&&(i.weights=Kt(i.width,i.height),i.deltas=H(i.width,i.height)),i}return m(n,[{key:"bias",get:function(){return this.settings.bias}},{key:"biases",get:function(){return this.settings.biases},set:function(t){this.settings.biases=t}},{key:"biasDeltas",get:function(){return this.settings.biases},set:function(t){this.settings.biasDeltas=t}},{key:"validate",value:function(){if(u(c(n.prototype),"validate",this).call(this),this.depth>0)throw new Error("depth not supported")}},{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width*t.height*t.depth;t.depth>0?(this.predictKernel=F(ke,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width,inputDepth:t.depth}}),this.compareFilterDeltasKernel=F(_e,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height},immutable:!0}),this.compareInputDeltasKernel=F(Te,{output:[t.width,t.height,t.depth],constants:{filterCount:this.height},immutable:!0})):(this.predictKernel=F(we,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width}}),this.compareFilterDeltasKernel=F(Ee,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height}}),this.compareInputDeltasKernel=F(Se,{output:[t.width,t.height],constants:{filterCount:this.height}})),this.compareBiasesKernel=F(Ae,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareInputDeltasKernel(t,this.deltas,this.filters),N(t);var e=this.biasDeltas,n=this.filterDeltas;this.biasDeltas=this.compareBiasesKernel(this.biases,this.deltas),this.filterDeltas=this.compareFilterDeltasKernel(n,this.inputLayer.weights,this.deltas),N(e),N(n)}}]),n}(Y);function Ie(t,e){return new Le(t,e)}function Ce(t){return-t[this.thread.y][this.thread.x]}var Oe=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).validate(),i}return m(n,[{key:"setupKernels",value:function(){this.predictKernel=F(Ce,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights)}}]),n}($);function Re(t,e){return new Oe(t,e)}function De(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}function Me(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}var Fe=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"width",get:function(){return this.inputLayer1.width}},{key:"height",get:function(){return this.inputLayer1.height}},{key:"depth",get:function(){return this.inputLayer1.depth}},{key:"validate",value:function(){u(c(n.prototype),"validate",this).call(this),It(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=F(De,{output:[this.width,this.height],immutable:!0}),this.compareKernel=F(Me,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){N(this.inputLayer1.deltas),N(this.inputLayer2.deltas),this.inputLayer1.deltas=this.compareKernel(this.inputLayer2.weights,this.deltas),this.inputLayer2.deltas=this.compareKernel(this.inputLayer1.weights,this.deltas)}}]),n}(Q);function ze(t,e,n){return new Fe(t,e,n)}function Pe(t){return new Float32Array(t).fill(1)}function Ne(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=Pe(t);return n}var Ve=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).validate(),r.weights=Ne(r.width,r.height),r.deltas=H(r.width,r.height),r}return m(n)}(ot);function Ke(t){return new Ve(t)}function Ze(t){return w(t[this.thread.y][this.thread.x])}function je(t){return w(t[this.thread.z][this.thread.y][this.thread.x])}function Ge(t,e){return k(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function Be(t,e){return k(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var Ue=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=F(je,{output:[this.width,this.height,this.depth],functions:[w],immutable:!0}),this.compareKernel=F(Be,{output:[this.width,this.height,this.depth],functions:[k],immutable:!0})):(this.predictKernel=F(Ze,{output:[this.width,this.height],functions:[w],immutable:!0}),this.compareKernel=F(Ge,{output:[this.width,this.height],functions:[k],immutable:!0}))}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){N(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),n}(q);function We(t,e){return new Ue(t,e)}var He=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).validate(),r.weights=H(r.width,r.height),r.deltas=H(r.width,r.height),r}return m(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}]),n}(ot);function Xe(t){return new He(t)}function qe(t,e,n){var r=t.height,i=Bt({height:r,width:n.height}),a=Bt({width:r,height:r}),o=Xe({height:r}),s=ee(Rt(Rt(qt(i,n),qt(a,e)),o)),u=Bt({height:r,width:n.height}),c=Bt({width:r,height:r}),l=Xe({height:r}),h=ee(Rt(Rt(qt(u,n),qt(c,e)),l)),p=Bt({height:r,width:n.height}),d=Bt({width:r,height:r}),f=Xe({height:r}),m=We(Rt(Rt(qt(p,n),qt(d,ze(h,e))),f));return Rt(ze(Rt(Ke({width:s.width,height:s.height}),Re(s)),m),ze(e,s))}var Ye={weights:null},Je=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,d(d({},Ye),t))).reshapeInput=null,r.validate(),r.reshapeInput=null,r.deltas=H(r.width,r.height),r}return m(n,[{key:"setupKernels",value:function(){1===this.width&&(this.predict=this.predict1D,this.reshapeInput=F((function(t){return t[this.thread.y]}),{output:[1,this.height],immutable:!0}))}},{key:"reuseKernels",value:function(t){this.reshapeInput=t.reshapeInput}},{key:"predict",value:function(t){if((Array.isArray(t)||t instanceof Float32Array)&&"number"===typeof t[0]&&t.length===this.height*this.width)N(this.weights),this.weights=P(t,[this.width,this.height]);else{if(!Array.isArray(t)||t.length!==this.height||!(Array.isArray(t[0])||t[0]instanceof Float32Array)||t[0].length!==this.width)throw new Error("Inputs are not of sized correctly");this.weights=K(t)}}},{key:"predict1D",value:function(t){this.weights&&N(this.weights),this.reshapeInput?this.weights=this.reshapeInput(t):this.weights=t}},{key:"compare",value:function(){}},{key:"learn",value:function(){}}]),n}(at);function $e(t){return new Je(t)}function Qe(t){return T(t[this.thread.y][this.thread.x])}function tn(t){return T(t[this.thread.z][this.thread.y][this.thread.x])}function en(t,e){return A(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function nn(t,e){return A(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var rn=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width,n=t.height,r=t.depth;this.depth>0?(this.predictKernel=F(tn,{output:[e,n,r],functions:[T],immutable:!0}),this.compareKernel=F(nn,{output:[e,n,r],functions:[A],immutable:!0})):(this.predictKernel=F(Qe,{output:[e,n],functions:[T],immutable:!0}),this.compareKernel=F(en,{output:[e,n],functions:[A],immutable:!0}))}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){var t=this.deltas;this.deltas=this.compareKernel(this.weights,t),N(t)}}]),n}(q);function an(t,e){return new rn(t,e)}function on(t,e,n){var r=t.height;if("number"!==typeof r)throw new Error("no settings.height given");n.setDimensions&&n.setDimensions(1,r);var i=Bt({width:e.height,height:r,std:.08,id:"inputGateWeights"}),a=Bt({width:r,height:r,std:.08,id:"inputGatePeepholes"}),o=Xe({width:1,height:r,id:"inputGateBias"}),s=ee(Rt(Rt(qt(i,e),qt(a,n)),o),{id:"inputGate"}),u=Bt({width:e.height,height:r,std:.08,id:"forgetGateWeights"}),c=Bt({width:r,height:r,std:.08,id:"forgetGatePeepholes"}),l=Xe({width:1,height:r,id:"forgetGateBias"}),h=ee(Rt(Rt(qt(u,e),qt(c,n)),l),{id:"forgetGate"}),p=Bt({width:e.height,height:r,std:.08,id:"outputGateWeights"}),d=Bt({width:r,height:r,std:.08,id:"outputGatePeepholes"}),f=Xe({width:1,height:r,id:"outputGateBias"}),m=ee(Rt(Rt(qt(p,e),qt(d,n)),f),{id:"outputGate"}),g=Bt({width:e.height,height:r,std:.08,id:"memoryWeights"}),v=Bt({width:r,height:r,std:.08,id:"memoryPeepholes"}),y=Xe({width:1,height:r,id:"memoryBias"}),x=We(Rt(Rt(qt(g,e),qt(v,n)),y),{id:"memory"}),b=ze(h,n,{id:"retainCell"}),w=ze(s,x,{id:"writeCell"});return ze(m,We(Rt(b,w,{id:"cell"})),{id:"activations"})}function sn(t,e){var n=t.height,r=Bt({height:n,width:e.height,id:"outputGate",std:.08}),i=Bt({height:n,id:"output",std:.08}),a=qt(r,e,{id:"outputGateConnected"});return rt(d({id:"target"},t),Rt(a,i))}function un(t){return t}function cn(t){return t}function ln(t){for(var e=this.thread.x*this.constants.strideX-this.constants.paddingX,n=this.thread.y*this.constants.strideY-this.constants.paddingY,r=e+this.constants.filterWidth,i=n+this.constants.filterHeight,a=Math.max(e,0),o=Math.max(n,0),s=Math.min(r,this.constants.inputWidth),u=Math.min(i,this.constants.inputHeight),c=t[this.thread.z][o][a],l=o;l<u;l++)for(var h=a;h<s;h++){var p=t[this.thread.z][l][h];p>c&&(c=p)}return c}function hn(t,e,n){for(var r=this.thread.x+.5,i=this.thread.y+.5,a=1/this.constants.strideX,o=1/this.constants.strideY,s=Math.max(0,Math.ceil((r-this.constants.filterWidth+this.constants.paddingX)*a)),u=Math.max(0,Math.ceil((i-this.constants.filterHeight+this.constants.paddingY)*o)),c=Math.min(Math.ceil((r+this.constants.paddingX)*a),this.constants.outputWidth),l=Math.min(Math.ceil((i+this.constants.paddingY)*o),this.constants.outputHeight),h=0,p=u;p<l;p++)for(var d=s;d<c;d++){var f=e[p][d],m=n[p][d];Math.abs(f-this.thread.x)<.1&&Math.abs(m-this.thread.y)<.1&&(h+=t[p][d])}return h}var pn={padding:0,stride:0,filterWidth:0,filterHeight:0,filterCount:0},dn=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).predictKernelMap=null,i.settings=d(d(d({},t),re(t,pn)),ie(t,pn)),i.weights=Zt(i.width,i.height,i.depth),i.deltas=X(i.width,i.height,i.depth),i.validate(),i}return m(n,[{key:"strideX",get:function(){return this.settings.strideX}},{key:"strideY",get:function(){return this.settings.strideY}},{key:"paddingX",get:function(){return this.settings.paddingX}},{key:"paddingY",get:function(){return this.settings.paddingY}},{key:"width",get:function(){return Math.ceil((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}},{key:"height",get:function(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}},{key:"depth",get:function(){return this.settings.filterCount}},{key:"filterCount",get:function(){return this.settings.filterCount}},{key:"switchX",get:function(){return this.settings.switchX},set:function(t){this.settings.switchX=t}},{key:"switchY",get:function(){return this.settings.switchY},set:function(t){this.settings.switchY=t}},{key:"setupKernels",value:function(){this.predictKernelMap=z({switchX:cn,switchY:un},ln,{output:[this.width,this.height,this.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,paddingX:this.paddingX,paddingY:this.paddingY,filterHeight:this.filterHeight,filterWidth:this.filterWidth,strideX:this.strideX,strideY:this.strideY}}),this.compareKernel=F(hn,{output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,outputWidth:this.width,outputHeight:this.height,filterWidth:this.filterWidth,filterHeight:this.filterHeight,paddingX:this.paddingX,paddingY:this.paddingY,strideX:this.strideX,strideY:this.strideY}})}},{key:"predict",value:function(){var t=this.predictKernelMap(this.inputLayer.weights),e=t.result,n=t.switchX,r=t.switchY;this.switchX=n,this.switchY=r,this.weights=e}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareKernel(this.deltas,this.switchX,this.switchY),N(t)}}]),n}(Y);function fn(t,e){return new dn(t,e)}var mn=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this)).praxis=null,r.predictKernel=null,r.compareKernel=null,r.settings={},r.recurrentInput=t,r.validate(),r}return m(n,[{key:"width",get:function(){return this.recurrentInput.width}},{key:"height",get:function(){return this.recurrentInput.height}},{key:"depth",get:function(){return this.recurrentInput.depth}},{key:"deltas",get:function(){return this.recurrentInput.deltas},set:function(t){var e=this.recurrentInput.deltas;this.recurrentInput.deltas=t,N(e)}},{key:"weights",get:function(){return this.recurrentInput.weights},set:function(t){var e=this.recurrentInput.weights;this.recurrentInput.weights=t,N(e)}},{key:"validate",value:function(){if(B.prototype.validate.call(this),this.width!==this.recurrentInput.width)throw new Error("".concat(this.constructor.name," layer width ").concat(this.width," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.width,") are not same"));if(this.height!==this.recurrentInput.height)throw new Error("".concat(this.constructor.name," layer height ").concat(this.height," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.height,") are not same"))}},{key:"setDimensions",value:function(t,e){this.recurrentInput.width=t,this.recurrentInput.height=e}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(J),gn=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this)).praxis=null,r.settings={},r.predictKernel=null,r.compareKernel=null,t&&(r.settings=d({},t)),r}return m(n,[{key:"setDimensions",value:function(t,e){this.praxis=null,this.settings=d(d({},this.settings),{},{width:t,height:e,weights:H(t,e),deltas:H(t,e)})}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(t){var e=this.weights;this.weights=this.praxis.run(this,t),N(e)}}]),n}(J);function vn(){return new gn}function yn(t){return e(t[this.thread.y][this.thread.x])}function xn(t,e){return g(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function bn(t){return e(t[this.thread.z][this.thread.y][this.thread.x])}function wn(t,e){return g(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var kn=function(t){l(r,t);var n=h(r);function r(){return f(this,r),n.apply(this,arguments)}return m(r,[{key:"setupKernels",value:function(){var t=this.inputLayer,n=t.width,r=t.height,i=t.depth;i>0?(this.predictKernel=F(bn,{output:[n,r,i],functions:[e],immutable:!0}),this.compareKernel=F(wn,{output:[n,r,i],functions:[g],immutable:!0})):(this.predictKernel=F(yn,{output:[n,r],functions:[e],immutable:!0}),this.compareKernel=F(xn,{output:[n,r],functions:[g],immutable:!0}))}},{key:"predict",value:function(){N(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){N(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),r}(q);function Sn(t,e){return new kn(t,e)}function Tn(t,e,n){var r=t.height;if("number"!==typeof r)throw new Error("height not set");n.setDimensions&&n.setDimensions(1,r);var i=Bt({id:"weight",height:r,width:e.height,std:.08}),a=Bt({id:"transition",height:r,width:r,std:.08}),o=Xe({id:"bias",height:r});return Sn(Rt(Rt(qt(i,e),qt(a,n)),o))}var An=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t)).inputLayer=r,i.validate(),i}return m(n,[{key:"predict",value:function(){N(this.weights),this.weights=K(this.inputLayer.weights)}},{key:"learn",value:function(){}}]),n}(B);function En(t,e){return new An(t,e)}function _n(t){for(var e=-1/0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++){var i=t[n][r];i>e&&(e=i)}return e}function Ln(t){for(var e=-1/0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++){var a=t[n][r][i];a>e&&(e=a)}return e}function In(t){for(var e=0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++)e+=t[n][r];return e}function Cn(t){for(var e=0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++)e+=t[n][r][i];return e}function On(t,e){return Math.exp(t[this.thread.x]-e[0])}function Rn(t,e){return Math.exp(t[this.thread.z][this.thread.y][this.thread.x]-e[0])}function Dn(t,e){return t[this.thread.y][this.thread.x]/e[0]}function Mn(t,e){return t[this.thread.z][this.thread.y][this.thread.x]/e[0]}function Fn(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x===t&&(n=1),-(n-e[this.thread.y][this.thread.x])}function zn(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x+this.thread.z*this.output.x*this.output.y===t&&(n=1),-(n-e[this.thread.z][this.thread.y][this.thread.x])}var Pn=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,t,r)).errors=null,i.getExponentialsKernel=null,i.getMaxValueKernel=null,i.getSumKernel=null,i.validate(),i.depth>0?(i.weights=Zt(i.width,i.height,i.depth),i.deltas=X(i.width,i.height,i.depth)):i.height>0?(i.weights=Kt(i.width,i.height),i.deltas=H(i.width,i.height)):(i.weights=Vt(i.width),i.deltas=W(i.width)),i}return m(n,[{key:"setupKernels",value:function(){var t=this.width,e=this.height,n=this.depth;n>0?(this.getExponentialsKernel=F(Rn,{output:[t,e,n]}),this.getMaxValueKernel=F(Ln,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.getSumKernel=F(Cn,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.predictKernel=F(Mn,{output:[t,e,n]}),this.compareKernel=F(zn,{output:[t,e,n],immutable:!0})):(this.getExponentialsKernel=F(On,{output:[t,e]}),this.getMaxValueKernel=F(_n,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.getSumKernel=F(In,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.predictKernel=F(Dn,{output:[t,e]}),this.compareKernel=F(Fn,{output:[t,e],immutable:!0}))}},{key:"predict",value:function(){var t=this.getMaxValueKernel(this.inputLayer.weights),e=this.getExponentialsKernel(this.inputLayer.weights,t),n=this.getSumKernel(e);this.weights=this.predictKernel(e,n)}},{key:"compare",value:function(t){var e=this.deltas,n=this.errors;this.errors=this.compareKernel(t[0],e),this.deltas=K(this.errors),N(e),N(n);var r=this.inputLayer.deltas;this.inputLayer.deltas=K(this.deltas),N(r)}}]),n}($);function Nn(t,e){return new Pn(t,e)}var Vn=function(t){l(n,t);var e=h(n);function n(t,r){var i;return f(this,n),(i=e.call(this,r)).inputLayer=t,i}return m(n,[{key:"predict",value:function(){N(this.weights),this.weights=K(this.inputLayer.weights),this.validate()}},{key:"learn",value:function(){}}]),n}(B);function Kn(t,e){return new Vn(t,e)}function Zn(t){return t[this.thread.x][this.thread.y]}var jn=Zn,Gn=function(t){l(n,t);var e=h(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).validate(),r}return m(n,[{key:"width",get:function(){return this.inputLayer.height}},{key:"height",get:function(){return this.inputLayer.width}},{key:"setupKernels",value:function(){this.predictKernel=F(Zn,{output:[this.height,this.width]}),this.compareKernel=F(jn,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){this.inputLayer.deltas=this.compareKernel(this.deltas)}}]),n}($);function Bn(t){return new Gn(t)}var Un={Activation:q,Internal:J,InternalModel:it,EntryPoint:at,Filter:Y,Model:ot,Modifier:$,Operator:Q,Target:nt},Wn=Object.freeze({__proto__:null,layerTypes:Un,Add:Ot,add:Rt,arthurFeedForward:ne,BaseLayer:B,baseLayerDefaultSettings:G,Convolution:he,convolution:pe,Dropout:ye,dropout:xe,feedForward:be,FullyConnected:Le,fullyConnected:Ie,gru:qe,Input:Je,input:$e,LeakyRelu:rn,leakyRelu:an,lstmCell:on,Multiply:Xt,multiply:qt,MultiplyElement:Fe,multiplyElement:ze,Negative:Oe,negative:Re,Ones:Ve,ones:Ke,output:sn,Pool:dn,pool:fn,Random:Gt,random:Bt,RecurrentInput:mn,RecurrentZeros:gn,rnnCell:Tn,Regression:An,regression:En,Relu:kn,relu:Sn,Sigmoid:te,sigmoid:ee,SoftMax:Pn,softMax:Nn,SVM:Vn,svm:Kn,Tanh:Ue,tanh:We,Target:nt,target:rt,Transpose:Gn,transpose:Bn,Zeros:He,zeros:Xe}),Hn=Object.keys(Wn);function Xn(t,e,n){if(!Hn.find((function(e){return e===t.type})))return null;var r=Wn[t.type];if(r.prototype instanceof Un.Filter){if(!e)throw new Error("inputLayer missing");return new r(t,e)}if(r.prototype instanceof Un.Activation||r.prototype instanceof Un.Modifier){if(!e)throw new Error("inputLayer missing");return new r(e,t)}if(r.prototype instanceof Un.Internal)return new r(t);if(r.prototype instanceof Un.Operator){if(!e)throw new Error("inputLayer1 missing");if(!n)throw new Error("inputLayer2 missing");return new r(e,n,t)}if(r.prototype instanceof Un.InternalModel||r.prototype instanceof Un.EntryPoint||r.prototype instanceof Un.Model)return new r(t);if(r===nt){if(!e)throw new Error("inputLayer missing");return new r(t,e)}return null}var qn=m((function t(e,n){f(this,t),this.prop=null,this.table={},this.length=0;var r=this.table;if(n){this.prop=n;for(var i=0;i<e.length;i++){var a=e[i][n];for(var o in a)a.hasOwnProperty(o)&&(r.hasOwnProperty(o)||(r[o]=this.length++))}}else if(Array.isArray(e)&&Array.isArray(e[0]))for(var s=0;s<e.length;s++)for(var u=e[s],c=0;c<u.length;c++){var l=u[c];for(var h in l)l.hasOwnProperty(h)&&(r.hasOwnProperty(h)||(r[h]=this.length++))}else for(var p=0;p<e.length;p++){var d=e[p];for(var m in d)d.hasOwnProperty(m)&&(r.hasOwnProperty(m)||(r[m]=this.length++))}})),Yn=C((function(t,e){var n=I&&I.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.thaw=e.Block=e.Thaw=void 0;var r=function(){function t(e,r){var i=this;void 0===r&&(r={});var a=n(n({},t.defaultSettings),r),o=a.each,s=a.done;this.i=0,this.isStopped=!1,this.items=e,this.options=r,this.tick=function(){if(!i.isStopped&&(i.timeout=setTimeout(i.tick,0),!t.thawing)){var e=i.items[i.i];if(i.i>=i.items.length)return null!==s&&(t.thawing=!0,s(),t.thawing=!1),i.isStopped=!0,void clearTimeout(i.timeout);null!==o?(t.thawing=!0,o(e,i.i),t.thawing=!1):void 0!==e&&e(),i.i++}},t.thaws.push(this),r.delay||this.tick()}return Object.defineProperty(t,"isThawing",{get:function(){return t.thawing},enumerable:!1,configurable:!0}),t.stopAll=function(){for(var e=0;e<t.thaws.length;e++)t.thaws[e].stop()},t.prototype.makeReady=function(){return!!this.isStopped&&(this.isStopped=!1,!0)},t.prototype.add=function(t){return this.items.push(t),this.makeReady()&&this.tick(),this},t.prototype.insert=function(t){return this.items.splice(this.i,0,t),this.makeReady()&&this.tick(),this},t.prototype.addArray=function(t){return this.items=this.items.concat(t),this.makeReady()&&this.tick(),this},t.prototype.insertArray=function(t){var e=this.items.splice(0,this.i),n=this.items;return this.items=e.concat(t,n),this.makeReady()&&this.tick(),this},t.prototype.stop=function(){return this.isStopped=!0,clearTimeout(this.timeout),this.options.done&&this.options.done(),this},t.thawing=!1,t.thaws=[],t.defaultSettings={each:null,done:null},t}();function i(t,e){return new r(t,e)}e.Thaw=r,e.thaw=i;var a=function(){function t(t,e){void 0===e&&(e=200),this.index=0,this.thaws=[],this.count=e,this.options=t}return t.prototype.add=function(t){return this.next().add(t),this},t.prototype.addArray=function(t){return this.next().addArray(t),this},t.prototype.insert=function(t){return this.next().insert(t),this},t.prototype.insertArray=function(t){return this.next().insertArray(t),this},t.prototype.stop=function(){for(var t=0;t<this.thaws.length;t++)this.thaws[t].stop();return this},t.prototype.next=function(){var t,e=this.thaws;return e.length<this.count?(t=new r([],this.options),e.push(t)):t=e[this.index]||null,this.index++,this.index>=this.count&&(this.index=0),t},t}();e.Block=a,"undefined"!==typeof window&&(window.Thaw=r,window.thaw=i,window.Thaw.Block=a)})),Jn={learningRate:.3,binaryThresh:.5,initPraxis:function(t,e){var n;return St(t,null!==(n=t.settings.praxisOpts)&&void 0!==n?n:e)}},$n={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,callbackPeriod:10,errorCheckInterval:100,timeout:1/0},Qn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.trainOpts={},this.layers=null,this._inputLayer=null,this._hiddenLayers=null,this._outputLayer=null,this._model=null,this.meanSquaredError=null,this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,this.options=d(d({},Jn),e),this._updateTrainingOptions(d(d({},$n),e))}return m(t,[{key:"_setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"_updateTrainingOptions",value:function(e){var n;this.trainOpts=d(d(d({},$n),this.trainOpts),e),t._validateTrainingOptions(this.trainOpts),this._setLogMethod(null!==(n=e.log)&&void 0!==n?n:this.trainOpts.log);var r=this.trainOpts,i=r.callback,a=r.callbackPeriod,o=r.errorCheckInterval;i&&a!==o&&console.warn("options.callbackPeriod with value of ".concat((null!==a&&void 0!==a?a:"undefined").toString()," does not match options.errorCheckInterval with value of ").concat((null!==o&&void 0!==o?o:"undefined").toString(),", if logging error, it will repeat.  These values may need to match"))}},{key:"_connectOptionsLayers",value:function(){var t=this.options,e=t.inputLayerIndex,n=t.outputLayerIndex,r=t.layers;if(!r)throw new Error("this.options.layers in unexpected state");if("number"!==typeof e)throw new Error("inputLayerIndex not a number");if("number"!==typeof n)throw new Error("inputLayerIndex not a number");var i=r[e];if(!i)throw new Error("inputLayer not found in this.options.layers");var a=r[n];if(!a)throw new Error("outputLayer not found in this.options.layers");return this._inputLayer=i,this._hiddenLayers=r.slice(e,n-e),this._outputLayer=a,r}},{key:"_connectNewLayers",value:function(){var t=this.options,e=t.inputLayer,n=t.outputLayer;if(!e)throw new Error("inputLayer not defined");var r=[];this._inputLayer=e();var i=this._connectHiddenLayers(this._inputLayer);if(!n)throw new Error("outputLayer not defined");return this._outputLayer=n(i[i.length-1],i.length),r.push(this._inputLayer),r.push.apply(r,a(i)),r.push(this._outputLayer),Lt(r)}},{key:"_connectHiddenLayers",value:function(t){this._hiddenLayers=[];var e=[],n=this.options.hiddenLayers;if(!n)throw new Error("hiddenLayers not defined");for(var r=0;r<n.length;r++){var i=n[r](t,r);e.push(i),this._hiddenLayers.push(i),t=i}return e}},{key:"initialize",value:function(){this.layers=this.options.layers?this._connectOptionsLayers():this._connectNewLayers(),this.initializeLayers(this.layers),this._model=this.layers.filter((function(t){return t instanceof ot}))}},{key:"initializeLayers",value:function(t){for(var e,n,r=0;r<t.length;r++){var i=t[r];i.setupKernels(!0),i instanceof ot&&null===i.praxis&&"function"===typeof this.options.initPraxis&&(i.praxis=this.options.initPraxis(i,null!==(n=null!==(e=i.settings.praxisOpts)&&void 0!==e?e:this.options.praxisOpts)&&void 0!==n?n:{}),i.praxis.setupKernels())}var a=t[t.length-1];this.meanSquaredError=new j({width:a.width,height:a.height})}},{key:"run",value:function(t){var e;if(Array.isArray(t)||t.buffer)e=t;else{if(!this.inputLookup)throw new Error("input is incompatible with net");e=st.toArray(this.inputLookup,t,this.inputLookupLength)}var n=this.runInput(e);return n instanceof R.Texture&&(n=n.toArray()),this.outputLookup?st.toObject(this.outputLookup,n):n}},{key:"runInput",value:function(t){if(!this.layers)throw new Error("not initialized");this.layers[0].predict(t);for(var e=1;e<this.layers.length;e++)this.layers[e].predict();return this.layers[this.layers.length-1].weights}},{key:"train",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._prepTraining(t,n),i=r.preparedData,a=r.status,o=r.endTime,s=!0,u=function(){return e._calculateTrainingError(i)},c=function(){return e._trainPatterns(i)};s;)s=this._trainingTick(a,o,u,c);return a}},{key:"trainAsync",value:function(){var t=i(r().mark((function t(e){var n,i,a,o,s,u=this,c=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},i=this._prepTraining(e,n),a=i.preparedData,o=i.status,s=i.endTime,t.next=4,new Promise((function(t,e){try{var n=function(){return u._calculateTrainingError(a)},r=function(){return u._trainPatterns(a)},i=new Yn.Thaw(new Array(u.trainOpts.iterations),{delay:!0,each:function(){return u._trainingTick(o,s,n,r)||i.stop()},done:function(){return t(o)}});i.tick()}catch(c){e(c)}}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_trainingTick",value:function(t,e,n,r){var i=this.trainOpts;return!(t.iterations>=i.iterations||t.error<=i.errorThresh||Date.now()>=e)&&("function"===typeof i.log&&t.iterations%i.logPeriod===0?(t.error=n(),i.log("iterations: ".concat(t.iterations,", training error: ").concat(t.error))):t.iterations%i.errorCheckInterval===0?t.error=n():r(),i.callback&&t.iterations%i.callbackPeriod===0&&i.callback(Object.assign(t)),t.iterations++,!0)}},{key:"_prepTraining",value:function(t,e){this._updateTrainingOptions(e);var n=this.formatData(t),r=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,i={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(n),status:i,endTime:r}}},{key:"verifyIsInitialized",value:function(){this._model||this.initialize()}},{key:"_calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=this.meanSquaredError,r=0;r<t.length;++r){var i=e,a=this._trainPattern(t[r].input,t[r].output,!0);e=n.add(e,a),N(a),N(i)}var o=n.divide(t.length,e);if(N(e),o instanceof R.Texture){var s=o.toArray();return N(o),s[0]}return o[0]}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e].input,t[e].output,!1)}},{key:"_trainPattern",value:function(t,e,n){var r;if(this.runInput(t),this._calculateDeltas(e),this.adjustWeights(),n){if(!(null===(r=this._outputLayer)||void 0===r?void 0:r.errors))throw new Error("outputLayer.errors not defined");return this.meanSquaredError.calculate(this._outputLayer.errors)}return null}},{key:"_calculateDeltas",value:function(t){for(var e=this.layers,n=e.length-1;n>-1;n--)e[n].compare(t)}},{key:"adjustWeights",value:function(){for(var t=this._model,e=0;e<t.length;e++)t[e].learn(this.trainOpts.learningRate)}},{key:"formatData",value:function(t){var e=this;if(!Array.isArray(t)){var n=[];n.push(t),t=n}var r,i=t[0].input;if(!Array.isArray(t)||Array.isArray(i)||i instanceof Float32Array)r=t;else{if(!this.inputLookup){var a=new qn(t,"input");this.inputLookup=a.table,this.inputLookupLength=a.length}r=t.map((function(t){return{input:st.toArray(e.inputLookup,t.input,e.inputLookupLength)}}),this)}var o=t[0].output;if(!Array.isArray(o)&&!(o instanceof Float32Array)){if(!this.outputLookup){var s=new qn(t,"output");this.outputLookup=s.table,this.outputLookupLength=s.length}r=t.map((function(t,n){var i=st.toArray(e.outputLookup,t.output,e.inputLookupLength);return{input:r[n].input,output:i}}),this)}return r}},{key:"transferData",value:function(t){for(var e=new Array(t.length),n=F((function(t){return t[this.thread.x]}),{output:[t[0].input.length],immutable:!0}),r=F((function(t){return t[this.thread.x]}),{output:[t[0].output.length],immutable:!0}),i=0;i<t.length;i++){var a=t[i];e[i]={input:n(a.input),output:r(a.output)}}return e}},{key:"test",value:function(){throw new Error("".concat(this.constructor.name,"-test is not yet implemented"))}},{key:"toJSON",value:function(){var t;if(this.layers||this.initialize(),!this._model||!this.layers||!this._inputLayer||!this._hiddenLayers||!this._outputLayer)throw new Error("network is not initialized");for(var e=[],n=0;n<this.layers.length;n++){var r=this.layers[n],i=r.toJSON();r.hasOwnProperty("inputLayer")?i.inputLayerIndex=this.layers.indexOf(r.inputLayer):r.hasOwnProperty("inputLayer1")&&r.hasOwnProperty("inputLayer2")&&(i.inputLayer1Index=this.layers.indexOf(r.inputLayer1),i.inputLayer2Index=this.layers.indexOf(r.inputLayer2)),e.push(i)}return{type:this.constructor.name,sizes:null!==(t=this.options.sizes)&&void 0!==t?t:[this._inputLayer.height].concat(this._hiddenLayers.map((function(t){return t.height}))).concat([this._outputLayer.height]),outputLayerIndex:this.layers.indexOf(this._outputLayer),layers:e,inputLayerIndex:this.layers.indexOf(this._inputLayer)}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}}],[{key:"_validateTrainingOptions",value:function(t){var e=t.iterations,n=t.errorThresh,r=t.log,i=t.logPeriod,a=t.learningRate,o=t.callback,s=t.callbackPeriod,u=t.timeout,c={iterations:function(){return"number"===typeof e&&e>0},errorThresh:function(){return"number"===typeof n&&n>0&&n<1},log:function(){return"function"===typeof r||"boolean"===typeof r},logPeriod:function(){return"number"===typeof i&&i>0},learningRate:function(){return"number"===typeof a&&a>0&&a<1},callback:function(){return"function"===typeof o||null===o},callbackPeriod:function(){return"number"===typeof s&&s>0},timeout:function(){return"number"===typeof u&&u>0}};Object.keys($n).forEach((function(e){if(c.hasOwnProperty(e)&&!c[e]()){var n=t[e];throw new Error("[".concat(e,", ").concat((null!==n&&void 0!==n?n:"undefined").toString(),"] is out of normal training range, your network will probably not train."))}}))}},{key:"fromJSON",value:function(t,e){var n,r,i,a,o=t.layers,s=[],u=e?null!==(n=Xn(o[0]))&&void 0!==n?n:e(o[0]):Xn(o[0]);if(!u)throw new Error("unable to find layer");s.push(u);for(var c=1;c<o.length;c++){var l=o[c];if("undefined"===typeof l.inputLayerIndex&&"undefined"===typeof l.inputLayer1Index&&"undefined"===typeof l.inputLayer2Index){var h=e?null!==(r=Xn(l))&&void 0!==r?r:e(l):Xn(l);if(!h)throw new Error("unable to find layer");s.push(h)}else if("number"===typeof l.inputLayerIndex){var p=s[l.inputLayerIndex];if(!p)throw new Error("inputLayer1 not found");var f=e?null!==(i=Xn(l,p))&&void 0!==i?i:e(l,p):Xn(l,p);if(!f)throw new Error("unable to find layer");s.push(f)}else{if("number"!==typeof l.inputLayer1Index)throw new Error("Cannot create network from provided JSON. inputLayer1Index not defined.");if("number"!==typeof l.inputLayer2Index)throw new Error("Cannot create network from provided JSON. inputLayer2Index not defined.");var m=s[l.inputLayer1Index],g=s[l.inputLayer2Index];if(void 0===m)throw new Error("Cannot create network from provided JSON. layer of index ".concat(l.inputLayer1Index," not found."));if(void 0===g)throw new Error("Cannot create network from provided JSON. layer of index ".concat(l.inputLayer2Index," not found."));var v=e?null!==(a=Xn(l,m,g))&&void 0!==a?a:e(l,m,g):Xn(l,m,g);if(!v)throw new Error("unable to find layer");s.push(v)}}return new this(d(d({},t),{},{layers:s}))}}]),t}();function tr(t,e){if(!e)throw new TypeError("Required parameter 'net' is of type ".concat(typeof e,". Must be of type 'brain.NeuralNetwork'"));var n=e.run(t),r=null,i=-1;return Object.entries(n).forEach((function(t){var e=p(t,2),n=e[0],a=e[1];"undefined"!==typeof a&&"number"===typeof a&&a>i&&(r=n,i=a)})),r}function er(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from(t[n]));return e}function nr(t,e){for(var n=[],r=0;r<t.length;r++)n.push(Float32Array.from(t[r]));for(var i=0;i<e.length;i++)n.push(Float32Array.from(e[i]));return n}function rr(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return e}function ir(t,e){for(var n=[],r=0;r<t.length;r++)n.push(Float32Array.from([t[r]]));for(var i=0;i<e.length;i++)n.push(Float32Array.from([e[i]]));return n}function ar(t){return Float32Array.from(t)}function or(t,e,n,r,i,a){for(var o=[],s=0;s<t.length;s++){var u=t[s],c=new Float32Array(i);for(var l in u)u.hasOwnProperty(l)&&(c[n[l]]=u[l]);o.push(c)}for(var h=0;h<e.length;h++){var p=e[h],d=new Float32Array(a);for(var f in p)p.hasOwnProperty(f)&&(d[r[f]]=p[f]);o.push(d)}return o}function sr(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(Float32Array.from([t[n]]));return e}function ur(t,e){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(Float32Array.from([t[r]]));for(var i in e)e.hasOwnProperty(i)&&n.push(Float32Array.from([e[i]]));return n}function cr(t,e,n){var r=new Float32Array(n);for(var i in t)t.hasOwnProperty(i)&&(r[e[i]]=t[i]);return r}function lr(t){return Array.isArray(t)||t instanceof Float32Array?Math.max.apply(Math,a(t)):Math.max.apply(Math,a(Object.values(t)))}function hr(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return e/t.length}function pr(t,e){if(t.buffer instanceof ArrayBuffer)return null;if(Array.isArray(t))return ar;if(!e)throw new Error("table is not Object");var n=Object.keys(e).length;return function(t){var r=new Float32Array(n);for(var i in e)e.hasOwnProperty(i)&&"number"===typeof t[i]&&(r[e[i]]=t[i]||0);return r}}function dr(){return{inputSize:0,outputSize:0,binaryThresh:.5}}function fr(){return{activation:"sigmoid",iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,leakyReluAlpha:.01,learningRate:.3,momentum:.1,callbackPeriod:10,timeout:1/0,beta1:.9,beta2:.999,epsilon:1e-8}}var mr=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.options=dr(),this.trainOpts=fr(),this.sizes=[],this.outputLayer=-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[],this.errorCheckInterval=1,this.inputLookup=null,this.inputLookupLength=0,this.outputLookup=null,this.outputLookupLength=0,this._formatInput=null,this._formatOutput=null,this.runInput=function(t){return e.setActivation(),e.runInput(t)},this.calculateDeltas=function(t){return e.setActivation(),e.calculateDeltas(t)},this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0,this.options=d(d({},this.options),n),this.updateTrainingOptions(n);var r=this.options,i=r.inputSize,a=r.hiddenLayers,o=r.outputSize;i&&o&&(this.sizes=[i].concat(null!==a&&void 0!==a?a:[]).concat([o]))}return m(t,[{key:"initialize",value:function(){if(!this.sizes.length)throw new Error("Sizes must be set before initializing");this.outputLayer=this.sizes.length-1,this.biases=new Array(this.outputLayer),this.weights=new Array(this.outputLayer),this.outputs=new Array(this.outputLayer),this.deltas=new Array(this.outputLayer),this.changes=new Array(this.outputLayer),this.errors=new Array(this.outputLayer);for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(this.deltas[t]=W(e),this.errors[t]=W(e),this.outputs[t]=W(e),t>0){this.biases[t]=Vt(e),this.weights[t]=new Array(e),this.changes[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.weights[t][n]=Vt(r),this.changes[t][n]=W(r)}}}this.setActivation(),"adam"===this.trainOpts.praxis&&this._setupAdam()}},{key:"setActivation",value:function(t){var e=null!==t&&void 0!==t?t:this.trainOpts.activation;switch(e){case"sigmoid":this.runInput=this._runInputSigmoid,this.calculateDeltas=this._calculateDeltasSigmoid;break;case"relu":this.runInput=this._runInputRelu,this.calculateDeltas=this._calculateDeltasRelu;break;case"leaky-relu":this.runInput=this._runInputLeakyRelu,this.calculateDeltas=this._calculateDeltasLeakyRelu;break;case"tanh":this.runInput=this._runInputTanh,this.calculateDeltas=this._calculateDeltasTanh;break;default:throw new Error("Unknown activation ".concat(e,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}}},{key:"isRunnable",get:function(){return this.sizes.length>0}},{key:"run",value:function(t){if(!this.isRunnable)throw new Error("network not runnable");var e;e=this.inputLookup?st.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);var n=this.runInput(e).slice(0);return this.outputLookup?st.toObject(this.outputLookup,n):n}},{key:"_runInputSigmoid",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],c=a[s],l=0;l<u.length;l++)c+=u[l]*t[l];o[s]=1/(1+Math.exp(-c))}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"_runInputRelu",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],c=a[s],l=0;l<u.length;l++)c+=u[l]*t[l];o[s]=c<0?0:c}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"_runInputLeakyRelu",value:function(t){this.outputs[0]=t;for(var e=this.trainOpts.leakyReluAlpha,n=null,r=1;r<=this.outputLayer;r++){for(var i=this.sizes[r],a=this.weights[r],o=this.biases[r],s=this.outputs[r],u=0;u<i;u++){for(var c=a[u],l=o[u],h=0;h<c.length;h++)l+=c[h]*t[h];s[u]=Math.max(l,e*l)}n=t=s}if(!n)throw new Error("output was empty");return n}},{key:"_runInputTanh",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],c=a[s],l=0;l<u.length;l++)c+=u[l]*t[l];o[s]=Math.tanh(c)}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"verifyIsInitialized",value:function(t){var e=this;this.sizes.length&&this.outputLayer>0||(this.sizes=[],this.sizes.push(t[0].input.length),this.options.hiddenLayers?this.options.hiddenLayers.forEach((function(t){e.sizes.push(t)})):this.sizes.push(Math.max(3,Math.floor(t[0].input.length/2))),this.sizes.push(t[0].output.length),this.initialize())}},{key:"updateTrainingOptions",value:function(t){var e=d(d({},this.trainOpts),t);this.validateTrainingOptions(e),this.trainOpts=e,this.setLogMethod(this.trainOpts.log)}},{key:"validateTrainingOptions",value:function(t){var e={activation:function(){return["sigmoid","relu","leaky-relu","tanh"].includes(t.activation)},iterations:function(){var e=t.iterations;return"number"===typeof e&&e>0},errorThresh:function(){var e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:function(){var e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:function(){var e=t.logPeriod;return"number"===typeof e&&e>0},leakyReluAlpha:function(){var e=t.leakyReluAlpha;return"number"===typeof e&&e>0&&e<1},learningRate:function(){var e=t.learningRate;return"number"===typeof e&&e>0&&e<1},momentum:function(){var e=t.momentum;return"number"===typeof e&&e>0&&e<1},callback:function(){var e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:function(){var e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:function(){var e=t.timeout;return"number"===typeof e&&e>0},praxis:function(){var e=t.praxis;return!e||"adam"===e},beta1:function(){var e=t.beta1;return e>0&&e<1},beta2:function(){var e=t.beta2;return e>0&&e<1},epsilon:function(){var e=t.epsilon;return e>0&&e<1}};for(var n in e){var r=t;if(!e[n]())throw new Error("[".concat(n,", ").concat(r[n],"] is out of normal training range, your network will probably not train."))}}},{key:"getTrainOptsJSON",value:function(){var t=this.trainOpts,e=t.activation,n=t.iterations,r=t.errorThresh,i=t.log,a=t.logPeriod,o=t.leakyReluAlpha,s=t.learningRate,u=t.momentum,c=t.callbackPeriod,l=t.timeout;return{activation:e,iterations:n,errorThresh:r,log:"function"===typeof i||"boolean"===typeof i&&i,logPeriod:a,leakyReluAlpha:o,learningRate:s,momentum:u,callbackPeriod:c,timeout:l===1/0?"Infinity":l,praxis:t.praxis,beta1:t.beta1,beta2:t.beta2,epsilon:t.epsilon}}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&this.logTrainingStatus}},{key:"logTrainingStatus",value:function(t){console.log("iterations: ".concat(t.iterations,", training error: ").concat(t.error))}},{key:"calculateTrainingError",value:function(t){for(var e=0,n=0;n<t.length;++n)e+=this.trainPattern(t[n],!0);return e/t.length}},{key:"trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this.trainPattern(t[e])}},{key:"trainingTick",value:function(t,e,n){var r=this.trainOpts,i=r.callback,a=r.callbackPeriod,o=r.errorThresh,s=r.iterations,u=r.log,c=r.logPeriod;return!(e.iterations>=s||e.error<=o||Date.now()>=n)&&(e.iterations++,u&&e.iterations%c===0?(e.error=this.calculateTrainingError(t),u(e)):e.iterations%this.errorCheckInterval===0?e.error=this.calculateTrainingError(t):this.trainPatterns(t),i&&e.iterations%a===0&&i({iterations:e.iterations,error:e.error}),!0)}},{key:"prepTraining",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(e);var n=this.formatData(t),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};return this.verifyIsInitialized(n),this.validateData(n),{preparedData:n,status:i,endTime:r}}},{key:"train",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepTraining(t,e),r=n.preparedData,i=n.status,a=n.endTime;this.trainingTick(r,i,a););return i}},{key:"trainAsync",value:function(){var t=i(r().mark((function t(e){var n,i,a,o,s,u=this,c=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},i=this.prepTraining(e,n),a=i.preparedData,o=i.status,s=i.endTime,t.next=4,new Promise((function(t,e){try{var n=new Yn.Thaw(new Array(u.trainOpts.iterations),{delay:!0,each:function(){return u.trainingTick(a,o,s)||n.stop()},done:function(){return t(o)}});n.tick()}catch(r){e(r)}}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?hr(this.errors[this.outputLayer]):null}},{key:"_calculateDeltasSigmoid",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.errors[e],a=this.deltas[e],o=this.weights[e+1],s=0;s<n;s++){var u=r[s],c=0;if(e===this.outputLayer)c=t[s]-u;else for(var l=this.deltas[e+1],h=0;h<l.length;h++)c+=l[h]*o[h][s];i[s]=c,a[s]=c*u*(1-u)}}},{key:"_calculateDeltasRelu",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.weights[e+1],a=this.deltas[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var c=r[u],l=0;if(e===this.outputLayer)l=t[u]-c;else for(var h=0;h<a.length;h++)l+=a[h]*i[h][u];o[u]=l,s[u]=c>0?l:0}}},{key:"_calculateDeltasLeakyRelu",value:function(t){for(var e=this.trainOpts.leakyReluAlpha,n=this.outputLayer;n>=0;n--)for(var r=this.sizes[n],i=this.outputs[n],a=this.deltas[n+1],o=this.weights[n+1],s=this.errors[n],u=this.deltas[n],c=0;c<r;c++){var l=i[c],h=0;if(n===this.outputLayer)h=t[c]-l;else for(var p=0;p<a.length;p++)h+=a[p]*o[p][c];s[c]=h,u[c]=l>0?h:e*h}}},{key:"_calculateDeltasTanh",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.deltas[e+1],a=this.weights[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var c=r[u],l=0;if(e===this.outputLayer)l=t[u]-c;else for(var h=0;h<i.length;h++)l+=i[h]*a[h][u];o[u]=l,s[u]=(1-c*c)*l}}},{key:"adjustWeights",value:function(){for(var t=this.trainOpts,e=t.learningRate,n=t.momentum,r=1;r<=this.outputLayer;r++)for(var i=this.outputs[r-1],a=this.sizes[r],o=this.deltas[r],s=this.changes[r],u=this.weights[r],c=this.biases[r],l=0;l<a;l++){for(var h=o[l],p=0;p<i.length;p++){var d=s[l][p];d=e*h*i[p]+n*d,s[l][p]=d,u[l][p]+=d}c[l]+=e*h}}},{key:"_setupAdam",value:function(){this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0;for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(t>0){this.biasChangesLow[t]=W(e),this.biasChangesHigh[t]=W(e),this.changesLow[t]=new Array(e),this.changesHigh[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.changesLow[t][n]=W(r),this.changesHigh[t][n]=W(r)}}}this.adjustWeights=this._adjustWeightsAdam}},{key:"_adjustWeightsAdam",value:function(){this.iterations++;for(var t=this.iterations,e=this.trainOpts,n=e.beta1,r=e.beta2,i=e.epsilon,a=e.learningRate,o=1;o<=this.outputLayer;o++)for(var s=this.outputs[o-1],u=this.sizes[o],c=this.deltas[o],l=this.changesLow[o],h=this.changesHigh[o],p=this.weights[o],d=this.biases[o],f=this.biasChangesLow[o],m=this.biasChangesHigh[o],g=0;g<u;g++){for(var v=c[g],y=0;y<s.length;y++){var x=v*s[y],b=l[g][y]*n+(1-n)*x,w=h[g][y]*r+(1-r)*x*x,k=b/(1-Math.pow(n,t)),S=w/(1-Math.pow(r,t));l[g][y]=b,h[g][y]=w,p[g][y]+=a*k/(Math.sqrt(S)+i)}var T=c[g],A=f[g]*n+(1-n)*T,E=m[g]*r+(1-r)*T*T,_=f[g]/(1-Math.pow(n,t)),L=m[g]/(1-Math.pow(r,t));f[g]=A,m[g]=E,d[g]+=a*_/(Math.sqrt(L)+i)}}},{key:"validateData",value:function(t){for(var e=this.sizes[0],n=this.sizes[this.sizes.length-1],r=t.length,i=0;i<r;i++){var a=t[i],o=a.input,s=a.output;if(o.length!==e)throw new Error("input at index ".concat(i," length ").concat(o.length," must be ").concat(e));if(t[i].output.length!==n)throw new Error("output at index ".concat(i," length ").concat(s.length," must be ").concat(n))}}},{key:"validateInput",value:function(t){var e=this.sizes[0];if(t.length!==e)throw new Error("input length ".concat(t.length," must match options.inputSize of ").concat(e))}},{key:"formatData",value:function(t){if(!Array.isArray(t[0].input))if(this.inputLookup)this.inputLookupLength=Object.keys(this.inputLookup).length;else{var e=new qn(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!Array.isArray(t[0].output))if(this.outputLookup)this.outputLookupLength=Object.keys(this.outputLookup).length;else{var n=new qn(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}if(this._formatInput||(this._formatInput=pr(t[0].input,this.inputLookup)),this._formatOutput||(this._formatOutput=pr(t[0].output,this.outputLookup)),this._formatInput&&this._formatOutput){for(var r=[],i=0;i<t.length;i++)r.push({input:this._formatInput(t[i].input),output:this._formatOutput(t[i].output)});return r}if(this._formatInput){for(var a=[],o=0;o<t.length;o++)a.push({input:this._formatInput(t[o].input),output:t[o].output});return a}if(this._formatOutput){for(var s=[],u=0;u<t.length;u++)s.push({input:t[u].input,output:this._formatOutput(t[u].output)});return s}return t}},{key:"addFormat",value:function(t){var e,n;Array.isArray(t.input)&&"number"===typeof t.input[0]||(this.inputLookup=st.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length)),Array.isArray(t.output)&&"number"===typeof t.output[0]||(this.outputLookup=st.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length))}},{key:"test",value:function(t){var e=this,n=this.prepTraining(t).preparedData,r=1===n[0].output.length,i=[],a=0;if(r){for(var o=0,s=0,u=0,c=0,l=function(){var t=e.runInput(n[h].input),r=n[h].output,l=t[0]>e.options.binaryThresh?1:0,p=r[0];if(l!==p){var d=n[h];i.push({input:d.input,output:d.output,actual:l,expected:p})}0===l&&0===p?c++:1===l&&1===p?u++:0===l&&1===p?s++:1===l&&0===p&&o++,a+=hr(t.map((function(t,e){return r[e]-t})))},h=0;h<n.length;h++)l();return{error:a/n.length,misclasses:i,total:n.length,trueNeg:c,truePos:u,falseNeg:s,falsePos:o,precision:u>0?u/(u+o):0,recall:u>0?u/(u+s):0,accuracy:(c+u)/n.length}}for(var p=function(){var t=e.runInput(n[d].input),r=n[d].output,o=t.indexOf(lr(t)),s=r.indexOf(lr(r));if(o!==s){var u=n[d];i.push({input:u.input,output:u.output,actual:o,expected:s})}a+=hr(t.map((function(t,e){return r[e]-t})))},d=0;d<n.length;d++)p();return{error:a/n.length,misclasses:i,total:n.length}}},{key:"toJSON",value:function(){var t,e;this.isRunnable||this.initialize();for(var n=this.weights.map((function(t){return t.map((function(t){return Array.from(t)}))})),r=this.biases.map((function(t){return Array.from(t)})),i=[],o=this.sizes.length-1,s=0;s<=o;s++)i.push({weights:null!==(t=n[s])&&void 0!==t?t:[],biases:null!==(e=r[s])&&void 0!==e?e:[]});return{type:"NeuralNetwork",sizes:a(this.sizes),layers:i,inputLookup:this.inputLookup?d({},this.inputLookup):null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?d({},this.outputLookup):null,outputLookupLength:this.outputLookupLength,options:d({},this.options),trainOpts:this.getTrainOptsJSON()}}},{key:"fromJSON",value:function(t){if(this.options=d(d({},dr()),t.options),t.hasOwnProperty("trainOpts")){var e=d(d({},t.trainOpts),{},{timeout:"Infinity"===t.trainOpts.timeout?1/0:t.trainOpts.timeout});this.updateTrainingOptions(e)}this.sizes=t.sizes,this.initialize(),this.inputLookup=t.inputLookup?d({},t.inputLookup):null,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup?d({},t.outputLookup):null,this.outputLookupLength=t.outputLookupLength;for(var n=t.layers,r=this.weights.map((function(t,e){return n[e].weights.map((function(t){return Float32Array.from(t)}))})),i=this.biases.map((function(t,e){return Float32Array.from(n[e].biases)})),a=0;a<=this.outputLayer;a++)this.weights[a]=r[a]||[],this.biases[a]=i[a]||[];return this}},{key:"toFunction",value:function(t){var e=this,n=this.trainOpts,r=n.activation,i=n.leakyReluAlpha,a=!1,o=function t(n,o){if(0===n)return"(input[".concat(o,"]||0)");var s=e.weights[n][o],u=e.biases[n][o];if(!s)throw new Error("weights at layerIndex ".concat(n," & nodeIndex ").concat(o," not found"));if(!u)throw new Error("bias as layerIndex ".concat(n," & nodeIndex ").concat(o," not found"));var c=[];s.forEach((function(e,r){e<0?c.push("".concat(e,"*").concat(t(n-1,r))):c.push("+".concat(e,"*").concat(t(n-1,r)))}));var l="(".concat(u.toString()).concat(c.join(""),")");switch(r){case"sigmoid":return"1/(1+1/Math.exp(".concat(l,"))");case"relu":return a=!0,"((v=".concat(l,")<0?0:v)");case"leaky-relu":return a=!0,"Math.max((v=".concat(l,"),").concat(i,"*v)");case"tanh":return"Math.tanh(".concat(l,")");default:throw new Error("Unknown activation ".concat(r,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}};function s(t){if(t.find((function(t){return t.includes('"')})))throw new Error("key contains '\"', which is not compatible")}var u,c=[],l="";if(this.inputLookup&&(s(Object.keys(this.inputLookup)),l="input = new Float32Array([".concat(Object.keys(this.inputLookup).map((function(t){return'input["'.concat(t,'"]')})).join(","),"]);")),this.sizes.length<1)throw new Error("No layers");for(var h=0;h<this.sizes[this.outputLayer];h++)c.push(o(this.outputLayer,h));if(this.outputLookup){var p=Object.keys(this.outputLookup);s(p);var d=p.map((function(t,e){return'"'.concat(t,'":').concat(c[e])})).join(",");u="{".concat(d,"}")}else u="[".concat(c.join(","),"]");var f="".concat(l).concat(a?"var v;":"","return ").concat(u,";");return new Function("input",t?t(f):f)}}]),t}();function gr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return 1/(1+Math.exp(-r))}function vr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:r}function yr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:.01*r}function xr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return Math.tanh(r)}function br(t,e){return e-t}function wr(t,e){return t*e*(1-e)}function kr(t,e){return e>0?t:0}function Sr(t,e){return e>0?t:.01*t}function Tr(t,e){return(1-e*e)*t}function Ar(t,e,n,r){for(var i=0,a=0;a<e;a++)i+=r[a]*n[a][t];return i}function Er(t,e,n,r,i){return t*r*i+e*n}function _r(t,e){return t+e}function Lr(t,e){return t[this.thread.x]+e[this.thread.x]*this.constants.learningRate}function Ir(t){for(var e=0,n=0;n<this.constants.size;n++)e+=Math.pow(t[n],2);return e/this.constants.size}var Cr=function(t){l(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=e.call(this,r)).texturizeInputData=function(){throw new Error("not yet setup")},t.forwardPropagate=[],t.backwardPropagate=[],t.changesPropagate=[],t.biasesPropagate=[],t.getMSE=function(){throw new Error("not yet setup")},t._addMSE=function(){throw new Error("not yet setup")},t._divideMSESum=function(){throw new Error("not yet setup")},t.outputs=[],t.deltas=[],t.errors=[],t.weights=[],t.changes=[],t.biases=[],t.runInput=function(e){var n;t.outputs[0]=e;for(var r=1;r<=t.outputLayer;r++)N(t.outputs[r]),t.outputs[r]=t.forwardPropagate[r](t.weights[r],t.biases[r],e),n=e=t.outputs[r];return n},t.calculateDeltas=function(e){for(var n=t.outputLayer;n>0;n--){N(t.deltas[n]),N(t.errors[n]);var r=void 0;r=n===t.outputLayer?t.backwardPropagate[n](t.outputs[n],e):t.backwardPropagate[n](t.weights[n+1],t.outputs[n],t.deltas[n+1]),t.deltas[n]=r.result,t.errors[n]=r.error}},t.errorCheckInterval=100,t.gpu=new R.GPU({mode:r.mode}),t}return m(n,[{key:"initialize",value:function(){u(c(n.prototype),"initialize",this).call(this),this.buildRunInput(),this.buildCalculateDeltas(),this.buildGetChanges(),this.buildChangeBiases(),this.buildGetMSE()}},{key:"setActivation",value:function(){}},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?this.getMSE(this.errors[this.outputLayer]):null}},{key:"calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=0;n<t.length;++n){var r=e,i=this.trainPattern(t[n],!0);e=this._addMSE(e,i),N(i),N(r)}var a=this._divideMSESum(t.length,e);return N(e),(a instanceof R.Texture?a.toArray():a)[0]}},{key:"adjustWeights",value:function(){this.getChanges(),this.changeBiases()}},{key:"buildRunInput",value:function(){var t=null;switch(this.trainOpts.activation){case"sigmoid":t=gr;break;case"relu":t=vr;break;case"leaky-relu":t=yr;break;case"tanh":t=xr;break;default:throw new Error("Unknown activation ".concat(this.trainOpts.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}for(var e=1;e<=this.outputLayer;e++)this.forwardPropagate[e]=this.gpu.createKernel(t,{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e-1]},immutable:!0});this.texturizeInputData=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[this.sizes[1]],pipeline:!0,immutable:!0})}},{key:"buildCalculateDeltas",value:function(){var t;switch(this.trainOpts.activation){case"sigmoid":t=wr;break;case"relu":t=kr;break;case"leaky-relu":t=Sr;break;case"tanh":t=Tr;break;default:throw new Error("Unknown activation ".concat(this.trainOpts.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}t=R.alias(R.utils.getMinifySafeName((function(){return t})),t),this.gpu.addFunction(t);for(var e=this.outputLayer;e>0;e--)e===this.outputLayer?this.backwardPropagate[this.outputLayer]=this.gpu.createKernelMap({error:br},(function(e,n){var r=e[this.thread.x],i=n[this.thread.x];return t(br(r,i),r)}),{output:[this.sizes[this.outputLayer]],pipeline:!0,immutable:!0}):this.backwardPropagate[e]=this.gpu.createKernelMap({error:Ar},(function(e,n,r){var i=n[this.thread.x];return t(Ar(this.thread.x,this.constants.size,e,r),i)}),{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e+1]},immutable:!0})}},{key:"buildGetChanges",value:function(){for(var t=1;t<=this.outputLayer;t++)this.changesPropagate[t]=this.gpu.createKernelMap({weights:_r,changes:Er},(function(t,e,n,r){return _r(Er(this.constants.learningRate,this.constants.momentum,r[this.thread.y][this.thread.x],e[this.thread.y],t[this.thread.x]),n[this.thread.y][this.thread.x])}),{output:[this.sizes[t-1],this.sizes[t]],pipeline:!0,constants:{size:this.sizes[t-1],learningRate:this.trainOpts.learningRate,momentum:this.trainOpts.momentum},immutable:!0})}},{key:"getChanges",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.weights[t],n=this.changes[t],r=this.changesPropagate[t](this.outputs[t-1],this.deltas[t],e,n);N(e),N(n),this.weights[t]=r.weights,this.changes[t]=r.changes,N(r.result)}}},{key:"buildChangeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++)this.biasesPropagate[t]=this.gpu.createKernel(Lr,{output:[this.sizes[t]],pipeline:!0,constants:{learningRate:this.trainOpts.learningRate},immutable:!0})}},{key:"changeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.biases[t];this.biases[t]=this.biasesPropagate[t](e,this.deltas[t]),N(e)}}},{key:"buildGetMSE",value:function(){this.getMSE=this.gpu.createKernel(Ir,{output:[1],constants:{size:this.sizes[this.outputLayer]},pipeline:!0,immutable:!0}),this._addMSE=this.gpu.createKernel((function(t,e){return t[0]+e[0]}),{output:[1],pipeline:!0,immutable:!0}),this._divideMSESum=this.gpu.createKernel((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1]})}},{key:"run",value:function(t){if(!this.isRunnable)throw new Error("network not runnable");var e;e=this.inputLookup?st.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);var n=this.runInput(e),r=n instanceof R.Texture?n.toArray():n;return this.outputLookup?st.toObject(this.outputLookup,r):r}},{key:"prepTraining",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(n);var r=this.formatData(t),i=Date.now()+this.trainOpts.timeout,a={error:1,iterations:0};this.verifyIsInitialized(r);var o=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[r[0].output.length],pipeline:!0,immutable:!0});return{preparedData:r.map((function(t){return{input:e.texturizeInputData(t.input),output:o(t.output)}})),status:a,endTime:i}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}},{key:"toJSON",value:function(){var t,e;null===this.sizes&&this.initialize();for(var n=this.weights.map((function(t){return(t instanceof R.Texture?t.toArray():t).map((function(t){return Array.from(t)}))})),r=this.biases.map((function(t){return Array.from(t instanceof R.Texture?t.toArray():t)})),i=[],o=0;o<=this.outputLayer;o++)i.push({weights:null!==(t=n[o])&&void 0!==t?t:[],biases:null!==(e=r[o])&&void 0!==e?e:[]});return{type:"NeuralNetworkGPU",sizes:a(this.sizes),layers:i,inputLookup:this.inputLookup?d({},this.inputLookup):null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?d({},this.outputLookup):null,outputLookupLength:this.outputLookupLength,options:d({},this.options),trainOpts:this.getTrainOptsJSON()}}}]),n}(mr),Or=function(t){l(n,t);var e=h(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).settings={},t.layer=null,t}return m(n,[{key:"setLayer",value:function(t){this.layer=t}},{key:"width",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.width},set:function(t){throw new Error("".concat(this.constructor.name,"-width is not yet implemented"))}},{key:"height",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.height},set:function(t){throw new Error("".concat(this.constructor.name,"-height is not yet implemented"))}},{key:"deltas",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.deltas},set:function(t){if(!this.layer)throw new Error("layer not set");N(this.layer.deltas),this.layer.deltas=t}},{key:"weights",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.weights},set:function(t){if(!this.layer)throw new Error("layer not set");N(this.layer.weights),this.layer.weights=t}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){throw new Error("no longer using")}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(J),Rr=function(t){l(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=e.call(this,r)).trainOpts={},t._outputConnection=null,t._layerSets=[],t._hiddenLayerOutputIndices=[],t._model=null,t}return m(n,[{key:"_connectLayers",value:function(){if(!this.options.inputLayer)throw new Error("inputLayer not found");if(!this.options.outputLayer)throw new Error("outputLayer not found");var t=this.options.inputLayer(),e=this._connectHiddenLayers(t);return{inputLayer:t,hiddenLayers:e,outputLayer:this.options.outputLayer(e[e.length-1],-1)}}},{key:"_connectLayersDeep",value:function(){var t=[],e=this._layerSets[this._layerSets.length-1],n=0;function r(n){var r=e.indexOf(n);if(r<0)throw new Error("unable to find layer");return t[r]}function i(t){return d(d({},t.settings),{},{weights:null,deltas:null,praxis:null})}for(var a=0;a<e.length;a++){var o=e[a],s=void 0;if(o instanceof q)s=new o.constructor(r(o.inputLayer),i(o));else if(o instanceof at)s=new o.constructor(i(o));else if(o instanceof Y)s=new o.constructor(i(o.inputLayer),r(o.inputLayer));else if(o instanceof J){var u=e[this._hiddenLayerOutputIndices[n++]];if(o instanceof Or)throw new Error("unfinished");if(o instanceof mn)s=new mn(u);else{if(!(o instanceof gn))throw new Error("hidden layer ".concat(o.constructor.name," extends unknown hidden layer"));s=new mn(u)}}else if(o instanceof it||o instanceof ot)s=o;else if(o instanceof $)s=new o.constructor(r(o.inputLayer),i(o.inputLayer));else if(o instanceof Q)s=new o.constructor(r(o.inputLayer1),r(o.inputLayer2),i(o));else{if(!(o instanceof nt))throw new Error("hidden layer ".concat(o.constructor.name," extends unknown hidden layer"));s=new o.constructor(i(o),r(o.inputLayer))}t.push(s)}return t}},{key:"_connectHiddenLayers",value:function(t){var e=[];if(!this.options.hiddenLayers)throw new Error("hiddenLayers not defined");for(var n=0;n<this.options.hiddenLayers.length;n++){var r=new gn,i=this.options.hiddenLayers[n](t,r,n);t=i,e.push(i)}return e}},{key:"initialize",value:function(){var t;if(this._outputConnection=new Or,this.options.layers)t=this._connectOptionsLayers();else{var e=this._connectLayers(),n=e.inputLayer,r=e.hiddenLayers,i=e.outputLayer;t=Lt([n].concat(a(r),[i])),this._hiddenLayerOutputIndices=r.map((function(e){return t.indexOf(e)})),this._inputLayer=n,this._hiddenLayers=r,this._outputLayer=i}this.layers=t,this._layerSets=[t],this._model=t.filter((function(t){return t instanceof ot||t instanceof it})),this.initializeLayers(t)}},{key:"initializeDeep",value:function(){for(var t=this._connectLayersDeep(),e=0;e<t.length;e++){var n=t[e];n.setupKernels(!0),n.reuseKernels(this._layerSets[0][e])}this._layerSets.push(t)}},{key:"run",value:function(t){for(;this._layerSets.length<=t.length;)this.initializeDeep();var e=this.runInputs(t);return e instanceof R.Texture?e.toArray():e}},{key:"runInput",value:function(t){throw new Error("use .runInputs()")}},{key:"runInputs",value:function(t){for(;this._layerSets.length<t.length;)this.initializeDeep();for(var e=t.length-1,n=0;n<=e;n++){var r=this._layerSets[n];r[0].predict(t[n]);for(var i=1;i<r.length;i++)r[i].predict()}var a=this._layerSets[e],o=a[a.length-1].weights;return this.end(),o}},{key:"train",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._prepTraining(t,n),i=r.preparedData,a=r.status,o=r.endTime,s=!0,u=function(){return e._calculateTrainingError(i)},c=function(){return e._trainPatterns(i)};s;)s=this._trainingTick(a,o,u,c);return a}},{key:"end",value:function(){var t=this._layerSets.length-1,e=this._layerSets[t];e[0].predict([new Float32Array([0])]);for(var n=1;n<e.length;n++)e[n].predict()}},{key:"transferData",value:function(t){return t}},{key:"_prepTraining",value:function(t,e){this._updateTrainingOptions(e);var n=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,r={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(t),status:r,endTime:n}}},{key:"_calculateTrainingError",value:function(t){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");for(var e=new Float32Array(1),n=0;n<t.length;++n){var r=e,i=this._trainPattern(t[n],!0);e=this.meanSquaredError.add(e,i),N(i),N(r)}var a=this.meanSquaredError.divide(t.length,e);return N(e),a instanceof R.Texture?a.toArray()[0]:a[0]}},{key:"formatData",value:function(t){return t}},{key:"_calculateDeltas",value:function(t){for(var e=this._layerSets[this._layerSets.length-1],n=e.length-2;n>=0;n--)e[n].compare();for(var r=t.length-2;r>=0;r--){var i=this._layerSets[r];i[i.length-1].compare(t[r+1]);for(var a=i.length-2;a>=0;a--)i[a].compare()}}},{key:"adjustWeights",value:function(){for(var t,e=this._model,n=0;n<e.length;n++)e[n].learn(null!==(t=this.options.learningRate)&&void 0!==t?t:0)}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e],!1)}},{key:"_trainPattern",value:function(t,e){if(this.runInputs(t),this._calculateDeltas(t),this.adjustWeights(),e){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");for(var n=new Float32Array(1),r=0,i=t.length-2;r<=i;r++){var a=this._layerSets[r],o=a[a.length-1],s=n;n=this.meanSquaredError.addAbsolute(s,o.errors),N(s)}return K(this.meanSquaredError.divide(t.length,n))}return null}}]),n}(Qn),Dr=function(){function t(e,n){f(this,t),this.rows=0,this.columns=0,e&&(this.rows=e),n&&(this.columns=n),this.weights=W(this.rows*this.columns),this.deltas=W(this.rows*this.columns)}return m(t,[{key:"getWeight",value:function(t,e){var n=this.columns*t+e;if(n<0||n>=this.weights.length)throw new Error("get accessor is skewed");return this.weights[n]}},{key:"setWeight",value:function(t,e,n){var r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.weights[r]=n,this}},{key:"getDelta",value:function(t,e){var n=this.columns*t+e;if(n<0||n>=this.deltas.length)throw new Error("get accessor is skewed");return this.deltas[n]}},{key:"setDelta",value:function(t,e,n){var r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.deltas[r]=n,this}},{key:"toJSON",value:function(){return{rows:this.rows,columns:this.columns,weights:Array.from(this.weights.slice(0))}}},{key:"deltasToArray",value:function(){return this.toArray("deltas")}},{key:"weightsToArray",value:function(){return this.toArray("weights")}},{key:"toArray",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"weights",n=new Array(this.rows);return this.iterate({row:function(e){n[e]=new Array(t.columns)},column:function(r,i){"weights"===e?n[r][i]=t.getWeight(r,i):"deltas"===e&&(n[r][i]=t.getDelta(r,i))}}),n}},{key:"fromArray",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weights";if(t.length!==this.rows)throw new Error("rows do not match");if(t[0].length!==this.columns)throw new Error("columns do not match");return this.iterate({column:function(r,i){var a=t[r][i];if("number"!==typeof a)throw new Error("value not number");"weights"===n?e.setWeight(r,i,a):"deltas"===n&&e.setDelta(r,i,a)}}),this}},{key:"iterate",value:function(t){for(var e=this.rows,n=this.columns,r=0;r<e;r++){t.row&&t.row(r);for(var i=0;i<n;i++)t.column&&t.column(r,i)}return this}}],[{key:"fromJSON",value:function(e){for(var n=new t(e.rows,e.columns),r=0,i=e.rows*e.columns;r<i;r++)n.weights[r]=e.weights[r];return n}},{key:"fromArray",value:function(e){var n=new t(e.length,e[0].length);return n.fromArray(e),n}}]),t}(),Mr=function(t){l(n,t);var e=h(n);function n(t,r,i){var a;f(this,n),(a=e.call(this,t,r)).std=i;for(var o=0,s=a.weights.length;o<s;o++)a.weights[o]=Mt(-i,i);return a}return m(n)}(Dr),Fr=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this.values=e,this.indexTable={},this.characterTable={},this.characters=[],this.specialIndexes=[],this.isSetup=!1,void 0!==e&&this.setup(e,n)}return m(t,[{key:"setup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isSetup)throw new Error("DataFormatter is already setup");this.values=t,this.buildCharactersFromIterable(t),this.buildTables(e),t[0].input&&this.addInputOutput(),this.addUnrecognized(),this.isSetup=!0}},{key:"buildCharactersFromIterable",value:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];if(i.hasOwnProperty("length"))for(var a=i,o=0,s=a.length;o<s;o++){var u=a[o];e.hasOwnProperty(u)||(e[u]=!0,this.characters.push(u))}else if("number"===typeof i){if(e.hasOwnProperty(i))continue;e[i]=!0,this.characters.push(i)}else if("boolean"===typeof i){var c=i.toString();if(e.hasOwnProperty(c))continue;e[c]=!0,this.characters.push(c)}else if(Array.isArray(i)&&"string"===typeof i[0])for(var l=0;l<i.length;l++){var h=i[l];e.hasOwnProperty(h)||(e[h]=!0,this.characters.push(h))}else if(!Array.isArray(i)||"number"!==typeof i[0]&&"boolean"!==typeof i[0]){if(!i.hasOwnProperty("input")||!i.hasOwnProperty("output"))throw new Error("Unhandled value");var p=i.input,d=i.output;Array.isArray(p)?this.addCharacters(p,e):this.addCharacters(p.toString(),e),Array.isArray(d)?this.addCharacters(d,e):this.addCharacters(d.toString(),e)}else for(var f=0;f<i.length;f++){var m=i[f].toString();e.hasOwnProperty(n)||(e[m]=!0,this.characters.push(m))}}}},{key:"addCharacters",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n].toString();e.hasOwnProperty(r)||(e[r]=!0,this.characters.push(r))}}},{key:"buildTables",value:function(t){for(var e=this.characters.length,n=0;n<e;n++){var r=this.characters[n];n>=t&&(this.indexTable[r]=n,this.characterTable[n]=r)}}},{key:"toIndexes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable;switch(typeof t){case"number":case"boolean":t=t.toString()}for(var i=0,a=t.length;i<a;i++){var o=t[i].toString(),s=r[o];if(void 0===s){if(!r.unrecognized)throw new Error('unrecognized character "'.concat(o,'"'));s=r.unrecognized}s<e||n.push(s)}return n}},{key:"toIndexesInputOutput",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.toIndexesValue(t,n,!0);return"undefined"===typeof e?r:r.concat(this.toIndexesValue(e,n,!1))}},{key:"toIndexesValue",value:function(t,e,n){if("string"===typeof t)t=t.split("");else if("number"===typeof t||"boolean"===typeof t)t=t.toString().split("");else{if(!Array.isArray(t)||"number"!==typeof t[0]&&"boolean"!==typeof t[0]&&"string"!==typeof t[0])throw new Error("unrecognized value");t=t.map((function(t){return t.toString()}))}return n&&(t=t.concat(["stop-input","start-output"])),this.toIndexes(t,e)}},{key:"toCharacters",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable,i=this.characterTable,a=0,o=t.length;a<o;a++){var s=t[a];if(!(s<e)){var u=i[s];if(void 0===u){if(!r.unrecognized)throw new Error('unrecognized index "'.concat(s,'"'));u=i[r.unrecognized]}else null!==u&&n.push(u.toString())}}return n}},{key:"toString",value:function(t,e){return this.toCharacters(t,e).join("")}},{key:"addInputOutput",value:function(){this.addSpecial("stop-input"),this.addSpecial("start-output")}},{key:"addUnrecognized",value:function(){this.addSpecial("unrecognized")}},{key:"toJSON",value:function(){return{indexTable:this.indexTable,characterTable:this.characterTable,values:this.values,characters:this.characters,specialIndexes:this.specialIndexes}}},{key:"addSpecial",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.indexTable[t]=this.characters.length;this.characterTable[n]=e,this.specialIndexes.push(this.characters.length),this.characters.push(t)}},{key:"toFunctionString",value:function(){return"\nvar characterTable = ".concat(JSON.stringify(this.characterTable),";\nvar indexTable = ").concat(JSON.stringify(this.indexTable),";\nvar characters = ").concat(JSON.stringify(this.characters),";\nvar dataFormatter = {\n  toIndexes: function ").concat(this.toIndexes.toString(),",\n  toIndexesInputOutput: function ").concat(this.toIndexesInputOutput.toString(),",\n  toCharacters: function ").concat(this.toCharacters.toString(),",\n  toIndexesValue: function ").concat(this.toIndexesValue.toString(),",\n};")}},{key:"formatDataIn",value:function(t,e){var n;return void 0===t?[]:Array.isArray(t)&&"number"===typeof t[0]?t:(null===(n=this.indexTable)||void 0===n?void 0:n.hasOwnProperty("stop-input"))?this.toIndexesInputOutput(t,e):this.toIndexes(t)}},{key:"formatDataOut",value:function(t,e){return this.toCharacters(e).join("")}},{key:"format",value:function(t){if("number"===typeof t[0]&&!Array.isArray(t[0])&&(!t[0].hasOwnProperty("input")||!t[0].hasOwnProperty("output")))return t;var e=[];if("string"===typeof t[0]||"number"===typeof t[0]||Array.isArray(t[0]))if(this.isSetup)for(var n=0,r=t.length;n<r;n++)e.push(this.formatDataIn(t[n]));else{this.setup(t);for(var i=0;i<t.length;i++)e.push(this.formatDataIn(zr(t[i])))}else{if(!t[0].input||!t[0].output)throw new Error("unrecognized data");this.isSetup||this.setup(t);for(var a=0,o=t.length;a<o;a++)e.push(this.formatDataIn(zr(t[a].input),zr(t[a].output)))}return e}}],[{key:"fromAllPrintable",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=32;r<=126;r++)n.push(String.fromCharCode(r));return new t(n,e)}},{key:"fromAllPrintableInputOutput",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=t.fromAllPrintable(e,n);return r.addInputOutput(),r.addUnrecognized(),r}},{key:"fromStringInputOutput",value:function(e,n){var r=new t(Array.from(new Set(e)).join("").split(""),n);return r.addInputOutput(),r.addUnrecognized(),r.isSetup=!0,r}},{key:"fromArrayInputOutput",value:function(e,n){for(var r=[],i=0;i<e.length;i++){var a=e[i];r.push(zr(a.input),zr(a.output))}var o=Array.isArray(r)?r.flat():r,s=new t(Array.from(new Set(o)),n);return s.addInputOutput(),s.addUnrecognized(),s.isSetup=!0,s}},{key:"fromString",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(Array.from(new Set(e)).join("").split(""),n)}},{key:"fromJSON",value:function(e){var n=new t;return n.indexTable=e.indexTable,n.characterTable=e.characterTable,n.values=e.values,n.characters=e.characters,n.specialIndexes=e.specialIndexes,n.isSetup=!0,n}}]),t}();function zr(t){if("string"===typeof t)return t;if("number"===typeof t)return t.toString();if("boolean"===typeof t)return t.toString();if(Array.isArray(t)&&"string"===typeof t[0])return t;if("boolean"===typeof t[0])return t.map((function(t){return t.toString()}));if("number"===typeof t[0])return t.map((function(t){return t.toString()}));throw new Error("unrecognized value, expected string[], string, number[], number, boolean[], or boolean")}function Pr(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0)}function Nr(t,e,n){for(var r=0;r<e.weights.length;r++)t.weights[r]=e.weights[r]+n.weights[r],t.deltas[r]=0}function Vr(t,e,n){for(var r=0;r<t.deltas.length;r++)e.deltas[r]=t.deltas[r],n.deltas[r]=t.deltas[r]}function Kr(t){for(var e=0;e<t.weights.length;e++)t.weights[e]=1,t.deltas[e]=0}function Zr(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0);for(var n=0;n<e.weights.length;n++)t.weights[n]=-e.weights[n],t.deltas[n]=0}function jr(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,c=0;c<a;c++){for(var l=0,h=0;h<i;h++){var p=s+h,d=a*h+c;l+=e.weights[p]*n.weights[d],e.deltas[p]=0,n.deltas[d]=0}t.weights[u+c]=l}}function Gr(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,c=0;c<a;c++)for(var l=0;l<i;l++){var h=s+l,p=a*l+c,d=t.deltas[u+c];e.deltas[h]+=n.weights[p]*d,n.deltas[p]+=e.weights[h]*d}}function Br(t,e,n){for(var r=e.weights,i=0;i<r.length;i++)t.weights[i]=e.weights[i]*n.weights[i],t.deltas[i]=0}function Ur(t,e,n){for(var r=0;r<e.weights.length;r++)e.deltas[r]=n.weights[r]*t.deltas[r],n.deltas[r]=e.weights[r]*t.deltas[r]}function Wr(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.max(0,e.weights[n]),t.deltas[n]=0}function Hr(t,e){for(var n=0;n<t.deltas.length;n++)e.deltas[n]=e.weights[n]>0?t.deltas[n]:0}function Xr(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)t.weights[a]=e.weights[i+a],t.deltas[a]=0}function qr(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)e.deltas[i+a]=t.deltas[a]}function Yr(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=1/(1+Math.exp(-e.weights[n])),t.deltas[n]=0}function Jr(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=r*(1-r)*t.deltas[n]}}function $r(t){for(var e=new Dr(t.rows,t.columns),n=-999999,r=0;r<t.weights.length;r++)t.weights[r]>n&&(n=t.weights[r]);for(var i=0,a=0;a<t.weights.length;a++)e.weights[a]=Math.exp(t.weights[a]-n),i+=e.weights[a];for(var o=0;o<t.weights.length;o++)e.weights[o]/=i;return e}function Qr(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.tanh(e.weights[n]),t.deltas[n]=0}function ti(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=(1-r*r)*t.deltas[n]}}var ei=function(){function t(){f(this,t),this.states=[],this.inputRow=0}return m(t,[{key:"add",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new Dr(t.rows,t.columns);return this.states.push({name:"add",product:n,left:t,right:e,forwardFn:Nr,backpropagationFn:Vr}),n}},{key:"allOnes",value:function(t,e){var n=new Dr(t,e);return this.states.push({name:"allOnes",product:n,left:n,forwardFn:Kr,backpropagationFn:function(){}}),n}},{key:"cloneNegative",value:function(t){var e=new Dr(t.rows,t.columns);return this.states.push({name:"cloneNegative",product:e,left:t,forwardFn:Zr,backpropagationFn:function(){}}),e}},{key:"subtract",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");return this.add(this.add(this.allOnes(t.rows,t.columns),this.cloneNegative(t)),e)}},{key:"multiply",value:function(t,e){if(t.columns!==e.rows)throw new Error("misaligned matrices");var n=new Dr(t.rows,e.columns);return this.states.push({name:"multiply",product:n,left:t,right:e,forwardFn:jr,backpropagationFn:Gr}),n}},{key:"multiplyElement",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new Dr(t.rows,t.columns);return this.states.push({name:"multiplyElement",product:n,left:t,right:e,forwardFn:Br,backpropagationFn:Ur}),n}},{key:"relu",value:function(t){var e=new Dr(t.rows,t.columns);return this.states.push({name:"relu",product:e,left:t,forwardFn:Wr,backpropagationFn:Hr}),e}},{key:"input",value:function(t){var e=this;return this.states.push({name:"input",product:t,forwardFn:function(n){if(e.inputValue){if(e.inputValue.length!==n.weights.length)throw new Error("this.inputValue is of wrong dimensions");n.weights=t.weights=e.inputValue}},backpropagationFn:function(){}}),t}},{key:"inputMatrixToRow",value:function(t){var e=this,n=new Dr(t.columns,1);return this.states.push({name:"inputMatrixToRow",product:n,left:t,get right(){return e.inputRow},forwardFn:Xr,backpropagationFn:qr}),n}},{key:"sigmoid",value:function(t){var e=new Dr(t.rows,t.columns);return this.states.push({name:"sigmoid",product:e,left:t,forwardFn:Yr,backpropagationFn:Jr}),e}},{key:"tanh",value:function(t){var e=new Dr(t.rows,t.columns);return this.states.push({name:"tanh",product:e,left:t,forwardFn:Qr,backpropagationFn:ti}),e}},{key:"observe",value:function(t){return this.states.push({name:"observe",product:new Dr,forwardFn:function(){},backpropagationFn:function(){}}),t}},{key:"runIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;for(var e=this.states[0],n=0,r=this.states.length;n<r;n++)(e=this.states[n]).hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}},{key:"runInput",value:function(t){this.inputValue=t;for(var e=this.states[0],n=0,r=this.states.length;n<r;n++)(e=this.states[n]).hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}},{key:"backpropagate",value:function(){for(var t=this.states.length,e=this.states[0];t-- >0;)(e=this.states[t]).hasOwnProperty("backpropagationFn")&&e.backpropagationFn(e.product,e.left,e.right);return e.product}},{key:"backpropagateIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;for(var e=this.states.length,n=this.states[0];e-- >0;)(n=this.states[e]).hasOwnProperty("backpropagationFn")&&n.backpropagationFn(n.product,n.left,n.right);return n.product}},{key:"predictTarget",value:function(t,e){for(var n=0,r=this.runInput(t),i=0;i<r.weights.length;i++){var a=r.weights[i]-e[i];n+=Math.abs(a),r.deltas[i]=a}return n}},{key:"predictTargetIndex",value:function(t,e){var n=this.runIndex(t),r=n,i=$r(n);return r.deltas=i.weights.slice(0),r.deltas[e]-=1,-Math.log2(i.weights[e])}}]),t}();function ni(t){for(var e=t.weights,n=e[0],r=0,i=1;i<e.length;i++){var a=e[i];a<n||(r=i,n=a)}return r}function ri(t){for(var e=Mt(0,1),n=t.weights,r=0,i=0;;){if((r+=n[i])>e)return i;i++}}var ii={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.01,callbackPeriod:10,timeout:1/0},ai=function(){return{inputSize:20,inputRange:20,hiddenLayers:[20,20],outputSize:20,decayRate:.999,smoothEps:1e-8,regc:1e-6,clipval:5,maxPredictionLength:100,dataFormatter:new Fr}},oi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.options=d({},ai()),this.trainOpts=d({},ii),this.stepCache={},this.runs=0,this.ratioClipped=0,this.model=Object.seal({isInitialized:!1,input:new Dr(0,0),hiddenLayers:[],output:new Dr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Mr(0,0,.08)}),this.initialLayerInputs=[],this.options=d(d({},this.options),e),this.updateTrainingOptions(d({},ii)),e.json&&this.fromJSON(e.json)}return m(t,[{key:"initialize",value:function(){var t=this.options.dataFormatter;(null===t||void 0===t?void 0:t.characters.length)&&(this.options.inputSize=this.options.inputRange=this.options.outputSize=t.characters.length),this.model=this.mapModel()}},{key:"createHiddenLayers",value:function(){var t=this.options,e=t.hiddenLayers,n=t.inputSize,r=[];r.push(this.getHiddenLayer(e[0],n));for(var i=e[0],a=1;a<e.length;a++){var o=e[a];r.push(this.getHiddenLayer(o,i)),i=o}return r}},{key:"getHiddenLayer",value:function(t,e){return{weight:new Mr(t,e,.08),transition:new Mr(t,t,.08),bias:new Dr(t,1)}}},{key:"getEquation",value:function(t,e,n,r){if(!r.weight||!r.transition||!r.bias)throw new Error("hiddenLayer does not have expected properties");var i=t.relu.bind(t),a=t.add.bind(t),o=t.multiply.bind(t);return i(a(a(o(r.weight,e),o(r.transition,n)),r.bias))}},{key:"createInputMatrix",value:function(){var t=this.options,e=t.inputRange,n=t.inputSize;if(e<1)throw new Error("this.options.inputRange not an expected number");if(n<1)throw new Error("this.options.inputSize not an expected number");return new Mr(e+1,n,.08)}},{key:"createOutputMatrices",value:function(){var t=this.options,e=t.outputSize,n=si(t.hiddenLayers);return{outputConnector:new Mr(e+1,n,.08),output:new Dr(e+1,1)}}},{key:"bindEquation",value:function(){var t=this.model,e=this.options.hiddenLayers,n=new ei,r=[],i=t.equationConnections.length>0?si(t.equationConnections):this.initialLayerInputs,a=this.getEquation(n,n.inputMatrixToRow(t.input),i[0],t.hiddenLayers[0]);r.push(a);for(var o=1,s=e.length;o<s;o++){if(!i[o])throw new Error("Cannot find equation at index ".concat(o));a=this.getEquation(n,a,i[o],t.hiddenLayers[o]),r.push(a)}t.equationConnections.push(r),n.add(n.multiply(t.outputConnector,a),t.output),t.equations.push(n)}},{key:"mapModel",value:function(){var t=[];this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Dr(t,1)}));var e=this.createInputMatrix();t.push(e);var n=this.createHiddenLayers();if(!n.length)throw new Error("net.hiddenLayers not set");for(var r=0,i=n.length;r<i;r++){var a=n[r];for(var o in a)a.hasOwnProperty(o)&&t.push(a[o])}var s=this.createOutputMatrices(),u=s.output,c=s.outputConnector;return t.push(c),t.push(u),Object.seal({isInitialized:!0,input:e,hiddenLayers:n,output:u,equations:[],allMatrices:t,equationConnections:[],outputConnector:c})}},{key:"trainInput",value:function(t){this.runs++;for(var e,n=this.model,r=t.length,i=0;n.equations.length<=t.length+1;)this.bindEquation();for(var a=-1,o=t.length;a<o;a++){var s=a+1;e=n.equations[s];var u=-1===a?0:t[a]+1,c=a===r-1?0:t[a+1]+1;i+=e.predictTargetIndex(u,c)}return Math.pow(2,i/(r-1))/100}},{key:"backpropagate",value:function(t){for(var e=t.length,n=this.model.equations;e>0;)n[e].backpropagateIndex(t[e-1]+1),e--;n[0].backpropagateIndex(0)}},{key:"adjustWeights",value:function(){for(var t=this.options,e=t.regc,n=t.clipval,r=t.decayRate,i=t.smoothEps,a=this.trainOpts,o=this.model,s=this.stepCache,u=a.learningRate,c=o.allMatrices,l=0,h=0,p=0;p<c.length;p++){var d=c[p],f=d.weights,m=d.deltas;p in s||(s[p]=W(d.rows*d.columns));for(var g=s[p],v=0;v<f.length;v++){var y=m[v],x=f[v];g[v]=g[v]*r+(1-r)*y*y,y>n?(y=n,l++):y<-n&&(y=-n,l++),h++,f[v]=x+-u*y/Math.sqrt(g[v]+i)-e*x}}this.ratioClipped=l/h}},{key:"isRunnable",get:function(){return!this.model||0!==this.model.equations.length||(console.error("No equations bound, did you run train()?"),!1)}},{key:"checkRunnable",value:function(){if(!this.isRunnable)throw new Error("Network not runnable")}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.options.maxPredictionLength+(null!==t?t.length:0)+(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0);this.checkRunnable();for(var i=this.options.dataFormatter&&t.length>0?this.options.dataFormatter.formatDataIn(t):t,a=this.model,o=[],s=0;;){for(var u=0===s?0:s<i.length?i[s-1]+1:o[s-1];a.equations.length<=s;)this.bindEquation();var c=a.equations[s].runIndex(u),l=new Dr(a.output.rows,a.output.columns);if(Pr(l,c),1!==n&&e)for(var h=0,p=l.weights.length;h<p;h++)l.weights[h]/=n;var d=$r(l),f=e?ri(d):ni(d);if(s++,0===f)break;if(s>=r)break;o.push(f)}return this.options.dataFormatter.formatDataOut(i,o.slice(i.length).map((function(t){return t-1})))}},{key:"verifyIsInitialized",value:function(){this.model.isInitialized||this.initialize()}},{key:"updateTrainingOptions",value:function(t){var e;this.trainOpts=d(d({},ii),t),this.validateTrainingOptions(this.trainOpts),this.setLogMethod(null!==(e=t.log)&&void 0!==e?e:this.trainOpts.log)}},{key:"validateTrainingOptions",value:function(t){var e={iterations:function(){var e=t.iterations;return"number"===typeof e&&e>0},errorThresh:function(){var e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:function(){var e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:function(){var e=t.logPeriod;return"number"===typeof e&&e>0},learningRate:function(){var e=t.learningRate;return"number"===typeof e&&e>0&&e<1},callback:function(){var e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:function(){var e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:function(){var e=t.timeout;return"number"===typeof e&&e>0}};for(var n in e){var r=t;if(!e[n]())throw new Error("[".concat(n,", ").concat(r[n],"] is out of normal training range, your network will probably not train."))}}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"prepTraining",value:function(t,e){var n;this.updateTrainingOptions(e);var r=this.options.dataFormatter.format(t),i=Date.now()+(null!==(n=this.trainOpts.timeout)&&void 0!==n?n:0),a={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:r,status:a,endTime:i}}},{key:"train",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=n=d(d({},ii),n);var r,i,a=this.trainOpts,o=a.iterations,s=a.errorThresh,u=a.logPeriod,c=a.callback,l=a.callbackPeriod,h=!0===n.log?console.log:n.log,p=1/0;if(null===(e=this.options)||void 0===e?void 0:e.dataFormatter)i=this.options.dataFormatter.format(t);else{if(!Array.isArray(t)||!Array.isArray(t[0])||"number"!==typeof t[0][0])throw new Error("training not in expected format of number[][]");i=t}for(this.verifyIsInitialized(),r=0;r<o&&p>s;r++){for(var f=0,m=0;m<i.length;m++)f+=this.trainPattern(i[m],!0);if(p=f/t.length,isNaN(p))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");h&&r%u===0&&h("iterations: ".concat(r,", training error: ").concat(p)),c&&r%l===0&&c({error:p,iterations:r})}return{error:p,iterations:r}}},{key:"addFormat",value:function(t){}},{key:"formatData",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.options.dataFormatter.formatDataIn(t[n]));return e}},{key:"toJSON",value:function(){this.model.isInitialized||this.initialize();var t=this.model,e=this.options;return{type:this.constructor.name,options:d(d({},e),{},{dataFormatter:e.dataFormatter.toJSON()}),trainOpts:d(d({},this.trainOpts),{},{timeout:this.trainOpts.timeout===1/0?"Infinity":this.trainOpts.timeout}),input:t.input.toJSON(),hiddenLayers:t.hiddenLayers.map((function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON()}}},{key:"fromJSON",value:function(t){var e=t.options,n=[],r=Dr.fromJSON(t.input);n.push(r);var i=[];t.hiddenLayers.forEach((function(t){var e={};for(var r in t)e[r]=Dr.fromJSON(t[r]),n.push(e[r]);i.push(e)}));var a=Dr.fromJSON(t.outputConnector);n.push(a);var o=Dr.fromJSON(t.output);return n.push(o),e.dataFormatter?this.options=d(d(d({},ai()),e),{},{dataFormatter:Fr.fromJSON(e.dataFormatter)}):this.options=d(d(d({},ai()),e),{},{dataFormatter:new Fr}),this.model=Object.seal({isInitialized:!0,input:r,hiddenLayers:i,output:o,allMatrices:n,outputConnector:a,equations:[],equationConnections:[]}),this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Dr(t,1)})),this.bindEquation(),this}},{key:"toFunction",value:function(t){var e=this.model,n=this.model.equations,r=n[1].states,i=JSON.stringify(this.toJSON());function a(t){for(var r=e.equationConnections[0],i=n[0].states,a=0,o=i.length;a<o;a++)if(i[a].product===t)return a;return r.indexOf(t)}function o(t,e){for(var n=0,i=r.length;n<i;n++){var o=r[n];if(n===e){var s=a(t);return s>-1&&(t===o.left||t===o.right)?"typeof prevStates[".concat(s,"] === 'object' ? prevStates[").concat(s,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")"):"new Matrix(".concat(t.rows,", ").concat(t.columns,")")}if(t===o.product)return"states[".concat(n,"].product");if(t===o.right)return"states[".concat(n,"].right");if(t===o.left)return"states[".concat(n,"].left")}return""}function s(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.input)return"json.input";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var r=0,i=e.hiddenLayers.length;r<i;r++){var a=e.hiddenLayers[r];for(var s in a)if(a.hasOwnProperty(s)&&a[s]===t)return"json.hiddenLayers[".concat(r,"].").concat(s)}return o(t,n)}function u(t){var e=t.toString().split("{");e.shift();var n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function c(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var l=[],h={},p=[],d=0,f=r.length;d<f;d++){var m=r[d];l.push("states[".concat(d,"] = {\n      name: '").concat(m.forwardFn.name,"',\n      left: ").concat(m.left?s(m.left,d):"undefined",",\n      right: ").concat(m.right?s(m.right,d):"undefined",",\n      product: ").concat(s(m.product,d),"\n    }"));var g=m.forwardFn.name;h[g]||(h[g]=!0,p.push("        case '".concat(g,"': //compiled from ").concat(c(g),"\n          ").concat(u(m.forwardFn.toString()),"\n          break;")))}var v="\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ".concat(i,";\n  ").concat(this.options.dataFormatter?"".concat(this.options.dataFormatter.toFunctionString(),";\n  Object.assign(dataFormatter, json.options.dataFormatter);"):"","\n  ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"const formatDataIn = function (input, output) { ".concat(u(this.options.dataFormatter.formatDataIn.toString())," }.bind(dataFormatter);"):"","\n  ").concat(null!==this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"const formatDataOut = function formatDataOut(input, output) { ".concat(u(this.options.dataFormatter.formatDataOut.toString())," }.bind(dataFormatter);"):"","\n  var maxPredictionLength =\n    ").concat(this.options.maxPredictionLength," +\n    rawInput.length +\n    ").concat(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0,";\n  var input = ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"formatDataIn(rawInput)":"rawInput",";\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ").concat(l.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(l.length,"; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n").concat(p.join("\n"),"\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))":"return output.slice(input.length).map(function(value) { return value - 1; })",";\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ").concat(W.toString(),"\n  ").concat($r.toString().replace("_1.Matrix","Matrix"),"\n  ").concat(Mt.toString(),"\n  ").concat(ri.toString(),"\n  ").concat(ni.toString());return new Function("rawInput","isSampleI","temperature",t?t(v):v)}},{key:"trainPattern",value:function(t,e){var n=this.trainInput(t);return this.backpropagate(t),this.adjustWeights(),e?n:0}}]),t}();function si(t){return t[t.length-1]}var ui=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return ci(t,e)}},{key:"getEquation",value:function(t,e,n,r){return li(t,e,n,r)}}]),n}(oi);function ci(t,e){return{updateGateInputMatrix:new Mr(t,e,.08),updateGateHiddenMatrix:new Mr(t,t,.08),updateGateBias:new Dr(t,1),resetGateInputMatrix:new Mr(t,e,.08),resetGateHiddenMatrix:new Mr(t,t,.08),resetGateBias:new Dr(t,1),cellWriteInputMatrix:new Mr(t,e,.08),cellWriteHiddenMatrix:new Mr(t,t,.08),cellWriteBias:new Dr(t,1)}}function li(t,e,n,r){if(!r.updateGateInputMatrix||!r.updateGateHiddenMatrix||!r.updateGateBias||!r.resetGateInputMatrix||!r.resetGateHiddenMatrix||!r.resetGateBias||!r.cellWriteInputMatrix||!r.cellWriteHiddenMatrix||!r.cellWriteBias)throw new Error("hiddenLayer does not have expected properties");var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),c=t.allOnes.bind(t),l=t.cloneNegative.bind(t),h=i(a(a(o(r.updateGateInputMatrix,e),o(r.updateGateHiddenMatrix,n)),r.updateGateBias)),p=i(a(a(o(r.resetGateInputMatrix,e),o(r.resetGateHiddenMatrix,n)),r.resetGateBias)),d=u(a(a(o(r.cellWriteInputMatrix,e),o(r.cellWriteHiddenMatrix,s(p,n))),r.cellWriteBias));return a(s(a(c(h.rows,h.columns),l(h)),d),s(n,h))}var hi=m((function t(e,n){f(this,t),this.prop=n,this.length=0,this.table={};for(var r=0;r<e.length;r++)for(var i=e[r][n],a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(this.table.hasOwnProperty(s)||(this.table[s]=this.length++))}})),pi=function(){return d(d({},ai()),{},{inputSize:1,hiddenLayers:[20],outputSize:1,inputRange:0})},di=function(t){l(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=e.call(this)).inputLookupLength=0,t.inputLookup=null,t.outputLookup=null,t.outputLookupLength=0,t.model=Object.seal({isInitialized:!1,hiddenLayers:[],output:new Dr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Mr(0,0,.08)}),t.options=pi(),t.options=d(d({},t.options),r),t.updateTrainingOptions(d(d({},fi),r)),r.json&&t.fromJSON(r.json),t}return m(n,[{key:"createInputMatrix",value:function(){throw new Error("Input Matrices do not exist on RNNTimeStep")}},{key:"createOutputMatrices",value:function(){var t=this.options.outputSize,e=si(this.options.hiddenLayers),n=new Mr(t,e,.08);return{output:new Mr(t,1,.08),outputConnector:n}}},{key:"bindEquation",value:function(){var t=this.model,e=this.options,n=e.hiddenLayers,r=e.inputSize,i=t.hiddenLayers,a=new ei,o=[],s=t.equationConnections.length>0?t.equationConnections[t.equationConnections.length-1]:this.initialLayerInputs,u=this.getEquation(a,a.input(new Dr(r,1)),s[0],i[0]);o.push(u);for(var c=1,l=n.length;c<l;c++)u=this.getEquation(a,u,s[c],i[c]),o.push(u);t.equationConnections.push(o),a.add(a.multiply(t.outputConnector,u),t.output),t.equations.push(a)}},{key:"initialize",value:function(){this.model=this.mapModel()}},{key:"mapModel",value:function(){var t=[];this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Dr(t,1)}));for(var e=this.createHiddenLayers(),n=0,r=e.length;n<r;n++){var i=e[n];for(var a in i)i.hasOwnProperty(a)&&t.push(i[a])}var o=this.createOutputMatrices(),s=o.outputConnector,u=o.output;return t.push(s),t.push(u),Object.seal({isInitialized:!0,hiddenLayers:e,output:u,equations:[],allMatrices:t,equationConnections:[],outputConnector:s})}},{key:"backpropagate",value:function(){for(var t=this.model.equations.length-1;t>-1;t--)this.model.equations[t].backpropagate()}},{key:"run",value:function(t){var e=st.dataShape(t).join(",");switch(e){case"array,number":return this.runArray(t);case"array,array,number":return this.runArrayOfArray(t);case"object,number":return this.runObject(t);case"array,object,number":return this.runArrayOfObject(t);default:throw new Error("Unrecognized data shape ".concat(e))}}},{key:"forecast",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=st.dataShape(t).join(",");switch(n){case"array,number":return this.forecastArray(t,e);case"array,array,number":return this.forecastArrayOfArray(t,e);case"object,number":return this.runObject(t);case"array,object,number":return this.forecastArrayOfObject(t,e);default:throw new Error("Unrecognized data shape ".concat(n))}}},{key:"forecastArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();var a=0;if(1===this.options.inputSize)for(var o=0;o<t.length;o++)n=r[a++].runInput(Float32Array.from([t[o]]));else for(var s=0;s<t.length;s++)n=r[a++].runInput(Float32Array.from([]));if(!n)throw new Error("lastOutput not set");for(var u=[n.weights[0]],c=0,l=e-1;c<l;c++)n=r[a++].runInput(n.weights),u.push(n.weights[0]);return this.end(),Float32Array.from(u)}},{key:"forecastArrayOfArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();for(var a=0,o=0;o<t.length;o++)n=r[a++].runInput(t[o]);if(!n)throw new Error("lastOutput not set");for(var s=[Float32Array.from(n.weights)],u=0,c=e-1;u<c;u++)n=r[a++].runInput(n.weights),s.push(Float32Array.from(n.weights.slice(0)));return this.end(),s}},{key:"forecastArrayOfObject",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");var r=t.map((function(t){return st.toArray(e.inputLookup,t,e.inputLookupLength)}));return this.forecastArrayOfArray(r,n).map((function(t){return st.toObject(e.outputLookup,t)}))}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=e=d(d({},ii),e),1===this.options.inputSize&&1===this.options.outputSize&&this.setSize(t),this.verifySize();var n,r=this.formatData(t),i=1/0;this.verifyIsInitialized();var a=this.trainOpts,o=a.iterations,s=a.errorThresh,u=a.logPeriod,c=a.callback,l=a.callbackPeriod,h=!0===e.log?console.log:e.log;for(n=0;n<o&&i>s;n++){for(var p=0,f=0;f<r.length;f++)p+=this.trainPattern(r[f],!0);if(i=p/r.length,isNaN(i))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");h&&n%u===0&&h("iterations: ".concat(n,", training error: ").concat(i)),c&&n%l===0&&c({error:i,iterations:n})}return{error:i,iterations:n}}},{key:"trainArrayOfArray",value:function(t){if(t.length<2)throw new Error("input must be an array of 2 or more");for(var e=this.model.equations;e.length<t.length;)this.bindEquation();for(var n=0,r=0,i=t.length-1;r<i;r++)n+=e[r].predictTarget(t[r],t[r+1]);return this.end(),n/t.length}},{key:"trainPattern",value:function(t,e){var n=this.trainArrayOfArray(t);return this.backpropagate(),this.adjustWeights(),e?n:0}},{key:"setSize",value:function(t){var e=0;switch(st.dataShape(t).join(",")){case"array,array,number":case"array,object,number":case"array,datum,array,number":case"array,datum,object,number":e=1;break;case"array,array,array,number":e=t[0][0].length;break;case"array,array,object,number":e=Object.keys(st.toTable2D(t)).length;break;case"array,datum,array,array,number":e=t[0].input[0].length;break;case"array,datum,array,object,number":e=Object.keys(st.toInputTable2D(t)).length;break;default:throw new Error("unknown data shape or configuration")}this.options=Object.seal(d(d({},this.options),{},{inputSize:e,outputSize:e}))}},{key:"verifySize",value:function(){if((this.options.inputSize||this.options.outputSize)&&this.options.inputSize!==this.options.outputSize)throw new Error("manually set inputSize and outputSize mismatch")}},{key:"runArray",value:function(t){this.checkRunnable();for(var e,n=this.model.equations;n.length<=t.length;)this.bindEquation();for(var r=0;r<t.length;r++)e=n[r].runInput(new Float32Array([t[r]]));return this.end(),e.weights[0]}},{key:"runArrayOfArray",value:function(t){this.checkRunnable();for(var e,n=this.model.equations;n.length<=t.length;)this.bindEquation();for(var r=0;r<t.length;r++)e=n[r].runInput(t[r]).weights;return this.end(),null!==e&&void 0!==e?e:Float32Array.from([])}},{key:"runObject",value:function(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set");if(this.inputLookup===this.outputLookup){var e=st.toArrayShort(this.inputLookup,t);return st.toObjectPartial(this.outputLookup,this.forecastArray(e,this.outputLookupLength-e.length),e.length)}return st.toObject(this.outputLookup,this.forecastArray(st.toArray(this.inputLookup,t,this.inputLookupLength),this.outputLookupLength))}},{key:"runArrayOfObject",value:function(t){var e=this;if(null===this.inputLookup)throw new Error("this.inputLookup not set");if(null===this.outputLookup)throw new Error("this.outputLookup not set");var n=t.map((function(t){return st.toArray(e.inputLookup,t,e.inputLookupLength)}));return this.forecastArrayOfArray(n,1).map((function(t){return st.toObject(e.outputLookup,t)}))[0]}},{key:"runArrayOfObjectOfArray",value:function(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");return st.toObject(this.outputLookup,this.runArrayOfArray(st.toArrays(this.inputLookup,t,this.inputLookupLength)))}},{key:"end",value:function(){this.model.equations[this.model.equations.length-1].runInput(new Float32Array(this.options.outputSize))}},{key:"requireInputOutputOfOne",value:function(){if(1!==this.options.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.options.outputSize)throw new Error("outputSize must be 1 for this data size")}},{key:"formatArray",value:function(t){var e=[];this.requireInputOutputOfOne();for(var n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return[e]}},{key:"formatArrayOfArray",value:function(t){var e=[],n=this.options,r=n.inputSize,i=n.outputSize;if(1===r&&1===i){for(var a=0;a<t.length;a++)e.push(rr(t[a]));return e}if(r!==t[0].length)throw new Error("inputSize must match data input size");if(i!==t[0].length)throw new Error("outputSize must match data output size");for(var o=0;o<t.length;o++)e.push(Float32Array.from(t[o]));return[e]}},{key:"formatArrayOfObject",value:function(t){if(this.requireInputOutputOfOne(),!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++)n.push(sr(t[r]));return n}},{key:"formatArrayOfObjectMulti",value:function(t){if(!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++)n.push([cr(t[r],this.inputLookup,this.inputLookupLength)]);return n}},{key:"formatArrayOfDatumOfArray",value:function(t){var e=[];this.requireInputOutputOfOne();for(var n=0;n<t.length;n++){var r=t[n];e.push(ir(r.input,r.output))}return e}},{key:"formatArrayOfDatumOfObject",value:function(t){if(this.requireInputOutputOfOne(),!this.inputLookup){var e=new qn(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){var n=new qn(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}for(var r=[],i=0;i<t.length;i++){var a=t[i];r.push(ur(a.input,a.output))}return r}},{key:"formatArrayOfArrayOfArray",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(er(t[n]));return e}},{key:"formatArrayOfArrayOfObject",value:function(t){if(!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++){for(var i=[],a=0;a<t[r].length;a++)i.push(cr(t[r][a],this.inputLookup,this.inputLookupLength));n.push(i)}return n}},{key:"formatArrayOfDatumOfArrayOfArray",value:function(t){var e=[],n=this.options,r=n.inputSize,i=n.outputSize;if(r!==t[0].input[0].length)throw new Error("inputSize must match data input size");if(i!==t[0].output[0].length)throw new Error("outputSize must match data output size");for(var a=0;a<t.length;a++){var o=t[a];e.push(nr(o.input,o.output))}return e}},{key:"formatArrayOfDatumOfArrayOfObject",value:function(t){if(!this.inputLookup){var e=new hi(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){var n=new hi(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set to usable number");for(var r=[],i=0;i<t.length;i++){var a=t[i];r.push(or(a.input,a.output,this.inputLookup,this.outputLookup,this.inputLookupLength,this.outputLookupLength))}return r}},{key:"formatData",value:function(t){switch(st.dataShape(t).join(",")){case"array,number":return this.formatArray(t);case"array,array,number":return this.formatArrayOfArray(t);case"array,object,number":return 1===this.options.inputSize?this.formatArrayOfObject(t):this.formatArrayOfObjectMulti(t);case"array,datum,array,number":return this.formatArrayOfDatumOfArray(t);case"array,datum,object,number":return this.formatArrayOfDatumOfObject(t);case"array,array,array,number":return this.formatArrayOfArrayOfArray(t);case"array,array,object,number":return this.formatArrayOfArrayOfObject(t);case"array,datum,array,array,number":return this.formatArrayOfDatumOfArrayOfArray(t);case"array,datum,array,object,number":return this.formatArrayOfDatumOfArrayOfObject(t);default:throw new Error("unknown data shape or configuration")}}},{key:"test",value:function(t){for(var e=[],n=0,r=this.formatData(t),i=0;i<r.length;i++){for(var a=r[i],o=this.run(a.splice(0,a.length-1)),s=a[a.length-1],u=0,c=0,l=0;l<o.length;l++){c++;var h=s[l]-o[l];u+=h*h}if(n+=u/c,Math.abs(u)>this.trainOpts.errorThresh){var p=t[i];e.push({value:p,actual:o})}}return{error:n/r.length,misclasses:e,total:r.length}}},{key:"addFormat",value:function(t){var e,n,r,i,a,o;switch(st.dataShape(t).join(",")){case"array,array,number":case"datum,array,array,number":case"array,number":case"datum,array,number":return;case"datum,object,number":this.inputLookup=st.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=st.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;case"object,number":this.inputLookup=this.outputLookup=st.addKeys(t,null!==(r=this.inputLookup)&&void 0!==r?r:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"array,object,number":for(var s=t,u=0;u<s.length;u++)this.inputLookup=this.outputLookup=st.addKeys(s[u],null!==(i=this.inputLookup)&&void 0!==i?i:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"datum,array,object,number":for(var c=t,l=c.input,h=0;h<l.length;h++)this.inputLookup=st.addKeys(l[h],null!==(a=this.inputLookup)&&void 0!==a?a:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length);for(var p=c.output,d=0;d<p.length;d++)this.outputLookup=st.addKeys(p[d],null!==(o=this.outputLookup)&&void 0!==o?o:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;default:throw new Error("unknown data shape or configuration")}}},{key:"toJSON",value:function(){this.model||this.initialize();var t=this.model,e=d(d({},this.options),ai);return{type:this.constructor.name,options:e,hiddenLayers:t.hiddenLayers.map((function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:t.outputConnector.toJSON(),output:t.output.toJSON(),inputLookup:this.inputLookup,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup,outputLookupLength:this.outputLookupLength}}},{key:"fromJSON",value:function(t){var e=t.options,n=[],r=[];t.hiddenLayers.forEach((function(t){var e={};for(var i in t)e[i]=Dr.fromJSON(t[i]),n.push(e[i]);r.push(e)}));var i=Dr.fromJSON(t.outputConnector);n.push(i);var a=Dr.fromJSON(t.output);return n.push(a),this.options=d(d({},pi()),e),this.inputLookup=t.inputLookup,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup,this.outputLookupLength=t.outputLookupLength,this.model=Object.seal({isInitialized:!0,hiddenLayers:r,output:a,allMatrices:n,outputConnector:i,equations:[],equationConnections:[]}),this.initialLayerInputs=e.hiddenLayers.map((function(t){return new Dr(t,1)})),this.bindEquation(),this}},{key:"toFunction",value:function(t){var e=this.model,n=this.inputLookup,r=this.inputLookupLength,i=this.outputLookup,a=this.outputLookupLength,o=this.options.inputSize,s=e.equations,u=s[1].states,c=JSON.stringify(this.toJSON());function l(t){for(var n=e.equationConnections[0],r=s[0].states,i=0,a=r.length;i<a;i++)if(r[i].product===t)return i;return n.indexOf(t)}function h(t,e){for(var n=0,r=u.length;n<r;n++){var i=u[n];if(n===e){var a=l(t);switch(t){case i.left:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.right:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.product:return"new Matrix(".concat(t.rows,", ").concat(t.columns,")");default:throw Error("unknown state")}}if(t===i.product)return"states[".concat(n,"].product");if(t===i.right)return"states[".concat(n,"].right");if(t===i.left)return"states[".concat(n,"].left")}return""}function p(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var r=0,i=e.hiddenLayers.length;r<i;r++){var a=e.hiddenLayers[r];for(var o in a)if(a.hasOwnProperty(o)&&a[o]===t)return"json.hiddenLayers[".concat(r,"].").concat(o)}return h(t,n)}function d(){return n?1===o?n===i?"function lookupInput(input) {\n            var table = ".concat(JSON.stringify(n),";\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }"):"function lookupInput(input) {\n          var table = ".concat(JSON.stringify(n),";\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }"):"function lookupInput(rawInputs) {\n        var table = ".concat(JSON.stringify(n),";\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(").concat(r,");\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }"):""}function f(){return i?1===o?n===i?"function lookupOutputPartial(output, input) {\n            var table = ".concat(JSON.stringify(i),";\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }"):"function lookupOutput(output) {\n          var table = ".concat(JSON.stringify(i),";\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }"):"function lookupOutput(output) {\n        var table = ".concat(JSON.stringify(i),";\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }"):""}function m(t){var e=t.toString().split("{");e.shift();var n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function g(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var v=[],y={},x=[],b=0,w=u.length;b<w;b++){var k=u[b];v.push("states[".concat(b,"] = {\n      name: '").concat(k.forwardFn.name,"',\n      left: ").concat(k.left?p(k.left,b):"undefined",",\n      right: ").concat(k.right?p(k.right,b):"undefined",",\n      product: ").concat(p(k.product,b),"\n    }"));var S=k.forwardFn.name;y[S]||(y[S]=!0,"input"===k.name?(x.push("case '".concat(S,"':")),x.push(n&&1===o?"product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;":1===o?"product.weights = [input[_i]];":"product.weights = input[_i];"),x.push("break;")):x.push("        case '".concat(S,"':").concat("forwardFn"!==S?" //compiled from ".concat(g(S)):"","\n          ").concat(m(k.forwardFn.toString()),"\n          break;")))}var T=1===o&&this.outputLookup,A="\n  var input = ".concat(this.inputLookup?"lookupInput(rawInput)":"rawInput",";\n  var json = ").concat(c,";\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ").concat(T?n===i?r:"input.length + ".concat(a-1):"input.length",";\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ").concat(v.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(v.length,"; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n").concat(x.join("\n"),"\n      }\n    }\n    ").concat(1===o&&n?"if (_i >= input.length - 1) { output.push(state.product.weights); }":"output = state.product.weights;","\n  }\n  ").concat(i?i===n?"return lookupOutputPartial(output, input)":"return lookupOutput(output)":1===o?"return output[0]":"return output",";\n  ").concat(d(),"\n  ").concat(f(),"\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = new Float32Array(rows * columns);\n  }\n  ").concat($r.toString().replace("_2.default","Matrix"),"\n  ").concat(Mt.toString(),"\n  ").concat(ri.toString(),"\n  ").concat(ni.toString());return new Function("rawInput",t?t(A):A)}}]),n}(oi),fi=d({},ii),mi=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return ci(t,e)}},{key:"getEquation",value:function(t,e,n,r){return li(t,e,n,r)}}]),n}(di),gi=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return vi(t,e)}},{key:"getEquation",value:function(t,e,n,r){return yi(t,e,n,r)}}]),n}(oi);function vi(t,e){return{inputMatrix:new Mr(t,e,.08),inputHidden:new Mr(t,t,.08),inputBias:new Dr(t,1),forgetMatrix:new Mr(t,e,.08),forgetHidden:new Mr(t,t,.08),forgetBias:new Dr(t,1),outputMatrix:new Mr(t,e,.08),outputHidden:new Mr(t,t,.08),outputBias:new Dr(t,1),cellActivationMatrix:new Mr(t,e,.08),cellActivationHidden:new Mr(t,t,.08),cellActivationBias:new Dr(t,1)}}function yi(t,e,n,r){if(!r.inputMatrix||!r.inputHidden||!r.inputBias||!r.forgetMatrix||!r.forgetHidden||!r.forgetBias||!r.outputMatrix||!r.outputHidden||!r.outputBias||!r.cellActivationMatrix||!r.cellActivationHidden||!r.cellActivationBias)throw new Error("hiddenLayer does not have expected properties");var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),c=i(a(a(o(r.inputMatrix,e),o(r.inputHidden,n)),r.inputBias)),l=i(a(a(o(r.forgetMatrix,e),o(r.forgetHidden,n)),r.forgetBias)),h=i(a(a(o(r.outputMatrix,e),o(r.outputHidden,n)),r.outputBias)),p=u(a(a(o(r.cellActivationMatrix,e),o(r.cellActivationHidden,n)),r.cellActivationBias)),d=s(l,n),f=s(c,p);return s(h,u(a(d,f)))}var xi=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return vi(t,e)}},{key:"getEquation",value:function(t,e,n,r){return yi(t,e,n,r)}}]),n}(di);function bi(t,e){for(var n=[];t<e;t++)n.push(t);return n}function wi(t){return Array.isArray(t)?Float32Array.from(t):Float32Array.from(Object.values(t))}function ki(t){var e=t.pixelX,n=t.pixelY,r=t.radius,i=t.inputs,a=t.row,o=t.line,s=t.fontSize,u=t.fontClassName,c='<rect\n              x="'.concat(e/2-r,'"\n              y="').concat(n/2+a*n-r,'"\n              width="').concat(2*r,'"\n              height="').concat(2*r,'"\n              stroke="black"\n              stroke-width="1"\n              fill="').concat(i.color,'"\n              class="').concat(i.className,'" />\n            <line\n              x1="').concat(e/4,'"\n              y1="').concat(n/2+a*n,'"\n              x2="').concat(e/2-r,'"\n              y2="').concat(n/2+a*n,'"\n              style="stroke:').concat(o.color,";stroke-width:").concat(o.width,'"\n              class="').concat(o.className,'" />');return i.labels&&(c+='<text\n              x="'.concat(e/8,'"\n              y="').concat(n/2+a*n-5,'"\n              fill="black"\n              font-size="').concat(s,'"\n              class="').concat(u,'">').concat(i.labels[a],"</text>")),c}function Si(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.hidden;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(a,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />')}function Ti(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.line,o=t.outputs,s=t.radius;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(s,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />\n          <line\n            x1="').concat(e/2+i*e+s,'"\n            y1="').concat(n/2+r*n,'"\n            x2="').concat(e/2+i*e+e/4,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(a.color,";stroke-width:").concat(a.width,'"\n            class="').concat(a.className,'" />')}function Ai(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.lineY,s=t.line,u=t.previousConnectionIndex;return'<line\n            x1="'.concat(e/2+(i-1)*e+a,'"\n            y1="').concat(o/2+u*o,'"\n            x2="').concat(e/2+i*e-a,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(s.color,";stroke-width:").concat(s.width,'"\n            class="').concat(s.className,'" />')}function Ei(t){for(var e=t.sizes,n=t.height,r="",i=t.width/e.length,a=0;a<e.length;a++)for(var o=e[a],s=n/o,u=0;u<o;u++)if(0===a)r+=ki(d({pixelX:i,pixelY:s,row:u,column:a},t));else{a===e.length-1?r+=Ti(d({pixelX:i,pixelY:s,row:u,column:a},t)):r+=Si(d({pixelX:i,pixelY:s,row:u,column:a},t));for(var c=e[a-1],l=n/c,h=0;h<c;h++)r+=Ai(d({pixelX:i,pixelY:s,row:u,column:a,lineY:l,previousConnectionIndex:h},t))}return r}function _i(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.recurrentLine,s=e/2+i*e+a+1,u=n/2+r*n,c=s-2*a-2,l=u,h=c+100,p=l+50,d=s-100,f=u+50;return'<path\n              d="M '.concat(s," ").concat(u," C ").concat(h," ").concat(p,", ").concat(d," ").concat(f,", ").concat(c," ").concat(l,'"\n              stroke="').concat(o.color,'"\n              stroke-width="').concat(o.width,'"\n              fill="transparent"\n              stroke-linecap="round"\n              marker-end="url(#arrow)"\n              class="').concat(o.className,'" />')}function Li(t){var e=t.width,n=t.height,r=t.recurrentLine,i=t.sizes,a=t.radius,o=e/i.length,s='<defs>\n              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">\n                <path d="M0,0 L0,6 L9,3 z" fill="'.concat(r.color,'" />\n              </marker>\n            </defs>');s+=Ei(t);for(var u=1;u<i.length;u++)for(var c=i[u],l=n/c,h=0;h<c;h++)s+=_i({pixelX:o,pixelY:l,row:h,column:u,radius:a,recurrentLine:r});return s}function Ii(t){var e=t.options;if(!e)throw new Error("options not defined");if(!e.inputLayer)throw new Error("options.inputLater not defined");if(!e.hiddenLayers)throw new Error("options.hiddenLayers not defined");if(e.hiddenLayers.length<1)throw new Error("options.hiddenLayers is empty");if(!e.outputLayer)throw new Error("options.outputLayer not defined");var n=e.inputLayer(),r=[];r.push(e.hiddenLayers[0](n,0));for(var i=1;i<e.hiddenLayers.length;i++)r.push(e.hiddenLayers[i](r[i-1],i));var a=e.outputLayer(r[r.length-1],r.length);return{inputSize:n.height,hiddenLayers:r.map((function(t){return t.height})),outputSize:a.height}}function Ci(t){var e=[],n=t.options;if(!n.inputLayer)throw new Error("inputLayer not defined");if(!n.outputLayer)throw new Error("outputLayer not defined");var r=n.inputLayer();e.push(n.hiddenLayers[0](r,vn(),0));for(var i=1;i<n.hiddenLayers.length;i++)e.push(n.hiddenLayers[i](e[i-1],vn(),i));var a=n.outputLayer(e[e.length-1],-1);return{inputSize:r.height,hiddenLayers:e.map((function(t){return t.height})),outputSize:a.height}}function Oi(t,e,n){return'<svg\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            version="1.1"\n            width="'.concat(e,'"\n            height="').concat(n,'">').concat(t,"</svg>")}function Ri(t){return t.sizes}function Di(t){var e=t.options,n=t.sizes,r=e.inputSize,i=e.outputSize,a=e.hiddenLayers;if(!n){if("number"===typeof r&&r<1)throw new Error("inputSize not set");if("number"===typeof i&&i<1)throw new Error("outputSize not set");if(null===a||void 0===a?void 0:a.some((function(t){return t<1})))throw new Error("hiddenLayers not set")}return"number"===typeof r&&Array.isArray(a)&&"number"===typeof i?[r].concat(a).concat([i]):n}function Mi(t){var e=t.options,n=e.inputSize,r=e.outputSize,i=e.hiddenLayers;return[n].concat(i).concat([r])}function Fi(){return{line:{width:.5,color:"black",className:"connection"},recurrentLine:{width:1,color:"red",className:"recurrence"},inputs:{color:"rgba(0, 128, 0, 0.5)",labels:null,className:"input"},outputs:{color:"rgba(100, 149, 237, 0.5)",className:"output"},hidden:{color:"rgba(255, 127, 80, 0.5)",className:"hidden-neuron"},fontSize:"14px",fontClassName:"label",radius:8,width:400,height:250,sizes:[]}}function zi(t,e){var n=d(d({},Fi()),e),r=n.width,i=n.height,o=n.inputs,s=[];if(t instanceof mr||t instanceof Cr)s=Di(t);else if(t instanceof Rr){var u=Ci(t),c=u.inputSize,l=u.hiddenLayers,h=u.outputSize;s=[c].concat(l).concat([h])}else if(t instanceof Qn){var p=Ii(t),f=p.inputSize,m=p.hiddenLayers,g=p.outputSize;s=[f].concat(m).concat([g])}else{if(t instanceof oi||t instanceof gi||t instanceof ui||t instanceof di||t instanceof xi||t instanceof mi)return Oi(Li(d(d({},n),{},{sizes:Pi(Mi(t),o.labels)})),r,i);if(t.hasOwnProperty("type"))switch(t.type){case"NeuralNetwork":case"NeuralNetworkGPU":return Oi(Ei(d(d({},n),{},{sizes:Pi(Ri(t),o.labels)})),r,i);case"RNN":case"GRU":case"LSTM":case"RNNTimeStep":case"GRUTimeStep":case"LSTMTimeStep":return Oi(Li(d(d({},n),{},{sizes:Pi(Mi(t),o.labels)})),r,i);default:throw new Error("unrecognized network")}else if(t.hasOwnProperty("inputSize")&&t.hasOwnProperty("hiddenLayers")&&t.hasOwnProperty("outputSize")){var v=t.inputSize,y=t.hiddenLayers,x=t.outputSize;s=[v].concat(a(y),[x])}else{if(!t.hasOwnProperty("sizes"))throw new Error("unrecognized network");s=t.sizes}}return Oi(Ei(d(d({},n),{},{sizes:Pi(s,o.labels)})),r,i)}function Pi(t,e){if(!t)throw new Error("sizes not set");if(t.some((function(t){return t<1})))throw new Error("sizes not set correctly");if(e&&e.length!==t[0])throw new Error("not enough labels for inputs");return t}var Ni={RNNTimeStep:di,LSTMTimeStep:xi,GRUTimeStep:mi,RNN:oi,LSTM:gi,GRU:ui},Vi={max:lr,mse:hr,ones:Pe,ones2D:Ne,random:Nt,randomWeight:Dt,randos:Vt,range:bi,toArray:wi,DataFormatter:Fr,zeros:W,toSVG:zi};t.CrossValidate=L,t.FeedForward=Qn,t.NeuralNetwork=mr,t.NeuralNetworkGPU=Cr,t.Recurrent=Rr,t.activation=_,t.layer=Wn,t.layerTypes=Un,t.likely=tr,t.lookup=st,t.praxis=Et,t.recurrent=Ni,t.utilities=Vi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},8182:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}e.Z=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}},2110:function(t,e,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?o:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=d(n);i&&i!==f&&t(e,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(e),m=u(n),g=0;g<o.length;++g){var v=o[g];if(!a[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=p(n,v);try{c(e,v,y)}catch(x){}}}}return e}},746:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case l:case h:case a:case s:case o:case d:return t;default:switch(t=t&&t.$$typeof){case c:case p:case g:case m:case u:return t;default:return e}}case i:return e}}}function k(t){return w(t)===h}e.AsyncMode=l,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=u,e.Element=r,e.ForwardRef=p,e.Fragment=a,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=o,e.Suspense=d,e.isAsyncMode=function(t){return k(t)||w(t)===l},e.isConcurrentMode=k,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===u},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===s},e.isStrictMode=function(t){return w(t)===o},e.isSuspense=function(t){return w(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===h||t===s||t===o||t===d||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===p||t.$$typeof===y||t.$$typeof===x||t.$$typeof===b||t.$$typeof===v)},e.typeOf=w},8309:function(t,e,n){"use strict";t.exports=n(746)},1372:function(t,e){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case a:case s:case o:case p:case d:return t;default:switch(t=t&&t.$$typeof){case l:case c:case h:case m:case f:case u:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference")},7441:function(t,e,n){"use strict";n(1372)},5545:function(t,e,n){"use strict";var r=n(2791);e.Z=r.createContext(null)},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var r=n(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7156:function(t){function e(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=t.apply(n,r);function s(t){e(o,i,a,s,u,"next",t)}function u(t){e(o,i,a,s,u,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t,e,n){var r=n(4062);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},6389:function(t,e,n){var r=n(3808),i=n(9617),a=n(4993);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},8416:function(t,e,n){var r=n(4062);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},1588:function(t,e,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},3808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2122:function(t,e,n){var r=n(8416);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports.default=t.exports},4993:function(t,e,n){var r=n(8698).default,i=n(6115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},7061:function(t,e,n){var r=n(8698).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(O){h=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=p;var f={};function m(){}function g(){}function v(){}var y={};h(y,u,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(I([])));b&&b!==n&&a.call(b,u)&&(y=b);var w=v.prototype=m.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,s,u){var c=d(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==r(h)&&a.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}})}function T(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function A(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=d(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return g.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=h(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,h(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),h(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(p(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(w),h(w,l,"Generator"),h(w,u,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},1753:function(t,e,n){var r=n(3808);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},5036:function(t,e,n){var r=n(8698).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4062:function(t,e,n){var r=n(8698).default,i=n(5036);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var r=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},7462:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{Z:function(){return r}})},4578:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9611);function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(0,r.Z)(t,e)}},5987:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(3366);function i(t,e){if(null==t)return{};var n,i,a=(0,r.Z)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},3366:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{Z:function(){return r}})},2711:function(t,e,n){"use strict";n.d(e,{JO:function(){return qt}});var r=n(5671),i=n(3144),a=n(136),o=n(7277),s=n(1413),u=n(2791),c=/^[a-z0-9]+(-[a-z0-9]+)*$/,l=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.split(":");if("@"===t.slice(0,1)){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){var a=i.pop(),o=i.pop(),s={provider:i.length>0?i[0]:r,prefix:o,name:a};return e&&!h(s)?null:s}var u=i[0],c=u.split("-");if(c.length>1){var l={provider:r,prefix:c.shift(),name:c.join("-")};return e&&!h(l)?null:l}if(n&&""===r){var p={provider:r,prefix:"",name:u};return e&&!h(p,n)?null:p}return null},h=function(t,e){return!!t&&!(""!==t.provider&&!t.provider.match(c)||!(e&&""===t.prefix||t.prefix.match(c))||!t.name.match(c))},p=Object.freeze({left:0,top:0,width:16,height:16}),d=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),f=Object.freeze((0,s.Z)((0,s.Z)({},p),d)),m=Object.freeze((0,s.Z)((0,s.Z)({},f),{},{body:"",hidden:!1}));function g(t,e){var n=function(t,e){var n={};!t.hFlip!==!e.hFlip&&(n.hFlip=!0),!t.vFlip!==!e.vFlip&&(n.vFlip=!0);var r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}(t,e);for(var r in m)r in d?r in t&&!(r in n)&&(n[r]=d[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function v(t,e,n){var r=t.icons,i=t.aliases||Object.create(null),a={};function o(t){a=g(r[t]||i[t],a)}return o(e),n.forEach(o),g(t,a)}function y(t,e){var n=[];if("object"!==typeof t||"object"!==typeof t.icons)return n;t.not_found instanceof Array&&t.not_found.forEach((function(t){e(t,null),n.push(t)}));var r=function(t,e){var n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);return(e||Object.keys(n).concat(Object.keys(r))).forEach((function t(e){if(n[e])return i[e]=[];if(!(e in i)){i[e]=null;var a=r[e]&&r[e].parent,o=a&&t(a);o&&(i[e]=[a].concat(o))}return i[e]})),i}(t);for(var i in r){var a=r[i];a&&(e(i,v(t,i,a)),n.push(i))}return n}var x=(0,s.Z)({provider:"",aliases:{},not_found:{}},p);function b(t,e){for(var n in e)if(n in t&&typeof t[n]!==typeof e[n])return!1;return!0}function w(t){if("object"!==typeof t||null===t)return null;var e=t;if("string"!==typeof e.prefix||!t.icons||"object"!==typeof t.icons)return null;if(!b(t,x))return null;var n=e.icons;for(var r in n){var i=n[r];if(!r.match(c)||"string"!==typeof i.body||!b(i,m))return null}var a=e.aliases||Object.create(null);for(var o in a){var s=a[o],u=s.parent;if(!o.match(c)||"string"!==typeof u||!n[u]&&!a[u]||!b(s,m))return null}return e}var k=Object.create(null);function S(t,e){var n=k[t]||(k[t]=Object.create(null));return n[e]||(n[e]=function(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}(t,e))}function T(t,e){return w(e)?y(e,(function(e,n){n?t.icons[e]=n:t.missing.add(e)})):[]}var A=!1;function E(t){return"boolean"===typeof t&&(A=t),A}function _(t){var e="string"===typeof t?l(t,!0,A):t;if(e){var n=S(e.provider,e.prefix),r=e.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function L(t,e){var n=l(t,!0,A);return!!n&&function(t,e,n){try{if("string"===typeof n.body)return t.icons[e]=(0,s.Z)({},n),!0}catch(Gt){}return!1}(S(n.provider,n.prefix),n.name,e)}var I=Object.freeze({width:null,height:null}),C=Object.freeze((0,s.Z)((0,s.Z)({},I),d)),O=/(-?[0-9.]*[0-9]+[0-9.]*)/g,R=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function D(t,e,n){if(1===e)return t;if(n=n||100,"number"===typeof t)return Math.ceil(t*e*n)/n;if("string"!==typeof t)return t;var r=t.split(O);if(null===r||!r.length)return t;for(var i=[],a=r.shift(),o=R.test(a);;){if(o){var s=parseFloat(a);isNaN(s)?i.push(a):i.push(Math.ceil(s*e*n)/n)}else i.push(a);if(void 0===(a=r.shift()))return i.join("");o=!o}}var M=/\sid="(\S+)"/g,F="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),z=0;function P(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,r=[];e=M.exec(t);)r.push(e[1]);if(!r.length)return t;var i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return r.forEach((function(e){var r="function"===typeof n?n(e):n+(z++).toString(),a=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+r+i+"$3")})),t=t.replace(new RegExp(i,"g"),"")}var N=Object.create(null);function V(t,e){N[t]=e}function K(t){return N[t]||N[""]}function Z(t){var e;if("string"===typeof t.resources)e=[t.resources];else if(!((e=t.resources)instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:!0===t.random,index:t.index||0,dataAfterTimeout:!1!==t.dataAfterTimeout}}for(var j=Object.create(null),G=["https://api.simplesvg.com","https://api.unisvg.com"],B=[];G.length>0;)1===G.length||Math.random()>.5?B.push(G.shift()):B.push(G.pop());function U(t,e){var n=Z(e);return null!==n&&(j[t]=n,!0)}function W(t){return j[t]}j[""]=Z({resources:["https://api.iconify.design"].concat(B)});var H=function(){var t;try{if("function"===typeof(t=fetch))return t}catch(Gt){}}();var X={prepare:function(t,e,n){var r=[],i=function(t,e){var n,r=W(t);if(!r)return 0;if(r.maxURL){var i=0;r.resources.forEach((function(t){var e=t;i=Math.max(i,e.length)}));var a=e+".json?icons=";n=r.maxURL-i-r.path.length-a.length}else n=0;return n}(t,e),a="icons",o={type:a,provider:t,prefix:e,icons:[]},s=0;return n.forEach((function(n,u){(s+=n.length+1)>=i&&u>0&&(r.push(o),o={type:a,provider:t,prefix:e,icons:[]},s=n.length),o.icons.push(n)})),r.push(o),r},send:function(t,e,n){if(H){var r=function(t){if("string"===typeof t){var e=W(t);if(e)return e.path}return"/"}(e.provider);switch(e.type){case"icons":var i=e.prefix,a=e.icons.join(",");r+=i+".json?"+new URLSearchParams({icons:a}).toString();break;case"custom":var o=e.uri;r+="/"===o.slice(0,1)?o.slice(1):o;break;default:return void n("abort",400)}var s=503;H(t+r).then((function(t){var e=t.status;if(200===e)return s=501,t.json();setTimeout((function(){n(function(t){return 404===t}(e)?"abort":"next",e)}))})).then((function(t){"object"===typeof t&&null!==t?setTimeout((function(){n("success",t)})):setTimeout((function(){404===t?n("abort",t):n("next",s)}))})).catch((function(){n("next",s)}))}else n("abort",424)}};function q(t,e){t.forEach((function(t){var n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter((function(t){return t.id!==e})))}))}var Y=0;var J={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $(t,e,n,r){var i,a=t.resources.length,o=t.random?Math.floor(Math.random()*a):t.index;if(t.random){var s=t.resources.slice(0);for(i=[];s.length>1;){var u=Math.floor(Math.random()*s.length);i.push(s[u]),s=s.slice(0,u).concat(s.slice(u+1))}i=i.concat(s)}else i=t.resources.slice(o).concat(t.resources.slice(0,o));var c,l=Date.now(),h="pending",p=0,d=null,f=[],m=[];function g(){d&&(clearTimeout(d),d=null)}function v(){"pending"===h&&(h="aborted"),g(),f.forEach((function(t){"pending"===t.status&&(t.status="aborted")})),f=[]}function y(t,e){e&&(m=[]),"function"===typeof t&&m.push(t)}function x(){h="failed",m.forEach((function(t){t(void 0,c)}))}function b(){f.forEach((function(t){"pending"===t.status&&(t.status="aborted")})),f=[]}function w(){if("pending"===h){g();var r=i.shift();if(void 0===r)return f.length?void(d=setTimeout((function(){g(),"pending"===h&&(b(),x())}),t.timeout)):void x();var a={status:"pending",resource:r,callback:function(e,n){!function(e,n,r){var a="success"!==n;switch(f=f.filter((function(t){return t!==e})),h){case"pending":break;case"failed":if(a||!t.dataAfterTimeout)return;break;default:return}if("abort"===n)return c=r,void x();if(a)return c=r,void(f.length||(i.length?w():x()));if(g(),b(),!t.random){var o=t.resources.indexOf(e.resource);-1!==o&&o!==t.index&&(t.index=o)}h="completed",m.forEach((function(t){t(r)}))}(a,e,n)}};f.push(a),p++,d=setTimeout(w,t.rotate),n(r,e,a.callback)}}return"function"===typeof r&&m.push(r),setTimeout(w),function(){return{startTime:l,payload:e,status:h,queriesSent:p,queriesPending:f.length,subscribe:y,abort:v}}}function Q(t){var e=(0,s.Z)((0,s.Z)({},J),t),n=[];function r(){n=n.filter((function(t){return"pending"===t().status}))}var i={query:function(t,i,a){var o=$(e,t,i,(function(t,e){r(),a&&a(t,e)}));return n.push(o),o},find:function(t){return n.find((function(e){return t(e)}))||null},setIndex:function(t){e.index=t},getIndex:function(){return e.index},cleanup:r};return i}function tt(){}var et=Object.create(null);function nt(t,e,n){var r,i;if("string"===typeof t){var a=K(t);if(!a)return n(void 0,424),tt;i=a.send;var o=function(t){if(!et[t]){var e=W(t);if(!e)return;var n={config:e,redundancy:Q(e)};et[t]=n}return et[t]}(t);o&&(r=o.redundancy)}else{var s=Z(t);if(s){r=Q(s);var u=K(t.resources?t.resources[0]:"");u&&(i=u.send)}}return r&&i?r.query(e,i,n)().abort:(n(void 0,424),tt)}var rt="iconify2",it="iconify",at=it+"-count",ot=it+"-version",st=36e5,ut=168;function ct(t,e){try{return t.getItem(e)}catch(Gt){}}function lt(t,e,n){try{return t.setItem(e,n),!0}catch(Gt){}}function ht(t,e){try{t.removeItem(e)}catch(Gt){}}function pt(t,e){return lt(t,at,e.toString())}function dt(t){return parseInt(ct(t,at))||0}var ft={local:!0,session:!0},mt={local:new Set,session:new Set},gt=!1;var vt="undefined"===typeof window?{}:window;function yt(t){var e=t+"Storage";try{if(vt&&vt[e]&&"number"===typeof vt[e].length)return vt[e]}catch(Gt){}ft[t]=!1}function xt(t,e){var n=yt(t);if(n){var r=ct(n,ot);if(r!==rt){if(r)for(var i=dt(n),a=0;a<i;a++)ht(n,it+a.toString());return lt(n,ot,rt),void pt(n,0)}for(var o=Math.floor(Date.now()/st)-ut,s=function(t){var r=it+t.toString(),i=ct(n,r);if("string"===typeof i){try{var a=JSON.parse(i);if("object"===typeof a&&"number"===typeof a.cached&&a.cached>o&&"string"===typeof a.provider&&"object"===typeof a.data&&"string"===typeof a.data.prefix&&e(a,t))return!0}catch(Gt){}ht(n,r)}},u=dt(n),c=u-1;c>=0;c--)s(c)||(c===u-1?(u--,pt(n,u)):mt[t].add(c))}}function bt(){if(!gt)for(var t in gt=!0,ft)xt(t,(function(t){var e=t.data,n=S(t.provider,e.prefix);if(!T(n,e).length)return!1;var r=e.lastModified||-1;return n.lastModifiedCached=n.lastModifiedCached?Math.min(n.lastModifiedCached,r):r,!0}))}function wt(t,e){function n(n){var r;if(ft[n]&&(r=yt(n))){var i,a=mt[n];if(a.size)a.delete(i=Array.from(a).shift());else if(!pt(r,(i=dt(r))+1))return;var o={cached:Math.floor(Date.now()/st),provider:t.provider,data:e};return lt(r,it+i.toString(),JSON.stringify(o))}}gt||bt(),e.lastModified&&!function(t,e){var n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(var r in ft)xt(r,(function(n){var r=n.data;return n.provider!==t.provider||r.prefix!==t.prefix||r.lastModified===e}));return!0}(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&delete(e=Object.assign({},e)).not_found,n("local")||n("session"))}function kt(){}function St(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout((function(){t.iconsLoaderFlag=!1,function(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout((function(){t.pendingCallbacksFlag=!1;var e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(e.length){var n=!1,r=t.provider,i=t.prefix;e.forEach((function(e){var a=e.icons,o=a.pending.length;a.pending=a.pending.filter((function(e){if(e.prefix!==i)return!0;var o=e.name;if(t.icons[o])a.loaded.push({provider:r,prefix:i,name:o});else{if(!t.missing.has(o))return n=!0,!0;a.missing.push({provider:r,prefix:i,name:o})}return!1})),a.pending.length!==o&&(n||q([t],e.id),e.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),e.abort))}))}})))}(t)})))}var Tt=function(t,e){var n=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return t.forEach((function(t){var i="string"===typeof t?l(t,e,n):t;i&&r.push(i)})),r}(t,!0,E()),r=function(t){var e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((function(t,e){return t.provider!==e.provider?t.provider.localeCompare(e.provider):t.prefix!==e.prefix?t.prefix.localeCompare(e.prefix):t.name.localeCompare(e.name)}));var r={provider:"",prefix:"",name:""};return t.forEach((function(t){if(r.name!==t.name||r.prefix!==t.prefix||r.provider!==t.provider){r=t;var i=t.provider,a=t.prefix,o=t.name,s=n[i]||(n[i]=Object.create(null)),u=s[a]||(s[a]=S(i,a)),c={provider:i,prefix:a,name:o};(o in u.icons?e.loaded:""===a||u.missing.has(o)?e.missing:e.pending).push(c)}})),e}(n);if(!r.pending.length){var i=!0;return e&&setTimeout((function(){i&&e(r.loaded,r.missing,r.pending,kt)})),function(){i=!1}}var a,o,s=Object.create(null),u=[];return r.pending.forEach((function(t){var e=t.provider,n=t.prefix;if(n!==o||e!==a){a=e,o=n,u.push(S(e,n));var r=s[e]||(s[e]=Object.create(null));r[n]||(r[n]=[])}})),r.pending.forEach((function(t){var e=t.provider,n=t.prefix,r=t.name,i=S(e,n),a=i.pendingIcons||(i.pendingIcons=new Set);a.has(r)||(a.add(r),s[e][n].push(r))})),u.forEach((function(t){var e=t.provider,n=t.prefix;s[e][n].length&&function(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout((function(){t.iconsQueueFlag=!1;var e,n=t.provider,r=t.prefix,i=t.iconsToLoad;delete t.iconsToLoad,i&&(e=K(n))&&e.prepare(n,r,i).forEach((function(e){nt(n,e,(function(n){if("object"!==typeof n)e.icons.forEach((function(e){t.missing.add(e)}));else try{var r=T(t,n);if(!r.length)return;var i=t.pendingIcons;i&&r.forEach((function(t){i.delete(t)})),wt(t,n)}catch(Gt){console.error(Gt)}St(t)}))}))})))}(t,s[e][n])})),e?function(t,e,n){var r=Y++,i=q.bind(null,n,r);if(!e.pending.length)return i;var a={id:r,icons:e,callback:t,abort:i};return n.forEach((function(t){(t.loaderCallbacks||(t.loaderCallbacks=[])).push(a)})),i}(e,r,u):kt};var At=/[\s,]+/;function Et(t,e){e.split(At).forEach((function(e){switch(e.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0}}))}function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.replace(/^-?[0-9.]*/,"");function r(t){for(;t<0;)t+=4;return t%4}if(""===n){var i=parseInt(t);return isNaN(i)?0:r(i)}if(n!==t){var a=0;switch(n){case"%":a=25;break;case"deg":a=90}if(a){var o=parseFloat(t.slice(0,t.length-n.length));return isNaN(o)?0:(o/=a)%1===0?r(o):0}}return e}var Lt=(0,s.Z)((0,s.Z)({},C),{},{inline:!1}),It={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ct={display:"inline-block"},Ot={backgroundColor:"currentColor"},Rt={backgroundColor:"transparent"},Dt={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Mt={webkitMask:Ot,mask:Ot,background:Rt};for(var Ft in Mt){var zt=Mt[Ft];for(var Pt in Dt)zt[Ft+Pt]=Dt[Pt]}var Nt=(0,s.Z)((0,s.Z)({},Lt),{},{inline:!0});function Vt(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}var Kt=function(t,e,n,r){var i=n?Nt:Lt,a=function(t,e){var n=(0,s.Z)({},t);for(var r in e){var i=e[r],a=typeof i;r in I?(null===i||i&&("string"===a||"number"===a))&&(n[r]=i):a===typeof n[r]&&(n[r]="rotate"===r?i%4:i)}return n}(i,e),o=e.mode||"svg",c={},l=e.style||{},h=(0,s.Z)((0,s.Z)({},"svg"===o?It:{}),{},{ref:r});for(var p in e){var d=e[p];if(void 0!==d)switch(p){case"icon":case"style":case"children":case"onLoad":case"mode":case"_ref":case"_inline":break;case"inline":case"hFlip":case"vFlip":a[p]=!0===d||"true"===d||1===d;break;case"flip":"string"===typeof d&&Et(a,d);break;case"color":c.color=d;break;case"rotate":"string"===typeof d?a[p]=_t(d):"number"===typeof d&&(a[p]=d);break;case"ariaHidden":case"aria-hidden":!0!==d&&"true"!==d&&delete h["aria-hidden"];break;default:void 0===i[p]&&(h[p]=d)}}var m=function(t,e){var n=(0,s.Z)((0,s.Z)({},f),t),r=(0,s.Z)((0,s.Z)({},C),e),i={left:n.left,top:n.top,width:n.width,height:n.height},a=n.body;[n,r].forEach((function(t){var e,n=[],r=t.hFlip,o=t.vFlip,s=t.rotate;switch(r?o?s+=2:(n.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),n.push("scale(-1 1)"),i.top=i.left=0):o&&(n.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),n.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4){case 1:e=i.height/2+i.top,n.unshift("rotate(90 "+e.toString()+" "+e.toString()+")");break;case 2:n.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:e=i.width/2+i.left,n.unshift("rotate(-90 "+e.toString()+" "+e.toString()+")")}s%2===1&&(i.left!==i.top&&(e=i.left,i.left=i.top,i.top=e),i.width!==i.height&&(e=i.width,i.width=i.height,i.height=e)),n.length&&(a='<g transform="'+n.join(" ")+'">'+a+"</g>")}));var o,u,c=r.width,l=r.height,h=i.width,p=i.height;null===c?o=D(u=null===l?"1em":"auto"===l?p:l,h/p):(o="auto"===c?h:c,u=null===l?D(o,p/h):"auto"===l?p:l);var d={},m=function(t,e){(function(t){return"unset"===t||"undefined"===t||"none"===t})(e)||(d[t]=e.toString())};return m("width",o),m("height",u),d.viewBox=i.left.toString()+" "+i.top.toString()+" "+h.toString()+" "+p.toString(),{attributes:d,body:a}}(t,a),g=m.attributes;if(a.inline&&(c.verticalAlign="-0.125em"),"svg"===o){h.style=(0,s.Z)((0,s.Z)({},c),l),Object.assign(h,g);var v=0,y=e.id;return"string"===typeof y&&(y=y.replace(/-/g,"_")),h.dangerouslySetInnerHTML={__html:P(m.body,y?function(){return y+"ID"+v++}:"iconifyReact")},u.createElement("svg",h)}var x,b=t.body,w=t.width,k=t.height,S="mask"===o||"bg"!==o&&-1!==b.indexOf("currentColor"),T=function(t,e){var n=-1===t.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(var r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}(b,(0,s.Z)((0,s.Z)({},g),{},{width:w+"",height:k+""}));return h.style=(0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},c),{},{"--svg":(x=T,'url("data:image/svg+xml,'+function(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}(x)+'")'),width:Vt(g.width),height:Vt(g.height)},Ct),S?Ot:Rt),l),u.createElement("span",h)};if(E(!0),V("",X),"undefined"!==typeof document&&"undefined"!==typeof window){bt();var Zt=window;if(void 0!==Zt.IconifyPreload){var jt=Zt.IconifyPreload,Gt="Invalid IconifyPreload syntax.";"object"===typeof jt&&null!==jt&&(jt instanceof Array?jt:[jt]).forEach((function(t){try{("object"!==typeof t||null===t||t instanceof Array||"object"!==typeof t.icons||"string"!==typeof t.prefix||!function(t,e){if("object"!==typeof t)return!1;if("string"!==typeof e&&(e=t.provider||""),A&&!e&&!t.prefix){var n=!1;return w(t)&&(t.prefix="",y(t,(function(t,e){e&&L(t,e)&&(n=!0)}))),n}var r=t.prefix;return!!h({provider:e,prefix:r,name:"a"})&&!!T(S(e,r),t)}(t))&&console.error(Gt)}catch(e){console.error(Gt)}}))}if(void 0!==Zt.IconifyProviders){var Bt=Zt.IconifyProviders;if("object"===typeof Bt&&null!==Bt)for(var Ut in Bt){var Wt="IconifyProviders["+Ut+"] is invalid.";try{var Ht=Bt[Ut];if("object"!==typeof Ht||!Ht||void 0===Ht.resources)continue;U(Ut,Ht)||console.error(Wt)}catch(Yt){console.error(Wt)}}}}var Xt=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).state={icon:null},i}return(0,i.Z)(n,[{key:"_abortLoading",value:function(){this._loading&&(this._loading.abort(),this._loading=null)}},{key:"_setData",value:function(t){this.state.icon!==t&&this.setState({icon:t})}},{key:"_checkIcon",value:function(t){var e,n=this.state,r=this.props.icon;if("object"===typeof r&&null!==r&&"string"===typeof r.body)return this._icon="",this._abortLoading(),void((t||null===n.icon)&&this._setData({data:r}));if("string"!==typeof r||null===(e=l(r,!1,!0)))return this._abortLoading(),void this._setData(null);var i=_(e);if(i){if(this._icon!==r||null===n.icon){this._abortLoading(),this._icon=r;var a=["iconify"];""!==e.prefix&&a.push("iconify--"+e.prefix),""!==e.provider&&a.push("iconify--"+e.provider),this._setData({data:i,classes:a}),this.props.onLoad&&this.props.onLoad(r)}}else this._loading&&this._loading.name===r||(this._abortLoading(),this._icon="",this._setData(null),null!==i&&(this._loading={name:r,abort:Tt([e],this._checkIcon.bind(this,!1))}))}},{key:"componentDidMount",value:function(){this._checkIcon(!1)}},{key:"componentDidUpdate",value:function(t){t.icon!==this.props.icon&&this._checkIcon(!0)}},{key:"componentWillUnmount",value:function(){this._abortLoading()}},{key:"render",value:function(){var t=this.props,e=this.state.icon;if(null===e)return t.children?t.children:u.createElement("span",{});var n=t;return e.classes&&(n=(0,s.Z)((0,s.Z)({},t),{},{className:("string"===typeof t.className?t.className+" ":"")+e.classes.join(" ")})),Kt((0,s.Z)((0,s.Z)({},f),e.data),n,t._inline,t._ref)}}]),n}(u.Component),qt=u.forwardRef((function(t,e){var n=(0,s.Z)((0,s.Z)({},t),{},{_ref:e,_inline:!1});return u.createElement(Xt,n)}));u.forwardRef((function(t,e){var n=(0,s.Z)((0,s.Z)({},t),{},{_ref:e,_inline:!0});return u.createElement(Xt,n)}))}}]);
//# sourceMappingURL=663.8f7a99c8.chunk.js.map