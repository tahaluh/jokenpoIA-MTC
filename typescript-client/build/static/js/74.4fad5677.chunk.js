"use strict";(self.webpackChunktypescript_client=self.webpackChunktypescript_client||[]).push([[74],{4074:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i=n(3433),s=n(9439),r=n(1889),o=n(890),a=n(3400),l=n(7509),u=n(6151),c=n(2791),h=n(6907),f=n(1413),d=n(5987),p=n(2711),v=n(4554),y=n(184),x=["icon","width","sx"],m=(0,c.forwardRef)((function(e,t){var n=e.icon,i=e.width,s=void 0===i?20:i,r=e.sx,o=(0,d.Z)(e,x);return(0,y.jsx)(v.Z,(0,f.Z)({ref:t,component:p.JO,icon:n,sx:(0,f.Z)({width:s,height:s},r)},o))})),O=n(5671),R=n(3144),j=function(){function e(){(0,O.Z)(this,e),this.WinTransitionMatrix=Array.from({length:3},(function(){return Array(3).fill(1)})),this.LoseTransitionMatrix=Array.from({length:3},(function(){return Array(3).fill(1)})),this.TieTransitionMatrix=Array.from({length:3},(function(){return Array(3).fill(1)})),this.probabilitiesRPS=[1/3,1/3,1/3],this.prevPlayerMove=0,this.prevResult=0,this.nOfWins=0,this.nOfLoses=0,this.nOfTies=0,this.nOfRounds=0}return(0,R.Z)(e,[{key:"play",value:function(e){this.nOfRounds>0&&(this.updateMatrix(e),this.calcProbabilities());var t=this.calcIAMove(),n=this.checkResult(e,t);return this.prevPlayerMove=e,this.prevResult=n,{result:n}}},{key:"stats",value:function(){return{nOfLoses:this.nOfLoses,nOfRounds:this.nOfRounds,nOfTies:this.nOfTies,nOfWins:this.nOfTies,playerWinRate:this.nOfWins/this.nOfRounds,iaWinRate:this.nOfLoses/this.nOfRounds,tieRate:this.nOfTies/this.nOfRounds}}},{key:"calcIAMove",value:function(){var e=Math.floor(100*Math.random())+1,t=100*this.probabilitiesRPS[0],n=100*this.probabilitiesRPS[1];return e<=t?1:e<=t+n?2:0}},{key:"calcProbabilities",value:function(){var e,t=[1/3,1/3,1/3];if(1===this.prevResult)e=this.WinTransitionMatrix;else if(0===this.prevResult)e=this.TieTransitionMatrix;else{if(-1!==this.prevResult)return t;e=this.LoseTransitionMatrix}for(var n=e[this.prevPlayerMove].reduce((function(e,t){return e+t}),0),i=0;i<3;i++)t[i]=e[this.prevPlayerMove][i]/n;return this.probabilitiesRPS=t,t}},{key:"updateMatrix",value:function(e){var t=this.prevResult;1===t?this.WinTransitionMatrix[this.prevPlayerMove][e]+=1:0===t?this.TieTransitionMatrix[this.prevPlayerMove][e]+=1:-1===t&&(this.LoseTransitionMatrix[this.prevPlayerMove][e]+=1)}},{key:"checkResult",value:function(e,t){var n;return n=e===t?0:0===e&&2===t||1===e&&0===t||2===e&&1===t?1:-1,this.addResult(n),n}},{key:"addResult",value:function(e){1===e?this.nOfWins+=1:-1===e?this.nOfLoses+=1:this.nOfTies+=1,this.nOfRounds++}}]),e}(),g=n(1851),Z=function(){function e(t){(0,O.Z)(this,e),this.prevResult=0,this.nOfWins=0,this.nOfLoses=0,this.nOfTies=0,this.nOfRounds=0,this.playerMoves=[],this.memorySize=5,this.net=new g.recurrent.LSTMTimeStep,this.memorySize=t}return(0,R.Z)(e,[{key:"play",value:function(e){this.prepareData();var t=this.calcIAMove();this.updatePattern(e);var n=this.checkResult(e,t);return this.prevResult=n,{result:n}}},{key:"stats",value:function(){return{nOfLoses:this.nOfLoses,nOfRounds:this.nOfRounds,nOfTies:this.nOfTies,nOfWins:this.nOfTies,playerWinRate:this.nOfWins/this.nOfRounds,iaWinRate:this.nOfLoses/this.nOfRounds,tieRate:this.nOfTies/this.nOfRounds}}},{key:"updatePattern",value:function(e){0!==this.nOfRounds&&(this.playerMoves.shift(),this.playerMoves.push(e))}},{key:"prepareData",value:function(){if(this.playerMoves.length<1)for(var e=1;e<=this.memorySize;e++)this.playerMoves.push(Math.floor(3*Math.random()))}},{key:"calcIAMove",value:function(){if(this.playerMoves.length<this.memorySize)return Math.floor(3*Math.random())+1;var e=this.playerMoves.map((function(e){return Number(e+1)}));e.length>this.memorySize&&(e=e.slice(e.length-this.memorySize)),this.net.train([e],{iterations:100});var t=this.net.run(e),n=Math.round(t-1);return(n+1)%3}},{key:"checkResult",value:function(e,t){var n;return n=e===t?0:0===e&&2===t||1===e&&0===t||2===e&&1===t?1:-1,this.addResult(n),n}},{key:"addResult",value:function(e){1===e?this.nOfWins+=1:-1===e?this.nOfLoses+=1:this.nOfTies+=1,this.nOfRounds++}}]),e}(),k=new j,M=new j,P=new j,T=new Z(10);function b(){var e=(0,c.useState)(0),t=(0,s.Z)(e,2),n=t[0],f=t[1],d=(0,c.useState)(0),p=(0,s.Z)(d,2),v=p[0],x=p[1],O=(0,c.useState)([[],[],[],[]]),R=(0,s.Z)(O,2),j=R[0],g=R[1],Z=(0,c.useState)([[],[],[],[]]),b=(0,s.Z)(Z,2),w=b[0],C=b[1],S=(0,c.useState)(0),W=(0,s.Z)(S,2),L=W[0],A=W[1],I=(0,c.useState)([]),z=(0,s.Z)(I,2),N=z[0],D=z[1],E=(0,c.useState)(0),F=(0,s.Z)(E,2),J=F[0],U=F[1],_=(0,c.useState)(""),q=(0,s.Z)(_,2),B=q[0],H=q[1],V=function(e){if(!(J>=4)){var t,n;if(function(e){g((function(t){return(0,i.Z)(t.map((function(t,n){return n==J?(0,i.Z)(t.concat(e)):(0,i.Z)(t)})))}))}(e),0==J)t=k.play(e);else if(1==J)t=M.play(e);else if(2==J)t=P.play(e);else{if(3!=J)return;t=T.play(e)}if(n=t.result,C((function(e){return(0,i.Z)(e.map((function(e,t){return t==J?(0,i.Z)(e.concat(n)):(0,i.Z)(e)})))})),A(t.result),j[J].length+1>=500){var s;if(0==J)s=k.stats();else if(1==J)s=M.stats();else if(2==J)s=P.stats();else{if(3!=J)return;s=T.stats()}D((function(e){return e.concat(s)})),f(0),x(0),U(J+1)}}},X=function(){V(0)},G=function(){V(1)},K=function(){V(2)},Q=function(){var e={games:j.map((function(e,t){return{rounds:e.map((function(e,n){return{playerMove:e,result:w[t][n]}})),stats:N[t]}})),playerName:B||"guest"};console.log(e),console.log(B);var t=encodeURIComponent(JSON.stringify(e)),n=(t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),document.createElement("a"));n.setAttribute("href",t),n.setAttribute("download",(B||"guest")+".json"),document.body.appendChild(n),n.click(),n.remove()};(0,c.useEffect)((function(){document.getRootNode()}),[L]),(0,c.useEffect)((function(){return document.addEventListener("keydown",Y,!0),function(){document.removeEventListener("keydown",Y,!0)}}),[j]);var Y=function(e){1==e.key?X():2==e.key?G():3==e.key?K():8==e.key&&Q()};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.ql,{children:(0,y.jsx)("title",{children:" Pedra, Papel... e AI?"})}),(2==J||3==J)&&(0,y.jsx)(r.ZP,{container:!0,item:!0,justifyContent:"center",alignItems:"center",sx:{position:"fixed",top:"0"},children:(0,y.jsx)(r.ZP,{item:!0,paddingX:3,borderTop:0,children:(0,y.jsxs)(o.Z,{padding:1,fontSize:20,fontFamily:"cursive",children:["Voc\xea ","".concat(n," - ").concat(v)," IA"]})})}),(0,y.jsxs)(r.ZP,{container:!0,flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",spacing:6,sx:{backgroundColor:-1==L&&J>=2&&J<=3?"red":1===L&&J>=2&&J<=3?"green":"white"},children:[J<=3&&(0,y.jsx)(r.ZP,{item:!0,container:!0,xs:8,md:6,lg:4,xl:3,justifyContent:"center",flexDirection:"row",gap:5,children:(0,y.jsxs)(o.Z,{children:["Total: ",j[J].length]})}),(0,y.jsxs)(r.ZP,{item:!0,container:!0,xs:8,md:6,lg:4,xl:3,justifyContent:"center",flexDirection:"row",gap:5,children:[J<=3&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.ZP,{item:!0,justifyContent:"center",children:(0,y.jsxs)(a.Z,{color:"inherit",sx:{border:"1px solid black"},onClick:X,children:[(0==J||1==J)&&(0,y.jsx)(r.ZP,{container:!0,width:"75px",height:"75px",justifyContent:"center",alignItems:"center",children:"1"}),(2===J||3==J)&&(0,y.jsx)(m,{icon:"la:hand-rock-solid",width:"75px"})]})}),(0,y.jsx)(r.ZP,{item:!0,justifyContent:"center",children:(0,y.jsxs)(a.Z,{color:"inherit",sx:{border:"1px solid black"},onClick:G,children:[(0==J||1==J)&&(0,y.jsx)(r.ZP,{container:!0,width:"75px",height:"75px",justifyContent:"center",alignItems:"center",children:"2"}),(2===J||3==J)&&(0,y.jsx)(m,{icon:"la:hand-paper-solid",width:"75px"})]})}),(0,y.jsx)(r.ZP,{item:!0,justifyContent:"center",children:(0,y.jsxs)(a.Z,{color:"inherit",sx:{border:"1px solid black"},onClick:K,children:[(0==J||1==J)&&(0,y.jsx)(r.ZP,{container:!0,width:"75px",height:"75px",justifyContent:"center",alignItems:"center",children:"3"})," ",(2===J||3==J)&&(0,y.jsx)(m,{icon:"la:hand-scissors-solid",width:"75px"})]})})]}),J>=4&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,y.jsx)(l.Z,{fullWidth:!0,placeholder:"Insira seu nome...",label:"Nome",value:B,onChange:function(e){H(e.target.value)}})}),(0,y.jsx)(r.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,y.jsx)(u.Z,{variant:"contained",color:"success",fullWidth:!0,size:"large",onClick:Q,children:"Baixar"})})]})]})]})]})}}}]);
//# sourceMappingURL=74.4fad5677.chunk.js.map